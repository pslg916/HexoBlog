{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/LICENSE","path":"vendors/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/README.md","path":"vendors/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/bower.json","path":"vendors/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/bower.json","path":"vendors/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","path":"vendors/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","path":"vendors/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","path":"vendors/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","path":"vendors/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","path":"vendors/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","path":"vendors/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/bower.json","path":"vendors/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","path":"vendors/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","path":"vendors/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","path":"vendors/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/jquery/index.js","path":"vendors/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","path":"vendors/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","path":"vendors/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","path":"vendors/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","path":"vendors/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","path":"vendors/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","path":"vendors/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","path":"vendors/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","path":"vendors/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","path":"vendors/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","path":"vendors/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","path":"vendors/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","path":"vendors/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","path":"vendors/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","path":"vendors/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","path":"vendors/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","path":"vendors/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","path":"vendors/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","path":"vendors/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.js","path":"vendors/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","path":"vendors/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","path":"vendors/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","path":"vendors/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"source/uploads/slg.jpg","path":"uploads/slg.jpg","modified":0,"renderable":0}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"80e096fdc1cf912ee85dd9f7e6e77fd40cf60f10","modified":1461947401710},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1461947401712},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1461947401713},{"_id":"themes/next/.javascript_ignore","hash":"d619ee13031908cd72666e4ff652d2ea3483b1c3","modified":1461947401715},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1461947401717},{"_id":"themes/next/README.en.md","hash":"565ba52b3825b85a9f05b41183caca7f18b741d4","modified":1461947401719},{"_id":"themes/next/README.md","hash":"500b5606eb6a09c979d16128f8b00f4bf9bc95ac","modified":1461947401721},{"_id":"themes/next/_config.yml","hash":"49d5e43989da27b101784568ddff26913c97a044","modified":1461947401723},{"_id":"themes/next/bower.json","hash":"f89c6700a11d81e067cc97273ca6bf96cb88c8f9","modified":1461947401725},{"_id":"themes/next/gulpfile.coffee","hash":"26e5b1b945704c8bc78b928feede895c4c111c95","modified":1461947401726},{"_id":"themes/next/package.json","hash":"63e9c0f1dd9e5d7f51b4ae383981ef939a2ed45d","modified":1461947401867},{"_id":"source/_posts/20140418_sun_CmdMarkdownExample.md","hash":"558814d06ff80fdf5b15dacb5d4a590dc7e3f0c5","modified":1460903971353},{"_id":"source/_posts/20160417_sun_VimComplie.md","hash":"a2a39ce1c0c70ee9e4fc6ada2bd9267a52a04954","modified":1462180756811},{"_id":"source/_posts/20160418_sun_DjangoBlog.md","hash":"f0ba2943814ebbfb9eb243579dc0a264b5f4d811","modified":1462186121455},{"_id":"source/_posts/20160417_sun_WinDevEnv.md","hash":"46133d56bd37161cee8aea3dd9143e3504858feb","modified":1462185898341},{"_id":"source/_posts/20160420_sun_HexoBlogEnv.md","hash":"c41293e3a256ff3d54a2a10bff41b8b548506bd1","modified":1462185951788},{"_id":"source/_posts/20160424_sun_ThinPlateSpline.md","hash":"a6ddf36d534fdf03c1cc81004582e4b85fe50667","modified":1462186130140},{"_id":"source/categories/index.md","hash":"6367f413026804e0db50401ae742ce0e8176f369","modified":1461592263963},{"_id":"source/tags/index.md","hash":"aa07ffdf9cce5eb5ad8963856af951b0efe0c47a","modified":1461593506554},{"_id":"themes/next/languages/de.yml","hash":"786afba25cfc98845a20d9901823ebeebcd1cbbf","modified":1461947401728},{"_id":"themes/next/languages/default.yml","hash":"9db835c0543ade5a89bc80ec5a898203227cf3d8","modified":1461947401730},{"_id":"themes/next/languages/en.yml","hash":"f03799cbdb5a33064ead080bcac4baca1f6bc5f9","modified":1461947401732},{"_id":"themes/next/languages/fr-FR.yml","hash":"1a084623c39de74301f3e92f9388a3a815a542ca","modified":1461947401734},{"_id":"themes/next/languages/ja.yml","hash":"a2c7b6301b5474aab798946fb700289df237c3cf","modified":1461947401735},{"_id":"themes/next/languages/pt.yml","hash":"ca239b39bf65c9462e59d51b12f0fe566d453197","modified":1461947401737},{"_id":"themes/next/languages/ru.yml","hash":"cc7b964a46587aea0e57b0a5269d8fd25570858e","modified":1461947401739},{"_id":"themes/next/languages/zh-Hans.yml","hash":"bea452bc49aed171a210d09bd6cddc4e846ea8ab","modified":1461947401741},{"_id":"themes/next/languages/zh-hk.yml","hash":"519ab3d817ec3bc5bfc91159c494b6b3c170bea7","modified":1461947401742},{"_id":"themes/next/languages/zh-tw.yml","hash":"6b1f345aaefc13e6723dc8a6741b59ac05c20dfd","modified":1461947401744},{"_id":"themes/next/layout/_layout.swig","hash":"74157f6cfd679ea11febec632542793f37c5e5d4","modified":1461947401746},{"_id":"themes/next/layout/category.swig","hash":"6422d196ceaff4220d54b8af770e7e957f3364ad","modified":1461947401859},{"_id":"themes/next/layout/archive.swig","hash":"b5b59d70fc1563f482fa07afd435752774ad5981","modified":1461947401858},{"_id":"themes/next/layout/index.swig","hash":"427d0b95b854e311ae363088ab39a393bf8fdc8b","modified":1461947401861},{"_id":"themes/next/layout/page.swig","hash":"8019d02232a6dd1a665b6a4d2daef8e5dd2f0049","modified":1461947401862},{"_id":"themes/next/layout/post.swig","hash":"e2e512142961ddfe77eba29eaa88f4a2ee43ae18","modified":1461947401864},{"_id":"themes/next/layout/tag.swig","hash":"07cf49c49c39a14dfbe9ce8e7d7eea3d4d0a4911","modified":1461947401866},{"_id":"themes/next/scripts/merge-configs.js","hash":"0c56be2e85c694247cfa327ea6d627b99ca265e8","modified":1461947401870},{"_id":"themes/next/test/.jshintrc","hash":"096ed6df627373edd820f24d46b8baf528dee61d","modified":1461947402222},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1461947402226},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1461947402231},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342315},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"43c3433155ccd9abcbe7dce2e6bfa1f3a66af18b","modified":1461947401749},{"_id":"themes/next/layout/_macro/post.swig","hash":"ae280b8bc49b87e3b86ce1a131191c37d6aa37b4","modified":1461947401752},{"_id":"themes/next/layout/_macro/reward.swig","hash":"70bd1f11a558a7fc4b8fd7860377f31e0357ceb6","modified":1461947401754},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"cd98e1141df1a41ed14f31cd4cf5f5c5f0a9898e","modified":1461947401756},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"85327c2174d09c6d69c9033592e6c8f7eb7ac3ba","modified":1461947401757},{"_id":"themes/next/layout/_partials/comments.swig","hash":"82a9bc2ba60ce68419128ff60624bd74b15dfb78","modified":1461947401759},{"_id":"themes/next/layout/_partials/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1461947401761},{"_id":"themes/next/layout/_partials/footer.swig","hash":"3ddb68102f11d9bc3f722e336019330ed3e1fd21","modified":1461947401763},{"_id":"themes/next/layout/_partials/head.swig","hash":"53bf077755e217a2b5ae107da62b6a824a0baa52","modified":1461947401766},{"_id":"themes/next/layout/_partials/header.swig","hash":"7739068b69f87ae641dea19c3445169ae80d5df4","modified":1461947401769},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1461947401771},{"_id":"themes/next/layout/_partials/search.swig","hash":"011b9d6c9f0a2f4654908ea20b9391f9b7981271","modified":1461947401773},{"_id":"themes/next/layout/_scripts/baidu-push.swig","hash":"82d060fe055d6e423bbc9199f82dfe5c68e74779","modified":1461947401795},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1461947401797},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1461947401798},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"0b91cadecead8e0b5211cc42b085998d94af503a","modified":1461947401855},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1461947401873},{"_id":"themes/next/scripts/tags/full-image.js","hash":"3acce36db0feb11a982c6c799aa6b6b47df2827c","modified":1461947401875},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1461947401881},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1461947402027},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1461947402030},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1461947402032},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1461947402034},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1461947402036},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1461947402038},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1461947402040},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1461947402040},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1460884342321},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1460884342322},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1461947402042},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1461947402042},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1460884342323},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342234},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342234},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342292},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342293},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342295},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342310},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1460884342312},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"36db00417ab0f7639c4cc95ab6e20a7a69be9560","modified":1461947401768},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"ff5523d5dacaa77a55a24e50e6e6530c3b98bfad","modified":1461947401775},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1461947401778},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1461947401779},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"c07f7b2f264e5215b8ed42d67e8cef2477558364","modified":1461947401781},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"7ca5cb4daa58b3504e17f3e02975e794bc634658","modified":1461947401788},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1461947401790},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"63315fcf210799f894208c9f512737096df84962","modified":1461947401793},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1461947401800},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1461947401803},{"_id":"themes/next/layout/_scripts/third-party/analytics.swig","hash":"0a89c04055bade7baa5962f1d5aefe438d83a244","modified":1461947401805},{"_id":"themes/next/layout/_scripts/third-party/comments.swig","hash":"907b931d775d32405d02a25b3b0a3ac03bf804d0","modified":1461947401823},{"_id":"themes/next/layout/_scripts/third-party/lean-analytics.swig","hash":"2fc4a0d2c825a512f39c0eadd78452e90615465a","modified":1461947401837},{"_id":"themes/next/layout/_scripts/third-party/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1461947401852},{"_id":"themes/next/layout/_scripts/third-party/localsearch.swig","hash":"1561bd0c107d725252c6d746e9ac177fc18f93bf","modified":1461947401843},{"_id":"themes/next/layout/_scripts/third-party/mathjax.swig","hash":"5bafc33f57508d1d04a9930165240f6e9efa8d6d","modified":1461947401848},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1461947401979},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1461947401980},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"4e49707c99c8bbcfa0a607dfdaff0fbb7dffd2a3","modified":1461947401982},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"c8d35a6b9e3bff6d8fdb66de853065af9d37562d","modified":1461947402019},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"11d443fc97648d2965d7f8bad9f4a493996fe62f","modified":1461947402021},{"_id":"themes/next/source/css/_variables/base.styl","hash":"2676996e819af2079c552f755ab7933939e151cd","modified":1461947402024},{"_id":"themes/next/source/css/_variables/default.styl","hash":"8ec3307fe42d738b1bbda4b6419d0995f5560222","modified":1461947402026},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1461947402044},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1461947402044},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1461947402048},{"_id":"themes/next/source/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1461947402049},{"_id":"themes/next/source/js/src/utils.js","hash":"a3a3375de818964f4cbed4d0e2c2f97ccee7199e","modified":1461947402053},{"_id":"themes/next/source/js/src/post-details.js","hash":"10247c78fe933a0cfcaad22a2a03e7a026864461","modified":1461947402049},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1461947402052},{"_id":"themes/next/source/vendors/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1461947402057},{"_id":"themes/next/source/vendors/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1461947402055},{"_id":"themes/next/source/vendors/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1461947402089},{"_id":"themes/next/source/vendors/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1461947402089},{"_id":"themes/next/source/vendors/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1461947402092},{"_id":"themes/next/source/vendors/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1461947402094},{"_id":"themes/next/source/vendors/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1461947402104},{"_id":"themes/next/source/vendors/font-awesome/.bower.json","hash":"7da985a99674e54f514d4fd9fcd3bcea6e7e41d5","modified":1461947402103},{"_id":"themes/next/source/vendors/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1461947402106},{"_id":"themes/next/source/vendors/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1461947402108},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","hash":"69a4c537d167b68a0ccf1c6febd138aeffca60d6","modified":1461947402107},{"_id":"themes/next/source/vendors/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1461947402147},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1461947402168},{"_id":"themes/next/source/vendors/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1461947402168},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1461947402169},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1461947402170},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1461947402176},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1461947402176},{"_id":"themes/next/source/vendors/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1461947402191},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1461947402210},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1461947402220},{"_id":"themes/next/source/vendors/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1461947402190},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1461947402215},{"_id":"themes/next/source/vendors/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1461947402165},{"_id":"themes/next/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"7c43d66da93cde65b473a7d6db2a86f9a42647d6","modified":1461947401808},{"_id":"themes/next/layout/_scripts/third-party/analytics/busuanzi-counter.swig","hash":"4fcbf57c4918528ab51d3d042cff92cf5aefb599","modified":1461947401810},{"_id":"themes/next/layout/_scripts/third-party/analytics/cnzz-analytics.swig","hash":"44e761721e8ad787ef571a3cc57bbc12d318a2a3","modified":1461947401812},{"_id":"themes/next/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"334176d838ee528e58468d8bc74ff3a6d3f25b2b","modified":1461947401815},{"_id":"themes/next/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"30a23fa7e816496fdec0e932aa42e2d13098a9c2","modified":1461947401818},{"_id":"themes/next/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1461947401822},{"_id":"themes/next/layout/_scripts/third-party/comments/disqus.swig","hash":"3491d3cebabc8a28857200db28a1be65aad6adc2","modified":1461947401827},{"_id":"themes/next/layout/_scripts/third-party/comments/duoshuo.swig","hash":"8c7af79407d223486fba72b8150fe045a553bf70","modified":1461947401830},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"0dfb4b3ba3180d7285e66f270e1d3fa0f132c3d2","modified":1461947401885},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"b49efc66bd055a2d0be7deabfcb02ee72a9a28c8","modified":1461947401883},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1461947401887},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"10994990d6e0b4d965a728a22cf7f6ee29cae9f6","modified":1461947401888},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1461947401911},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1461947401948},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1461947401968},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"4c84903d6a15a903235eec04a560fdeda80c12f3","modified":1461947401972},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5304f99581da3a31de3ecec959b7adf9002fde83","modified":1461947401970},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1461947401974},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"013619c472c7e4b08311c464fcbe9fcf5edde603","modified":1461947401975},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"04e6c5257814c65e638ab70c53030e8dfdb3f37d","modified":1461947401977},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1461947401986},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1461947401984},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1461947401988},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1461947401989},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"4303776991ef28f5742ca51c7dffe6f12f0acf34","modified":1461947401991},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"6cc10d943d92eac953e6978e46d27ae55584482c","modified":1461947401995},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1461947401993},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"6ed60cc621bac096c0ed7534fa25b1a52dc571d4","modified":1461947401999},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1461947402000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1461947402003},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"c2c6c4f6434b4f94aac2af5861cd769427f0ee10","modified":1461947402002},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"8aca5d9f1df157ab27e699c1b3ba9438b9e039ad","modified":1461947402004},{"_id":"themes/next/source/css/_schemes/Pisces/_full-image.styl","hash":"938d39eedc6e3d33918c1145a5bf1e79991d3fcf","modified":1461947402008},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"be22ad34f546a07f6d56b424338cdd898683eea4","modified":1461947402006},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"8d7cecde4933900c7df2db9d0a98f5f82f88dc93","modified":1461947402009},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1461947402013},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"d09280e5b79f3b573edb30f30c7a5f03ac640986","modified":1461947402011},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"ff30fdbdf22841d0fb55f486a1f55bee4dc19401","modified":1461947402015},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"1b10ba2d3ad0c063c418dc94a0b7e0db4b342c53","modified":1461947402017},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"7506e7490c69a200831393c38d25e91c156bd471","modified":1461947402052},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1460884342334},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1460884342334},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1460884342335},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1460884342336},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1460884342336},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1460884342337},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1461947402071},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1461947402078},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1461947402087},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1460884342349},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1461947402100},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","hash":"3b87c2560832748cd06f9bfd2fd6ea8edbdae8c7","modified":1461947402111},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1461947402113},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","hash":"05ea25bc9b3ac48993e1fee322d3bc94b49a6e22","modified":1461947402115},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1460884342369},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1461947402182},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1461947402187},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1460884342358},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1460884342359},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1460884342368},{"_id":"themes/next/source/vendors/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1461947402201},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1461947401890},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1461947401892},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1461947401894},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"c890ce7fe933abad7baf39764a01894924854e92","modified":1461947401895},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1461947401897},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1461947401899},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"90f8f9706cd7fe829cf06e9959a65fd3f8b994fa","modified":1461947401903},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"7778920dd105fa4de3a7ab206eeba30b1a7bac45","modified":1461947401905},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1461947401906},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"3c46efd6601e268093ce6d7b1471d18501878f0d","modified":1461947401908},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"e340071ee392f55b32c540d690198f157e588433","modified":1461947401901},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1461947401910},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2e7ec9aaa3293941106b1bdd09055246aa3c3dc6","modified":1461947401932},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"89fef1caf94caf76ca09c643b83b0b4d4e417e08","modified":1461947401934},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"c44f6a553ec7ea5508f2054a13be33a62a15d3a9","modified":1461947401935},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1461947401937},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1461947401939},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"7690b9596ec3a49befbe529a5a2649abec0faf76","modified":1461947401941},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"2d3abbc85b979a648e0e579e45f16a6eba49d1e7","modified":1461947401942},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"58fb7604b44e3f56d880bbbd95d0baface38c4ee","modified":1461947401946},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"8fae54591877a73dff0b29b2be2e8935e3c63575","modified":1461947401913},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1461947401915},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"b25132fe6a7ad67059a2c3afc60feabb479bdd75","modified":1461947401917},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1461947401918},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"d543d1377c1f61b70e3adb6da0eb12797552e5f2","modified":1461947401920},{"_id":"themes/next/source/css/_common/components/post/post-more-link.styl","hash":"15063d79b5befc21820baf05d6f20cc1c1787477","modified":1461947401922},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"234facd038f144bd0fe09a31ed1357c5d74c517f","modified":1461947401944},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"cbca4842a54950e2934b3b8f3cd940f122111aef","modified":1461947401924},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1461947401925},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"99d994bd19895a4aaa2fa8d12801ec72dd3cf118","modified":1461947401927},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"d4303e6439e70dc23f9151c69bc31a7fb0ece820","modified":1461947401930},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1461947401928},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1461947401950},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"618f73450cf541f88a4fddc3d22898aee49d105d","modified":1461947401952},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1461947401953},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"8e66c2635d48e11de616bb29c4b1323698eebc0a","modified":1461947401955},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1461947401957},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"b03f891883446f3a5548b7cc90d29c77e62f1053","modified":1461947401958},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1461947401961},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1461947401962},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"795d94561888d31cb7a6ff4a125596809ea69b7d","modified":1461947401964},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"3afc459442c132c480d1d832f1a872f1070bb048","modified":1461947401965},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1461947401997},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1460884342338},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1461947402062},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1461947402066},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1461947402070},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1461947402070},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1461947402071},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1460884342367},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"2b3c8ba7008cc014d8fb37abc6f9f49aeda83824","modified":1461947402138},{"_id":"public/categories/index.html","hash":"253e3a2d0edad5b089844de38d5baeaeeff595a5","modified":1462186197842},{"_id":"public/archives/index.html","hash":"5032cd9f10a8b5eeba9117930b25c04b8ea33d51","modified":1462186197844},{"_id":"public/archives/2016/index.html","hash":"7f0f2353d712dad204a8f4f9d08bf08201c1cba6","modified":1462186197844},{"_id":"public/archives/2016/04/index.html","hash":"8fb3ef9a924650ba46f098863b291821b917cb93","modified":1462186197844},{"_id":"public/tags/工具/index.html","hash":"9e4733f0297a0ef6e97ed66ea525d806e3093763","modified":1462185771404},{"_id":"public/tags/环境/index.html","hash":"fe66005d49a9190984d5be4756c512af2fc22c96","modified":1462180049240},{"_id":"public/tags/Django/index.html","hash":"e726f5e2ff8917ca9b611a0919ae3b91ee08bcc2","modified":1462186197843},{"_id":"public/tags/数学/index.html","hash":"35473a3a654b5c66e589f80fe40e058fa60b6506","modified":1462185771404},{"_id":"public/2016/04/24/20160424_sun_ThinPlateSpline/index.html","hash":"230a439eda6c0fe509810c21a8f9aa949cdb4299","modified":1462186197845},{"_id":"public/2016/04/20/20160420_sun_HexoBlogEnv/index.html","hash":"496e5d6ce99dca3271f796d6c8046478a0004d05","modified":1462186197845},{"_id":"public/2016/04/18/20140418_sun_CmdMarkdownExample/index.html","hash":"43fc7a247d6bba73687387728204b77cbf3ef882","modified":1462001420448},{"_id":"public/2016/04/18/20160418_sun_DjangoBlog/index.html","hash":"38d2879a3039869b3c6d3a6ba153d833e308667d","modified":1462186197846},{"_id":"public/2016/04/17/20160417_sun_VimComplie/index.html","hash":"2dd5c517562167d7970e27bbf2c076a4d717a203","modified":1462186197846},{"_id":"public/2016/04/17/20160417_sun_WinDevEnv/index.html","hash":"417596456503b3ee638fe5d1091a68cf57d877d9","modified":1462186197846},{"_id":"public/index.html","hash":"5da09859e8e56036c6ccd8002148c48977349da7","modified":1462186197846},{"_id":"public/tags/index.html","hash":"9ab294221ff759e73a7d5d87fba000806ada00d4","modified":1462186197842},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1461947596052},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1461947596052},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1461947596052},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1461947596052},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1461947596053},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1461947596052},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1461947596053},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1461593551571},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1461947596053},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1461593551572},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1461947596053},{"_id":"public/vendors/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1461947596053},{"_id":"public/vendors/font-awesome/HELP-US-OUT.txt","hash":"69a4c537d167b68a0ccf1c6febd138aeffca60d6","modified":1461947596053},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1461593551572},{"_id":"public/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1461593551572},{"_id":"public/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1461593551572},{"_id":"public/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1461593551572},{"_id":"public/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1461593551572},{"_id":"public/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1461593551573},{"_id":"public/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1461593551573},{"_id":"public/vendors/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1461947596053},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1461593551573},{"_id":"public/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1461593551573},{"_id":"public/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1461593552792},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1461593552807},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1461593552808},{"_id":"public/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1461593552817},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1461593552817},{"_id":"public/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1461593552818},{"_id":"public/js/src/post-details.js","hash":"10247c78fe933a0cfcaad22a2a03e7a026864461","modified":1461593552818},{"_id":"public/js/src/utils.js","hash":"a3a3375de818964f4cbed4d0e2c2f97ccee7199e","modified":1461593552818},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1461593552818},{"_id":"public/vendors/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1461593552818},{"_id":"public/vendors/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1461593552818},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1461593552818},{"_id":"public/vendors/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1461593552818},{"_id":"public/vendors/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1461593552818},{"_id":"public/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1461593552818},{"_id":"public/vendors/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1461593552818},{"_id":"public/vendors/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1461593552819},{"_id":"public/js/src/schemes/pisces.js","hash":"7506e7490c69a200831393c38d25e91c156bd471","modified":1461593552819},{"_id":"public/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1461593552819},{"_id":"public/vendors/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1461593552819},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1461593552819},{"_id":"public/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1461593552819},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1461593552819},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1461593552819},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1461593552820},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1461593552820},{"_id":"public/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1461593552820},{"_id":"public/vendors/fastclick/README.html","hash":"da3c74d484c73cc7df565e8abbfa4d6a5a18d4da","modified":1461593552820},{"_id":"public/vendors/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1461593552820},{"_id":"public/vendors/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1461593552821},{"_id":"public/css/main.css","hash":"a700e2193bc88fe426518e705e89d5b9fa9a00d3","modified":1461947596640},{"_id":"public/vendors/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1461593552821},{"_id":"public/vendors/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1461593552821},{"_id":"public/vendors/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1461593552821},{"_id":"public/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1461593552821},{"_id":"public/vendors/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1461593552821},{"_id":"public/vendors/font-awesome/css/font-awesome.css","hash":"3b87c2560832748cd06f9bfd2fd6ea8edbdae8c7","modified":1461593552822},{"_id":"public/vendors/font-awesome/css/font-awesome.min.css","hash":"05ea25bc9b3ac48993e1fee322d3bc94b49a6e22","modified":1461593552822},{"_id":"public/vendors/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1461593552822},{"_id":"public/vendors/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1461593552822},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1461593552822},{"_id":"public/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"2b3c8ba7008cc014d8fb37abc6f9f49aeda83824","modified":1461947596645},{"_id":"source/uploads/slg.jpg","hash":"e6343b553fb0f2481a5d1a066c5170a7b040738d","modified":1461593989677},{"_id":"public/uploads/slg.jpg","hash":"e6343b553fb0f2481a5d1a066c5170a7b040738d","modified":1461594206358},{"_id":"source/_posts/20160430_sun_DellArea51.md","hash":"3fe84619e994cb136f45c07c46951447d306f5b4","modified":1462186029181},{"_id":"public/2016/04/30/20160430_sun_DellArea51/index.html","hash":"4156f7ff49dd25754723ef82f781891219a364e0","modified":1462186197843},{"_id":"source/_posts/20160418_sun_CmdMarkdownExample.md","hash":"bc3154b6f294211fffecdee7bb7587d0b839fb9e","modified":1462186109100},{"_id":"source/_posts/20160501_sun_BuildAssimpSrcCode.md","hash":"354b206779faa556a5655084cb6d57e3d75405f4","modified":1462186046743},{"_id":"public/archives/2016/05/index.html","hash":"3e3ccedc03446dc9003b2e96962ccafde5ace5fc","modified":1462186197845},{"_id":"public/tags/CG/index.html","hash":"ed8fce2e6a32476a3ed5dd8de39120759de588c3","modified":1462185771404},{"_id":"public/2016/05/01/20160501_sun_BuildAssimpSrcCode/index.html","hash":"abacf91f81ee4f847786dcef66b2a6aa24562ef7","modified":1462186197845},{"_id":"public/2016/04/18/20160418_sun_CmdMarkdownExample/index.html","hash":"7d50bac50ea50f8418b333e81864a881d2fa851f","modified":1462186197845},{"_id":"source/_posts/20160501_sun_GoldenWeekBooks.md","hash":"65c9637f40406a24e9eeecc18562e9460ff82562","modified":1462186190508},{"_id":"public/2016/05/01/20160501_sun_GoldenWeekBooks/index.html","hash":"6da743253ac0b79dcb152ca9f51df21a4095ab54","modified":1462186197845},{"_id":"public/tags/django/index.html","hash":"bb4af35e3df5f10cc6588b3670b8349254cd5233","modified":1462185771404},{"_id":"public/categories/工具/index.html","hash":"eee2f26a6317970d408710bbabc3e662f3c525f0","modified":1462186197843},{"_id":"public/categories/web/index.html","hash":"874cd7690142d7f175f4e9f1c888db178fb02ae0","modified":1462185771408},{"_id":"public/tags/Vim/index.html","hash":"16ee44a12861e4b228f49d6a2002efb60c286305","modified":1462186197843},{"_id":"public/categories/Web/index.html","hash":"559b07af5220b8e6381963f18016fa5071609fa0","modified":1462186197843},{"_id":"public/tags/Win/index.html","hash":"c4d396df09f0999aff3393f80d5b49da7b0d9773","modified":1462186197846},{"_id":"public/tags/Markdown/index.html","hash":"abe95dbe0299c2aa3b6b78ae64b90cde41425231","modified":1462186197846},{"_id":"public/tags/Hexo/index.html","hash":"73af523b0007e3edc09fb501f16084b1c44ce1b8","modified":1462186197846},{"_id":"public/tags/TPS/index.html","hash":"9c81206249db47327a5c5038114897d1e4006979","modified":1462186197846},{"_id":"public/tags/GPU/index.html","hash":"7757b4cb1859a118f2bbccc4cf4e514ca8fe3dfe","modified":1462186197846},{"_id":"public/tags/Assimp/index.html","hash":"dee4f00eb423779e93f5a9a00873194b61d8d8d8","modified":1462186197846},{"_id":"public/categories/数学/index.html","hash":"22183a3da4be099d3779e29344ef99ee7d05261b","modified":1462186197846},{"_id":"public/categories/CG/index.html","hash":"98339c8a72bd15d3237fc2c65cf96ff2b9096b7b","modified":1462186197846},{"_id":"public/categories/读书/index.html","hash":"9001201388c9675c491bbafe13b7bf60a6fcda5b","modified":1462186197847}],"Category":[{"name":"工具","_id":"cinpvnkhh0001gggo3c2pb3iw"},{"name":"web","_id":"cinpvnki10007gggok1vsx3mh"},{"name":"Web","_id":"cinpvwpyw0002x8gou7276io1"},{"name":"数学","_id":"cinpvwpz10005x8go2cv0llj1"},{"name":"CG","_id":"cinpvwpz30009x8gocmsbz933"},{"name":"读书","_id":"cinpvwpzg000lx8goq00gu4c1"}],"Data":[],"Page":[{"title":"分类","date":"2016-04-25T13:49:56.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ndate: 2016-04-25 23:49:56\ntype: \"categories\"\ncomments: false\n---\n","updated":"2016-04-25T13:51:03.963Z","path":"categories/index.html","layout":"page","_id":"cing328z8000dbwfgp8q2cexr","content":"","excerpt":"","more":""},{"title":"标签","date":"2016-04-25T14:10:28.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: 标签 \ndate: 2016-04-26 00:10:28\ntype: \"tags\"\ncomments: false\n---\n","updated":"2016-04-25T14:11:46.554Z","path":"tags/index.html","layout":"page","_id":"cing328zg000fbwfgtlh3pf5k","content":"","excerpt":"","more":""}],"Post":[{"title":"Vim配置-源码编译篇","date":"2016-04-17T13:12:42.000Z","_content":"\n# 详细记录了源码编译Vim的过程。\n\n------\n\n# 安装python\n\n果然如果需要python支持，下面的几个源码编译时，python的版本必须统一。\n\n------\n\n# Install gmp package\n\n用cygwin自带的setup-x86.exe安装gmp相关的包。vim源码编译的时候要用这个。\n\n------\n\n# 编译ncurses源码\n\nhttp://ftp.gnu.org/gnu/ncurses/ncurses-5.9.tar.gz\nopen a cygwin terminal,\ncd to directory containing downloaded file\n```shell\n$ tar zxf ncurses-5.9.tar.gz\n$ cd ncurses-5.9\n$ ./configure --prefix=/usr\n$ make && make install\n```\n\n------\n\n# 编译lua源码\n\nhttp://www.lua.org/ftp/lua-5.3.1.tar.gz\n```shell\n$ tar zxf lua-5.3.1.tar.gz\n$ cd lua-5.3.1\n$ make mingw\n$ make install\n```\n\n------\n\n# 编译vim源码\n\nftp://ftp.vim.org/pub/vim/unix/vim-7.4.tar.bz2\n```shell\n$ ./configure --with-features=huge \\\n              --enable-pythoninterp \\\n              --enable-perlinterp \\\n              --enable-rubyinterp \\\n              --enable-luainterp \\\n              --with-lua-prefix=/usr/local \\\n              --enable-gui=no \\\n              --without-x \\\n              --enable-multibyte \\\n              --prefix=/usr\n$ make && make install\n```\n注意这里python和python3只能选一个，两个都选不行。\n但是有解决方案，懒得折腾了。\n\n------\n\n# 查看是否有+lua\n\n打开vim，输入:version, 查看vim编译时间，如果是本次编译生成，则说明正确，然后查看是否有+lua。\n\n------\n\n# 可能出现的问题\n\n## not found lua.h\n在./configure命令后加上 | grep lua grep出来的不满足的项目一个一个全部修正。\n最容易出错的就是\n\n     --with-lua-prefix=/usr/local\n\n## vim源码的bug\n编译时，出现下述error:\n```shell\nobjects/if_lua.o: In function 'luaV_list_insert':\n/home/spch2008/vim74/src/if_lua.c:777: undefined reference to 'luaL_optlong' collect2: error: ld returned 1 exit status\n```\n修改src/if_lua.c:777\n```c\n...\n//long pos = luaL_optlong(L, 3, 0); // 修正前\nlong pos = (long)luaL_optinteger(L, 3, 0); // 修正后\n...\n```\n\n编译时，还可能出现下述error:\n```shell\nif_python3.c:66:20: fatal error: Python.h: No such file or directory\n #include <Python.h>\n```\n修改src/if_python.c:66\n```c\n...\n//#include \"Python.h\" // 修正前\n#include \"E:\\cygwin\\usr\\include\\python2.7\\Python.h\" // 修正后\n...\n```\n修改之后注意可能需要dos2unix一下，视编辑器而定。\n\n---\n\n# Todo\n- [x] 编译安装篇\n- [ ] 主题美化篇\n- [ ] 自动补全篇\n- [ ] 键位配置篇\n- [ ] 编译调试篇\n","source":"_posts/20160417_sun_VimComplie.md","raw":"---\ntitle: Vim配置-源码编译篇\ndate: 2016-04-17 23:12:42\ntags: Vim\ncategories: 工具\n---\n\n# 详细记录了源码编译Vim的过程。\n\n------\n\n# 安装python\n\n果然如果需要python支持，下面的几个源码编译时，python的版本必须统一。\n\n------\n\n# Install gmp package\n\n用cygwin自带的setup-x86.exe安装gmp相关的包。vim源码编译的时候要用这个。\n\n------\n\n# 编译ncurses源码\n\nhttp://ftp.gnu.org/gnu/ncurses/ncurses-5.9.tar.gz\nopen a cygwin terminal,\ncd to directory containing downloaded file\n```shell\n$ tar zxf ncurses-5.9.tar.gz\n$ cd ncurses-5.9\n$ ./configure --prefix=/usr\n$ make && make install\n```\n\n------\n\n# 编译lua源码\n\nhttp://www.lua.org/ftp/lua-5.3.1.tar.gz\n```shell\n$ tar zxf lua-5.3.1.tar.gz\n$ cd lua-5.3.1\n$ make mingw\n$ make install\n```\n\n------\n\n# 编译vim源码\n\nftp://ftp.vim.org/pub/vim/unix/vim-7.4.tar.bz2\n```shell\n$ ./configure --with-features=huge \\\n              --enable-pythoninterp \\\n              --enable-perlinterp \\\n              --enable-rubyinterp \\\n              --enable-luainterp \\\n              --with-lua-prefix=/usr/local \\\n              --enable-gui=no \\\n              --without-x \\\n              --enable-multibyte \\\n              --prefix=/usr\n$ make && make install\n```\n注意这里python和python3只能选一个，两个都选不行。\n但是有解决方案，懒得折腾了。\n\n------\n\n# 查看是否有+lua\n\n打开vim，输入:version, 查看vim编译时间，如果是本次编译生成，则说明正确，然后查看是否有+lua。\n\n------\n\n# 可能出现的问题\n\n## not found lua.h\n在./configure命令后加上 | grep lua grep出来的不满足的项目一个一个全部修正。\n最容易出错的就是\n\n     --with-lua-prefix=/usr/local\n\n## vim源码的bug\n编译时，出现下述error:\n```shell\nobjects/if_lua.o: In function 'luaV_list_insert':\n/home/spch2008/vim74/src/if_lua.c:777: undefined reference to 'luaL_optlong' collect2: error: ld returned 1 exit status\n```\n修改src/if_lua.c:777\n```c\n...\n//long pos = luaL_optlong(L, 3, 0); // 修正前\nlong pos = (long)luaL_optinteger(L, 3, 0); // 修正后\n...\n```\n\n编译时，还可能出现下述error:\n```shell\nif_python3.c:66:20: fatal error: Python.h: No such file or directory\n #include <Python.h>\n```\n修改src/if_python.c:66\n```c\n...\n//#include \"Python.h\" // 修正前\n#include \"E:\\cygwin\\usr\\include\\python2.7\\Python.h\" // 修正后\n...\n```\n修改之后注意可能需要dos2unix一下，视编辑器而定。\n\n---\n\n# Todo\n- [x] 编译安装篇\n- [ ] 主题美化篇\n- [ ] 自动补全篇\n- [ ] 键位配置篇\n- [ ] 编译调试篇\n","slug":"20160417_sun_VimComplie","published":1,"updated":"2016-05-02T09:19:16.811Z","_id":"cing328sr0001bwfgy9zvenki","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"详细记录了源码编译Vim的过程。\"><a href=\"#详细记录了源码编译Vim的过程。\" class=\"headerlink\" title=\"详细记录了源码编译Vim的过程。\"></a>详细记录了源码编译Vim的过程。</h1><hr>\n<h1 id=\"安装python\"><a href=\"#安装python\" class=\"headerlink\" title=\"安装python\"></a>安装python</h1><p>果然如果需要python支持，下面的几个源码编译时，python的版本必须统一。</p>\n<hr>\n<h1 id=\"Install-gmp-package\"><a href=\"#Install-gmp-package\" class=\"headerlink\" title=\"Install gmp package\"></a>Install gmp package</h1><p>用cygwin自带的setup-x86.exe安装gmp相关的包。vim源码编译的时候要用这个。</p>\n<hr>\n<h1 id=\"编译ncurses源码\"><a href=\"#编译ncurses源码\" class=\"headerlink\" title=\"编译ncurses源码\"></a>编译ncurses源码</h1><p><a href=\"http://ftp.gnu.org/gnu/ncurses/ncurses-5.9.tar.gz\" target=\"_blank\" rel=\"external\">http://ftp.gnu.org/gnu/ncurses/ncurses-5.9.tar.gz</a><br>open a cygwin terminal,<br>cd to directory containing downloaded file<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tar zxf ncurses-5.9.tar.gz</span><br><span class=\"line\">$ cd ncurses-5.9</span><br><span class=\"line\">$ ./configure --prefix=/usr</span><br><span class=\"line\">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"编译lua源码\"><a href=\"#编译lua源码\" class=\"headerlink\" title=\"编译lua源码\"></a>编译lua源码</h1><p><a href=\"http://www.lua.org/ftp/lua-5.3.1.tar.gz\" target=\"_blank\" rel=\"external\">http://www.lua.org/ftp/lua-5.3.1.tar.gz</a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tar zxf lua-5.3.1.tar.gz</span><br><span class=\"line\">$ cd lua-5.3.1</span><br><span class=\"line\">$ make mingw</span><br><span class=\"line\">$ make install</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"编译vim源码\"><a href=\"#编译vim源码\" class=\"headerlink\" title=\"编译vim源码\"></a>编译vim源码</h1><p>ftp://ftp.vim.org/pub/vim/unix/vim-7.4.tar.bz2<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ./configure --with-features=huge \\</span><br><span class=\"line\">              --enable-pythoninterp \\</span><br><span class=\"line\">              --enable-perlinterp \\</span><br><span class=\"line\">              --enable-rubyinterp \\</span><br><span class=\"line\">              --enable-luainterp \\</span><br><span class=\"line\">              --with-lua-prefix=/usr/local \\</span><br><span class=\"line\">              --enable-gui=no \\</span><br><span class=\"line\">              --without-x \\</span><br><span class=\"line\">              --enable-multibyte \\</span><br><span class=\"line\">              --prefix=/usr</span><br><span class=\"line\">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p>注意这里python和python3只能选一个，两个都选不行。<br>但是有解决方案，懒得折腾了。</p>\n<hr>\n<h1 id=\"查看是否有-lua\"><a href=\"#查看是否有-lua\" class=\"headerlink\" title=\"查看是否有+lua\"></a>查看是否有+lua</h1><p>打开vim，输入:version, 查看vim编译时间，如果是本次编译生成，则说明正确，然后查看是否有+lua。</p>\n<hr>\n<h1 id=\"可能出现的问题\"><a href=\"#可能出现的问题\" class=\"headerlink\" title=\"可能出现的问题\"></a>可能出现的问题</h1><h2 id=\"not-found-lua-h\"><a href=\"#not-found-lua-h\" class=\"headerlink\" title=\"not found lua.h\"></a>not found lua.h</h2><p>在./configure命令后加上 | grep lua grep出来的不满足的项目一个一个全部修正。<br>最容易出错的就是</p>\n<pre><code>--with-lua-prefix=/usr/local\n</code></pre><h2 id=\"vim源码的bug\"><a href=\"#vim源码的bug\" class=\"headerlink\" title=\"vim源码的bug\"></a>vim源码的bug</h2><p>编译时，出现下述error:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">objects/if_lua.o: In function &apos;luaV_list_insert&apos;:</span><br><span class=\"line\">/home/spch2008/vim74/src/if_lua.c:777: undefined reference to &apos;luaL_optlong&apos; collect2: error: ld returned 1 exit status</span><br></pre></td></tr></table></figure></p>\n<p>修改src/if_lua.c:777<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">//long pos = luaL_optlong(L, 3, 0); // 修正前</span></span><br><span class=\"line\"><span class=\"keyword\">long</span> pos = (long)luaL_optinteger(L, <span class=\"number\">3</span>, <span class=\"number\">0</span>); <span class=\"comment\">// 修正后</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p>编译时，还可能出现下述error:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if_python3.c:66:20: fatal error: Python.h: No such file or directory</span><br><span class=\"line\"> #include &lt;Python.h&gt;</span><br></pre></td></tr></table></figure></p>\n<p>修改src/if_python.c:66<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">//#include \"Python.h\" // 修正前</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"string\">\"E:\\cygwin\\usr\\include\\python2.7\\Python.h\"</span> // 修正后</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p>修改之后注意可能需要dos2unix一下，视编辑器而定。</p>\n<hr>\n<h1 id=\"Todo\"><a href=\"#Todo\" class=\"headerlink\" title=\"Todo\"></a>Todo</h1><ul>\n<li>[x] 编译安装篇</li>\n<li>[ ] 主题美化篇</li>\n<li>[ ] 自动补全篇</li>\n<li>[ ] 键位配置篇</li>\n<li>[ ] 编译调试篇</li>\n</ul>\n","excerpt":"","more":"<h1 id=\"详细记录了源码编译Vim的过程。\"><a href=\"#详细记录了源码编译Vim的过程。\" class=\"headerlink\" title=\"详细记录了源码编译Vim的过程。\"></a>详细记录了源码编译Vim的过程。</h1><hr>\n<h1 id=\"安装python\"><a href=\"#安装python\" class=\"headerlink\" title=\"安装python\"></a>安装python</h1><p>果然如果需要python支持，下面的几个源码编译时，python的版本必须统一。</p>\n<hr>\n<h1 id=\"Install-gmp-package\"><a href=\"#Install-gmp-package\" class=\"headerlink\" title=\"Install gmp package\"></a>Install gmp package</h1><p>用cygwin自带的setup-x86.exe安装gmp相关的包。vim源码编译的时候要用这个。</p>\n<hr>\n<h1 id=\"编译ncurses源码\"><a href=\"#编译ncurses源码\" class=\"headerlink\" title=\"编译ncurses源码\"></a>编译ncurses源码</h1><p><a href=\"http://ftp.gnu.org/gnu/ncurses/ncurses-5.9.tar.gz\">http://ftp.gnu.org/gnu/ncurses/ncurses-5.9.tar.gz</a><br>open a cygwin terminal,<br>cd to directory containing downloaded file<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tar zxf ncurses-5.9.tar.gz</span><br><span class=\"line\">$ cd ncurses-5.9</span><br><span class=\"line\">$ ./configure --prefix=/usr</span><br><span class=\"line\">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"编译lua源码\"><a href=\"#编译lua源码\" class=\"headerlink\" title=\"编译lua源码\"></a>编译lua源码</h1><p><a href=\"http://www.lua.org/ftp/lua-5.3.1.tar.gz\">http://www.lua.org/ftp/lua-5.3.1.tar.gz</a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ tar zxf lua-5.3.1.tar.gz</span><br><span class=\"line\">$ cd lua-5.3.1</span><br><span class=\"line\">$ make mingw</span><br><span class=\"line\">$ make install</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"编译vim源码\"><a href=\"#编译vim源码\" class=\"headerlink\" title=\"编译vim源码\"></a>编译vim源码</h1><p>ftp://ftp.vim.org/pub/vim/unix/vim-7.4.tar.bz2<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ./configure --with-features=huge \\</span><br><span class=\"line\">              --enable-pythoninterp \\</span><br><span class=\"line\">              --enable-perlinterp \\</span><br><span class=\"line\">              --enable-rubyinterp \\</span><br><span class=\"line\">              --enable-luainterp \\</span><br><span class=\"line\">              --with-lua-prefix=/usr/local \\</span><br><span class=\"line\">              --enable-gui=no \\</span><br><span class=\"line\">              --without-x \\</span><br><span class=\"line\">              --enable-multibyte \\</span><br><span class=\"line\">              --prefix=/usr</span><br><span class=\"line\">$ make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>\n<p>注意这里python和python3只能选一个，两个都选不行。<br>但是有解决方案，懒得折腾了。</p>\n<hr>\n<h1 id=\"查看是否有-lua\"><a href=\"#查看是否有-lua\" class=\"headerlink\" title=\"查看是否有+lua\"></a>查看是否有+lua</h1><p>打开vim，输入:version, 查看vim编译时间，如果是本次编译生成，则说明正确，然后查看是否有+lua。</p>\n<hr>\n<h1 id=\"可能出现的问题\"><a href=\"#可能出现的问题\" class=\"headerlink\" title=\"可能出现的问题\"></a>可能出现的问题</h1><h2 id=\"not-found-lua-h\"><a href=\"#not-found-lua-h\" class=\"headerlink\" title=\"not found lua.h\"></a>not found lua.h</h2><p>在./configure命令后加上 | grep lua grep出来的不满足的项目一个一个全部修正。<br>最容易出错的就是</p>\n<pre><code>--with-lua-prefix=/usr/local\n</code></pre><h2 id=\"vim源码的bug\"><a href=\"#vim源码的bug\" class=\"headerlink\" title=\"vim源码的bug\"></a>vim源码的bug</h2><p>编译时，出现下述error:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">objects/if_lua.o: In function &apos;luaV_list_insert&apos;:</span><br><span class=\"line\">/home/spch2008/vim74/src/if_lua.c:777: undefined reference to &apos;luaL_optlong&apos; collect2: error: ld returned 1 exit status</span><br></pre></td></tr></table></figure></p>\n<p>修改src/if_lua.c:777<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">//long pos = luaL_optlong(L, 3, 0); // 修正前</span></span><br><span class=\"line\"><span class=\"keyword\">long</span> pos = (long)luaL_optinteger(L, <span class=\"number\">3</span>, <span class=\"number\">0</span>); <span class=\"comment\">// 修正后</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p>编译时，还可能出现下述error:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if_python3.c:66:20: fatal error: Python.h: No such file or directory</span><br><span class=\"line\"> #include &lt;Python.h&gt;</span><br></pre></td></tr></table></figure></p>\n<p>修改src/if_python.c:66<br><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">//#include \"Python.h\" // 修正前</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"string\">\"E:\\cygwin\\usr\\include\\python2.7\\Python.h\"</span> // 修正后</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n<p>修改之后注意可能需要dos2unix一下，视编辑器而定。</p>\n<hr>\n<h1 id=\"Todo\"><a href=\"#Todo\" class=\"headerlink\" title=\"Todo\"></a>Todo</h1><ul>\n<li>[x] 编译安装篇</li>\n<li>[ ] 主题美化篇</li>\n<li>[ ] 自动补全篇</li>\n<li>[ ] 键位配置篇</li>\n<li>[ ] 编译调试篇</li>\n</ul>\n"},{"title":"Win7开发环境配置","date":"2016-04-17T05:50:42.000Z","_content":"\n# 记录Win7开发的一些设置，但已过时，好多不会再用了。\n\n------\n\n# Cygwin, tmux配置\n\n## 安装，美化cygwin\n- install cygwin 2.871\n  - just using default setting to install.\n- install yahei consolas hybrid\n  - https://uigroupcode.googlecode.com/files/YaHei.Consolas.1.12.zip\n- set font and xterm-256color for cygwin\n  - Right click on mintty, and just do it as the menu shown.\n- add tomorrow-color-scheme fot mintty\n  - add fellowing content into .minttyrc under home.\n\n```shell\n    BoldAsFont=no\n    Font=YaHei Consolas Hybrid\n    FontHeight=12\n    FontSmoothing=full\n    Locale=C\n    Charset=UTF-8\n    Columns=68\n    Rows=28\n    Term=xterm-256color\n    ForegroundColour=197,200,198\n    BackgroundColour=29,31,33\n    CursorColour=253,157,79\n    Black=29,31,33\n    BoldBlack=150,152,150\n    Red=204,102,102\n    BoldRed=173,57,57\n    Green=181,189,104\n    BoldGreen=142,150,66\n    Yellow=240,198,116\n    BoldYellow=234,171,47\n    Blue=129,162,190\n    BoldBlue=82,125,159\n    Magenta=178,148,187\n    BoldMagenta=145,100,157\n    Cyan=138,190,183\n    BoldCyan=90,162,152\n    White=197,200,198\n    BoldWhite=255,255,255\n    Scrollbar=none\n    CursorType=underscore\n```\n\n## 在cygwin中安装最新的vim,tmux\n\n## 设置tmux\n```shell\n    set -g status-bg black\n    set -g status-fg white\n    set -sg escape-time 1\n    set -g base-index 1\n    setw -g pane-base-index 1\n\n    bind | split-window -h\n    bind - split-window -v\n\n    bind h select-pane -L\n    bind j select-pane -D\n    bind k select-pane -U\n    bind l select-pane -R\n\n    setw -g mode-mouse off\n    set -g status-utf8 on\n\n    set -g status-interval 60\n\n    # 对齐方式\n    set-option -g status-justify centre\n\n    # 左下角\n    set-option -g status-left '#[bg=black,fg=green][#[fg=cyan]#S#[fg=green]]'\n    set-option -g status-left-length 20\n\n    # 窗口列表\n    setw -g automatic-rename on\n    set-window-option -g window-status-format '#[dim]#I:#[default]#W#[fg=grey,dim]'\n    set-window-option -g window-status-current-format '#[fg=cyan,bold]#I#[fg=blue]:#[fg=cyan]#W#[fg=dim]'\n\n    # 右下角\n    set -g status-right '#[fg=green][#[fg=cyan]%d %b %R#[fg=green]]'\n```\n\n## 如果can't create socket: Permission denied\n解決法：\ntmuxは(/tmp/tmux-[uid]/default)を生成するがなぜか書き込めない。権限を777にしてもだめしょうがないからソケットを指定してあげたらいけた\n```shell\n    tmux -S /tmp/tmux-[uid]/default\n```\n为了方便可以在.bashrc中加入alias\n```shell\n    alias tmux='tmux -S /tmp/tmux-197608/default'\n```\n\n------\n\n# Python开发环境\n\n## 安装Python3和最新pip\npython3直接装官网最新的就行。\nTo install pip, securely download get-pip.py.\nhttps://bootstrap.pypa.io/get-pip.py\nThen run the following (which may require administrator access):\n```shell\n    $ python get-pip.py\n```\n最后安装几个pakages，作为测试\n```shell\n    $ pip install pep8, pyflakes, pylint, ipython\n```\n\n------\n\n# Qt(with mingw)\n\n## 安装Qt and MingW\n  套件选择mingw4.9.2\n  tools也选mingw4.9.2\n\n## 美化Qt\n  cd 到Qt安装目录\n```shell\n  git clone https://github.com/mervick/Qt-Creator-Darcula.git\n  cd Qt-Creator-Darcula\n  cp darcula.xml ../Tools/QtCreator/share/qtcreator/styles/\n```\n\n## 添加Path\n为了后面的bulid opencv，要把\n```shell\nQt/5.5/mingw492_32/\nQt/Tools/QtCreator/\nQt/Tools/mingw492_32/\n```\n里面的bin和lib都添加到path中吧。\n\n------\n\n# CMake(GUI)\n\n  目前最新是3.2.3\n\n------\n\n# OpenCV\n\n## 编译OpenCV 2.4.11\n  版本选linux源码版。\n  运行cmake的GUI版，\n  input: 解压后的opencv源码包。\n  output: /usr/include/opencv2411\n  使用qt中的mingw去编译。\n  选择native compiler。\n  c++的选g++，c的选gcc。\n  search QT, 把with_Qt选上。\n  config的之前要把/bin/sh.exe改个名字，\n  要不然会有sh不能在path中存在的错误。\n  然后generate。\n  最后，cygwin中cd去/usr/include/opencv2411\n  执行mingw32-make.exe\n  执行mingw32-make.exe install\n","source":"_posts/20160417_sun_WinDevEnv.md","raw":"---\ntitle: Win7开发环境配置\ndate: 2016-04-17 15:50:42\ntags: Win\ncategories: 工具\n---\n\n# 记录Win7开发的一些设置，但已过时，好多不会再用了。\n\n------\n\n# Cygwin, tmux配置\n\n## 安装，美化cygwin\n- install cygwin 2.871\n  - just using default setting to install.\n- install yahei consolas hybrid\n  - https://uigroupcode.googlecode.com/files/YaHei.Consolas.1.12.zip\n- set font and xterm-256color for cygwin\n  - Right click on mintty, and just do it as the menu shown.\n- add tomorrow-color-scheme fot mintty\n  - add fellowing content into .minttyrc under home.\n\n```shell\n    BoldAsFont=no\n    Font=YaHei Consolas Hybrid\n    FontHeight=12\n    FontSmoothing=full\n    Locale=C\n    Charset=UTF-8\n    Columns=68\n    Rows=28\n    Term=xterm-256color\n    ForegroundColour=197,200,198\n    BackgroundColour=29,31,33\n    CursorColour=253,157,79\n    Black=29,31,33\n    BoldBlack=150,152,150\n    Red=204,102,102\n    BoldRed=173,57,57\n    Green=181,189,104\n    BoldGreen=142,150,66\n    Yellow=240,198,116\n    BoldYellow=234,171,47\n    Blue=129,162,190\n    BoldBlue=82,125,159\n    Magenta=178,148,187\n    BoldMagenta=145,100,157\n    Cyan=138,190,183\n    BoldCyan=90,162,152\n    White=197,200,198\n    BoldWhite=255,255,255\n    Scrollbar=none\n    CursorType=underscore\n```\n\n## 在cygwin中安装最新的vim,tmux\n\n## 设置tmux\n```shell\n    set -g status-bg black\n    set -g status-fg white\n    set -sg escape-time 1\n    set -g base-index 1\n    setw -g pane-base-index 1\n\n    bind | split-window -h\n    bind - split-window -v\n\n    bind h select-pane -L\n    bind j select-pane -D\n    bind k select-pane -U\n    bind l select-pane -R\n\n    setw -g mode-mouse off\n    set -g status-utf8 on\n\n    set -g status-interval 60\n\n    # 对齐方式\n    set-option -g status-justify centre\n\n    # 左下角\n    set-option -g status-left '#[bg=black,fg=green][#[fg=cyan]#S#[fg=green]]'\n    set-option -g status-left-length 20\n\n    # 窗口列表\n    setw -g automatic-rename on\n    set-window-option -g window-status-format '#[dim]#I:#[default]#W#[fg=grey,dim]'\n    set-window-option -g window-status-current-format '#[fg=cyan,bold]#I#[fg=blue]:#[fg=cyan]#W#[fg=dim]'\n\n    # 右下角\n    set -g status-right '#[fg=green][#[fg=cyan]%d %b %R#[fg=green]]'\n```\n\n## 如果can't create socket: Permission denied\n解決法：\ntmuxは(/tmp/tmux-[uid]/default)を生成するがなぜか書き込めない。権限を777にしてもだめしょうがないからソケットを指定してあげたらいけた\n```shell\n    tmux -S /tmp/tmux-[uid]/default\n```\n为了方便可以在.bashrc中加入alias\n```shell\n    alias tmux='tmux -S /tmp/tmux-197608/default'\n```\n\n------\n\n# Python开发环境\n\n## 安装Python3和最新pip\npython3直接装官网最新的就行。\nTo install pip, securely download get-pip.py.\nhttps://bootstrap.pypa.io/get-pip.py\nThen run the following (which may require administrator access):\n```shell\n    $ python get-pip.py\n```\n最后安装几个pakages，作为测试\n```shell\n    $ pip install pep8, pyflakes, pylint, ipython\n```\n\n------\n\n# Qt(with mingw)\n\n## 安装Qt and MingW\n  套件选择mingw4.9.2\n  tools也选mingw4.9.2\n\n## 美化Qt\n  cd 到Qt安装目录\n```shell\n  git clone https://github.com/mervick/Qt-Creator-Darcula.git\n  cd Qt-Creator-Darcula\n  cp darcula.xml ../Tools/QtCreator/share/qtcreator/styles/\n```\n\n## 添加Path\n为了后面的bulid opencv，要把\n```shell\nQt/5.5/mingw492_32/\nQt/Tools/QtCreator/\nQt/Tools/mingw492_32/\n```\n里面的bin和lib都添加到path中吧。\n\n------\n\n# CMake(GUI)\n\n  目前最新是3.2.3\n\n------\n\n# OpenCV\n\n## 编译OpenCV 2.4.11\n  版本选linux源码版。\n  运行cmake的GUI版，\n  input: 解压后的opencv源码包。\n  output: /usr/include/opencv2411\n  使用qt中的mingw去编译。\n  选择native compiler。\n  c++的选g++，c的选gcc。\n  search QT, 把with_Qt选上。\n  config的之前要把/bin/sh.exe改个名字，\n  要不然会有sh不能在path中存在的错误。\n  然后generate。\n  最后，cygwin中cd去/usr/include/opencv2411\n  执行mingw32-make.exe\n  执行mingw32-make.exe install\n","slug":"20160417_sun_WinDevEnv","published":1,"updated":"2016-05-02T10:44:58.341Z","_id":"cing328sz0003bwfgusshhrw4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"记录Win7开发的一些设置，但已过时，好多不会再用了。\"><a href=\"#记录Win7开发的一些设置，但已过时，好多不会再用了。\" class=\"headerlink\" title=\"记录Win7开发的一些设置，但已过时，好多不会再用了。\"></a>记录Win7开发的一些设置，但已过时，好多不会再用了。</h1><hr>\n<h1 id=\"Cygwin-tmux配置\"><a href=\"#Cygwin-tmux配置\" class=\"headerlink\" title=\"Cygwin, tmux配置\"></a>Cygwin, tmux配置</h1><h2 id=\"安装，美化cygwin\"><a href=\"#安装，美化cygwin\" class=\"headerlink\" title=\"安装，美化cygwin\"></a>安装，美化cygwin</h2><ul>\n<li>install cygwin 2.871<ul>\n<li>just using default setting to install.</li>\n</ul>\n</li>\n<li>install yahei consolas hybrid<ul>\n<li><a href=\"https://uigroupcode.googlecode.com/files/YaHei.Consolas.1.12.zip\" target=\"_blank\" rel=\"external\">https://uigroupcode.googlecode.com/files/YaHei.Consolas.1.12.zip</a></li>\n</ul>\n</li>\n<li>set font and xterm-256color for cygwin<ul>\n<li>Right click on mintty, and just do it as the menu shown.</li>\n</ul>\n</li>\n<li>add tomorrow-color-scheme fot mintty<ul>\n<li>add fellowing content into .minttyrc under home.</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BoldAsFont=no</span><br><span class=\"line\">Font=YaHei Consolas Hybrid</span><br><span class=\"line\">FontHeight=12</span><br><span class=\"line\">FontSmoothing=full</span><br><span class=\"line\">Locale=C</span><br><span class=\"line\">Charset=UTF-8</span><br><span class=\"line\">Columns=68</span><br><span class=\"line\">Rows=28</span><br><span class=\"line\">Term=xterm-256color</span><br><span class=\"line\">ForegroundColour=197,200,198</span><br><span class=\"line\">BackgroundColour=29,31,33</span><br><span class=\"line\">CursorColour=253,157,79</span><br><span class=\"line\">Black=29,31,33</span><br><span class=\"line\">BoldBlack=150,152,150</span><br><span class=\"line\">Red=204,102,102</span><br><span class=\"line\">BoldRed=173,57,57</span><br><span class=\"line\">Green=181,189,104</span><br><span class=\"line\">BoldGreen=142,150,66</span><br><span class=\"line\">Yellow=240,198,116</span><br><span class=\"line\">BoldYellow=234,171,47</span><br><span class=\"line\">Blue=129,162,190</span><br><span class=\"line\">BoldBlue=82,125,159</span><br><span class=\"line\">Magenta=178,148,187</span><br><span class=\"line\">BoldMagenta=145,100,157</span><br><span class=\"line\">Cyan=138,190,183</span><br><span class=\"line\">BoldCyan=90,162,152</span><br><span class=\"line\">White=197,200,198</span><br><span class=\"line\">BoldWhite=255,255,255</span><br><span class=\"line\">Scrollbar=none</span><br><span class=\"line\">CursorType=underscore</span><br></pre></td></tr></table></figure>\n<h2 id=\"在cygwin中安装最新的vim-tmux\"><a href=\"#在cygwin中安装最新的vim-tmux\" class=\"headerlink\" title=\"在cygwin中安装最新的vim,tmux\"></a>在cygwin中安装最新的vim,tmux</h2><h2 id=\"设置tmux\"><a href=\"#设置tmux\" class=\"headerlink\" title=\"设置tmux\"></a>设置tmux</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set -g status-bg black</span><br><span class=\"line\">set -g status-fg white</span><br><span class=\"line\">set -sg escape-time 1</span><br><span class=\"line\">set -g base-index 1</span><br><span class=\"line\">setw -g pane-base-index 1</span><br><span class=\"line\"></span><br><span class=\"line\">bind | split-window -h</span><br><span class=\"line\">bind - split-window -v</span><br><span class=\"line\"></span><br><span class=\"line\">bind h select-pane -L</span><br><span class=\"line\">bind j select-pane -D</span><br><span class=\"line\">bind k select-pane -U</span><br><span class=\"line\">bind l select-pane -R</span><br><span class=\"line\"></span><br><span class=\"line\">setw -g mode-mouse off</span><br><span class=\"line\">set -g status-utf8 on</span><br><span class=\"line\"></span><br><span class=\"line\">set -g status-interval 60</span><br><span class=\"line\"></span><br><span class=\"line\"># 对齐方式</span><br><span class=\"line\">set-option -g status-justify centre</span><br><span class=\"line\"></span><br><span class=\"line\"># 左下角</span><br><span class=\"line\">set-option -g status-left &apos;#[bg=black,fg=green][#[fg=cyan]#S#[fg=green]]&apos;</span><br><span class=\"line\">set-option -g status-left-length 20</span><br><span class=\"line\"></span><br><span class=\"line\"># 窗口列表</span><br><span class=\"line\">setw -g automatic-rename on</span><br><span class=\"line\">set-window-option -g window-status-format &apos;#[dim]#I:#[default]#W#[fg=grey,dim]&apos;</span><br><span class=\"line\">set-window-option -g window-status-current-format &apos;#[fg=cyan,bold]#I#[fg=blue]:#[fg=cyan]#W#[fg=dim]&apos;</span><br><span class=\"line\"></span><br><span class=\"line\"># 右下角</span><br><span class=\"line\">set -g status-right &apos;#[fg=green][#[fg=cyan]%d %b %R#[fg=green]]&apos;</span><br></pre></td></tr></table></figure>\n<h2 id=\"如果can’t-create-socket-Permission-denied\"><a href=\"#如果can’t-create-socket-Permission-denied\" class=\"headerlink\" title=\"如果can’t create socket: Permission denied\"></a>如果can’t create socket: Permission denied</h2><p>解決法：<br>tmuxは(/tmp/tmux-[uid]/default)を生成するがなぜか書き込めない。権限を777にしてもだめしょうがないからソケットを指定してあげたらいけた<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmux -S /tmp/tmux-[uid]/default</span><br></pre></td></tr></table></figure></p>\n<p>为了方便可以在.bashrc中加入alias<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias tmux=&apos;tmux -S /tmp/tmux-197608/default&apos;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Python开发环境\"><a href=\"#Python开发环境\" class=\"headerlink\" title=\"Python开发环境\"></a>Python开发环境</h1><h2 id=\"安装Python3和最新pip\"><a href=\"#安装Python3和最新pip\" class=\"headerlink\" title=\"安装Python3和最新pip\"></a>安装Python3和最新pip</h2><p>python3直接装官网最新的就行。<br>To install pip, securely download get-pip.py.<br><a href=\"https://bootstrap.pypa.io/get-pip.py\" target=\"_blank\" rel=\"external\">https://bootstrap.pypa.io/get-pip.py</a><br>Then run the following (which may require administrator access):<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ python get-pip.py</span><br></pre></td></tr></table></figure></p>\n<p>最后安装几个pakages，作为测试<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install pep8, pyflakes, pylint, ipython</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Qt-with-mingw\"><a href=\"#Qt-with-mingw\" class=\"headerlink\" title=\"Qt(with mingw)\"></a>Qt(with mingw)</h1><h2 id=\"安装Qt-and-MingW\"><a href=\"#安装Qt-and-MingW\" class=\"headerlink\" title=\"安装Qt and MingW\"></a>安装Qt and MingW</h2><p>  套件选择mingw4.9.2<br>  tools也选mingw4.9.2</p>\n<h2 id=\"美化Qt\"><a href=\"#美化Qt\" class=\"headerlink\" title=\"美化Qt\"></a>美化Qt</h2><p>  cd 到Qt安装目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/mervick/Qt-Creator-Darcula.git</span><br><span class=\"line\">cd Qt-Creator-Darcula</span><br><span class=\"line\">cp darcula.xml ../Tools/QtCreator/share/qtcreator/styles/</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"添加Path\"><a href=\"#添加Path\" class=\"headerlink\" title=\"添加Path\"></a>添加Path</h2><p>为了后面的bulid opencv，要把<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Qt/5.5/mingw492_32/</span><br><span class=\"line\">Qt/Tools/QtCreator/</span><br><span class=\"line\">Qt/Tools/mingw492_32/</span><br></pre></td></tr></table></figure></p>\n<p>里面的bin和lib都添加到path中吧。</p>\n<hr>\n<h1 id=\"CMake-GUI\"><a href=\"#CMake-GUI\" class=\"headerlink\" title=\"CMake(GUI)\"></a>CMake(GUI)</h1><p>  目前最新是3.2.3</p>\n<hr>\n<h1 id=\"OpenCV\"><a href=\"#OpenCV\" class=\"headerlink\" title=\"OpenCV\"></a>OpenCV</h1><h2 id=\"编译OpenCV-2-4-11\"><a href=\"#编译OpenCV-2-4-11\" class=\"headerlink\" title=\"编译OpenCV 2.4.11\"></a>编译OpenCV 2.4.11</h2><p>  版本选linux源码版。<br>  运行cmake的GUI版，<br>  input: 解压后的opencv源码包。<br>  output: /usr/include/opencv2411<br>  使用qt中的mingw去编译。<br>  选择native compiler。<br>  c++的选g++，c的选gcc。<br>  search QT, 把with_Qt选上。<br>  config的之前要把/bin/sh.exe改个名字，<br>  要不然会有sh不能在path中存在的错误。<br>  然后generate。<br>  最后，cygwin中cd去/usr/include/opencv2411<br>  执行mingw32-make.exe<br>  执行mingw32-make.exe install</p>\n","excerpt":"","more":"<h1 id=\"记录Win7开发的一些设置，但已过时，好多不会再用了。\"><a href=\"#记录Win7开发的一些设置，但已过时，好多不会再用了。\" class=\"headerlink\" title=\"记录Win7开发的一些设置，但已过时，好多不会再用了。\"></a>记录Win7开发的一些设置，但已过时，好多不会再用了。</h1><hr>\n<h1 id=\"Cygwin-tmux配置\"><a href=\"#Cygwin-tmux配置\" class=\"headerlink\" title=\"Cygwin, tmux配置\"></a>Cygwin, tmux配置</h1><h2 id=\"安装，美化cygwin\"><a href=\"#安装，美化cygwin\" class=\"headerlink\" title=\"安装，美化cygwin\"></a>安装，美化cygwin</h2><ul>\n<li>install cygwin 2.871<ul>\n<li>just using default setting to install.</li>\n</ul>\n</li>\n<li>install yahei consolas hybrid<ul>\n<li><a href=\"https://uigroupcode.googlecode.com/files/YaHei.Consolas.1.12.zip\">https://uigroupcode.googlecode.com/files/YaHei.Consolas.1.12.zip</a></li>\n</ul>\n</li>\n<li>set font and xterm-256color for cygwin<ul>\n<li>Right click on mintty, and just do it as the menu shown.</li>\n</ul>\n</li>\n<li>add tomorrow-color-scheme fot mintty<ul>\n<li>add fellowing content into .minttyrc under home.</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BoldAsFont=no</span><br><span class=\"line\">Font=YaHei Consolas Hybrid</span><br><span class=\"line\">FontHeight=12</span><br><span class=\"line\">FontSmoothing=full</span><br><span class=\"line\">Locale=C</span><br><span class=\"line\">Charset=UTF-8</span><br><span class=\"line\">Columns=68</span><br><span class=\"line\">Rows=28</span><br><span class=\"line\">Term=xterm-256color</span><br><span class=\"line\">ForegroundColour=197,200,198</span><br><span class=\"line\">BackgroundColour=29,31,33</span><br><span class=\"line\">CursorColour=253,157,79</span><br><span class=\"line\">Black=29,31,33</span><br><span class=\"line\">BoldBlack=150,152,150</span><br><span class=\"line\">Red=204,102,102</span><br><span class=\"line\">BoldRed=173,57,57</span><br><span class=\"line\">Green=181,189,104</span><br><span class=\"line\">BoldGreen=142,150,66</span><br><span class=\"line\">Yellow=240,198,116</span><br><span class=\"line\">BoldYellow=234,171,47</span><br><span class=\"line\">Blue=129,162,190</span><br><span class=\"line\">BoldBlue=82,125,159</span><br><span class=\"line\">Magenta=178,148,187</span><br><span class=\"line\">BoldMagenta=145,100,157</span><br><span class=\"line\">Cyan=138,190,183</span><br><span class=\"line\">BoldCyan=90,162,152</span><br><span class=\"line\">White=197,200,198</span><br><span class=\"line\">BoldWhite=255,255,255</span><br><span class=\"line\">Scrollbar=none</span><br><span class=\"line\">CursorType=underscore</span><br></pre></td></tr></table></figure>\n<h2 id=\"在cygwin中安装最新的vim-tmux\"><a href=\"#在cygwin中安装最新的vim-tmux\" class=\"headerlink\" title=\"在cygwin中安装最新的vim,tmux\"></a>在cygwin中安装最新的vim,tmux</h2><h2 id=\"设置tmux\"><a href=\"#设置tmux\" class=\"headerlink\" title=\"设置tmux\"></a>设置tmux</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set -g status-bg black</span><br><span class=\"line\">set -g status-fg white</span><br><span class=\"line\">set -sg escape-time 1</span><br><span class=\"line\">set -g base-index 1</span><br><span class=\"line\">setw -g pane-base-index 1</span><br><span class=\"line\"></span><br><span class=\"line\">bind | split-window -h</span><br><span class=\"line\">bind - split-window -v</span><br><span class=\"line\"></span><br><span class=\"line\">bind h select-pane -L</span><br><span class=\"line\">bind j select-pane -D</span><br><span class=\"line\">bind k select-pane -U</span><br><span class=\"line\">bind l select-pane -R</span><br><span class=\"line\"></span><br><span class=\"line\">setw -g mode-mouse off</span><br><span class=\"line\">set -g status-utf8 on</span><br><span class=\"line\"></span><br><span class=\"line\">set -g status-interval 60</span><br><span class=\"line\"></span><br><span class=\"line\"># 对齐方式</span><br><span class=\"line\">set-option -g status-justify centre</span><br><span class=\"line\"></span><br><span class=\"line\"># 左下角</span><br><span class=\"line\">set-option -g status-left &apos;#[bg=black,fg=green][#[fg=cyan]#S#[fg=green]]&apos;</span><br><span class=\"line\">set-option -g status-left-length 20</span><br><span class=\"line\"></span><br><span class=\"line\"># 窗口列表</span><br><span class=\"line\">setw -g automatic-rename on</span><br><span class=\"line\">set-window-option -g window-status-format &apos;#[dim]#I:#[default]#W#[fg=grey,dim]&apos;</span><br><span class=\"line\">set-window-option -g window-status-current-format &apos;#[fg=cyan,bold]#I#[fg=blue]:#[fg=cyan]#W#[fg=dim]&apos;</span><br><span class=\"line\"></span><br><span class=\"line\"># 右下角</span><br><span class=\"line\">set -g status-right &apos;#[fg=green][#[fg=cyan]%d %b %R#[fg=green]]&apos;</span><br></pre></td></tr></table></figure>\n<h2 id=\"如果can’t-create-socket-Permission-denied\"><a href=\"#如果can’t-create-socket-Permission-denied\" class=\"headerlink\" title=\"如果can’t create socket: Permission denied\"></a>如果can’t create socket: Permission denied</h2><p>解決法：<br>tmuxは(/tmp/tmux-[uid]/default)を生成するがなぜか書き込めない。権限を777にしてもだめしょうがないからソケットを指定してあげたらいけた<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tmux -S /tmp/tmux-[uid]/default</span><br></pre></td></tr></table></figure></p>\n<p>为了方便可以在.bashrc中加入alias<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias tmux=&apos;tmux -S /tmp/tmux-197608/default&apos;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Python开发环境\"><a href=\"#Python开发环境\" class=\"headerlink\" title=\"Python开发环境\"></a>Python开发环境</h1><h2 id=\"安装Python3和最新pip\"><a href=\"#安装Python3和最新pip\" class=\"headerlink\" title=\"安装Python3和最新pip\"></a>安装Python3和最新pip</h2><p>python3直接装官网最新的就行。<br>To install pip, securely download get-pip.py.<br><a href=\"https://bootstrap.pypa.io/get-pip.py\">https://bootstrap.pypa.io/get-pip.py</a><br>Then run the following (which may require administrator access):<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ python get-pip.py</span><br></pre></td></tr></table></figure></p>\n<p>最后安装几个pakages，作为测试<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ pip install pep8, pyflakes, pylint, ipython</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"Qt-with-mingw\"><a href=\"#Qt-with-mingw\" class=\"headerlink\" title=\"Qt(with mingw)\"></a>Qt(with mingw)</h1><h2 id=\"安装Qt-and-MingW\"><a href=\"#安装Qt-and-MingW\" class=\"headerlink\" title=\"安装Qt and MingW\"></a>安装Qt and MingW</h2><p>  套件选择mingw4.9.2<br>  tools也选mingw4.9.2</p>\n<h2 id=\"美化Qt\"><a href=\"#美化Qt\" class=\"headerlink\" title=\"美化Qt\"></a>美化Qt</h2><p>  cd 到Qt安装目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/mervick/Qt-Creator-Darcula.git</span><br><span class=\"line\">cd Qt-Creator-Darcula</span><br><span class=\"line\">cp darcula.xml ../Tools/QtCreator/share/qtcreator/styles/</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"添加Path\"><a href=\"#添加Path\" class=\"headerlink\" title=\"添加Path\"></a>添加Path</h2><p>为了后面的bulid opencv，要把<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Qt/5.5/mingw492_32/</span><br><span class=\"line\">Qt/Tools/QtCreator/</span><br><span class=\"line\">Qt/Tools/mingw492_32/</span><br></pre></td></tr></table></figure></p>\n<p>里面的bin和lib都添加到path中吧。</p>\n<hr>\n<h1 id=\"CMake-GUI\"><a href=\"#CMake-GUI\" class=\"headerlink\" title=\"CMake(GUI)\"></a>CMake(GUI)</h1><p>  目前最新是3.2.3</p>\n<hr>\n<h1 id=\"OpenCV\"><a href=\"#OpenCV\" class=\"headerlink\" title=\"OpenCV\"></a>OpenCV</h1><h2 id=\"编译OpenCV-2-4-11\"><a href=\"#编译OpenCV-2-4-11\" class=\"headerlink\" title=\"编译OpenCV 2.4.11\"></a>编译OpenCV 2.4.11</h2><p>  版本选linux源码版。<br>  运行cmake的GUI版，<br>  input: 解压后的opencv源码包。<br>  output: /usr/include/opencv2411<br>  使用qt中的mingw去编译。<br>  选择native compiler。<br>  c++的选g++，c的选gcc。<br>  search QT, 把with_Qt选上。<br>  config的之前要把/bin/sh.exe改个名字，<br>  要不然会有sh不能在path中存在的错误。<br>  然后generate。<br>  最后，cygwin中cd去/usr/include/opencv2411<br>  执行mingw32-make.exe<br>  执行mingw32-make.exe install</p>\n"},{"title":"过去的Django Blog","date":"2016-04-18T11:20:31.000Z","_content":"\n记录过去体验Django时搭的博客。\n\n------\n\n# 概要\n\n1. 系统[Ubuntu14.04LTS]\n2. Apache2 + libapache2-mod-wsgi\n3. 用[VirtualEnv12.0.7](http://virtualenv.readthedocs.org/en/latest/)隔离。\n4. 域名在[Godaddy](https://www.godaddy.com/)，全是广告。\n5. DNS和Nameservers全都用的[CloudFlare](https://www.cloudflare.com/)，免费。\n6. 主机本来用树莓派，实在太慢了受不了了，就用了的linode的VPS。\n7. Github: https://github.com/pslg916/SLGBlog.git （此系统现已废弃，博客已改用Hexo）\n\n------\n\n# 依赖安装\n\n```shell\n$ sudo apt-get install apache2\n$ sudo apt-get install libapache2-mod-wsgi\n$ sudo apt-get install python3-pip\n$ sudo pip3 install virtualenv\n```\n\n------\n\n# 使用virtualenv\n\n## 生成指定python版本的虚拟环境。\n```shell\n$ virtualenv -p /path/to/your/python2.7 ENV2.7      # 对于python2.7\n$ virtualenv -p /path/to/your/python3.4 ENV3.4      # 对于python3.4\n```\n\n*   -p PYTHON_EXE 选项在创建虚拟环境的时候指定python版本\n*   lib, 所有安装的python库都会放在这个目录中的lib/pythonx.x/site-packages/下，\n    并且在配置apache2时，mod_wsgi的WSGIPythonPath必须要写加上这个目录的路径。\n    WSGIPythonPath /path/to/mysite.com:/path/to/your/venv/lib/python2.X/site-packages\n*   bin,bin/python是在当前环境是使用的python解释器\n\n## 激活/取消 virtualenv\n```shell\n$ source ./ENVx.x/bin/activate           # 激活\n$ deactivate                             # 取消\n```\n\n## pip安装依赖\n```shell\n(ENV3.4)$ pip install  django            # 安装最新版本的Django\n(ENV3.4)$ pip install -v django==1.7.1   # 或者指定安装版本\n(ENV3.4)$ pip install bootstrap-admin    # 安装bootstrap-admin(可选，美化用)\n(ENV3.4)$ pip install markdown           # 安装markdown\n```\n\n------\n\n# apache2的mod配置\n\n1. apache2安装后的module的位置在/usr/lib/apache2/modules/mod_wsgi.so\n2. 配置apache2的mod的文件夹在/etc/apache2/下，LoadModule wsgi_module /usr/lib/apache2/modules/mod_wsgi.so\n\n------\n\n# apache2的sites-available配置文件\n\n1. apache的site相关文件位置/etc/apache2/sites-available/***.conf。\n2. 可以自行添加.conf文件，其实这里的.conf即为apache2 VirtualHost的配置，理论上一个.conf中是可以配置多个VirtualHost的，没实践过。\n\n下面是本次用的配置。用mod-wsgi和django配合，初学，目标是能工作就行，优化啊，安全啊什么的以后再说吧。\n```shell\n   WSGIPythonPath /var/www/html/my_blog:/var/www/html/ENV3.4/lib/python3.4/site-packages\n   <VirtualHost *:80>\n        # The ServerName directive sets the request scheme, hostname and port that\n        # the server uses to identify itself. This is used when creating\n        # redirection URLs. In the context of virtual hosts, the ServerName\n        # specifies what hostname must appear in the request's Host: header to\n        # match this virtual host. For the default virtual host (this file) this\n        # value is not decisive as it is used as a last resort host regardless.\n        # However, you must set it for any further virtual host explicitly.\n\n        ServerName sun-is.me\n        ServerAlias www.sun-is.me\n\n        DocumentRoot /var/www/html/my_blog\n\n        Alias /static /var/www/html/my_blog/static\n        <Directory /var/www/html/my_blog/static>\n                #Order allow,deny\n                Require all granted\n        </Directory>\n\n        <Directory /var/www/html/my_blog/templates>\n                #Order allow,deny\n                Require all granted\n        </Directory>\n\n        WSGIScriptAlias / /var/www/html/my_blog/my_blog/wsgi.py\n\n        <Directory /var/www/html/my_blog/my_blog>\n                <Files wsgi.py>\n                        #Order allow,deny\n                        Require all granted\n                </Files>\n        </Directory>\n\n\n        # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,\n        # error, crit, alert, emerg.\n        # It is also possible to configure the loglevel for particular\n        # modules, e.g.\n        #LogLevel info ssl:warn\n\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n        # For most configuration files from conf-available/, which are\n        # enabled or disabled at a global level, it is possible to\n        # include a line for only one particular virtual host. For example the\n        # following line enables the CGI configuration for this host only\n        # after it has been globally disabled with \"a2disconf\".\n        #Include conf-available/serve-cgi-bin.conf\n    </VirtualHost>\n\n    # vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n```\n\n------\n\n# 细节的坑\n\n- 多看error.log，可节约很多时间。\n- base.html中一定引用静态文件时，一定要以\"/\"开头，比如“/static/xxx/xxx.css\"。\n- Linux下的配置文件基本都在/etc/下。\n- Linux下的apache2相关的module，安装后都在/usr/lib/apache2/modules下。\n- 不要用Goddady的免费DNS，如果一定要用，把默认的那个删了，否则域名有50%机会被解析到Goddady的广告页上，太坑跌。\n- Django的项目结构不合理，有空再看看什么”最佳实践“之类的吧，或者别人的代码。\n- 静态文件设置\n```\n    STATIC_URL = '/static/'\n    STATIC_ROOT = '/var/www/html/my_blog/static/'\n    STATICFILES_DIRS = (\n          # 除了STATIC_ROOT之外的各APP的静态文件地址\n     )\n```\n- 生产环境上线前， 要执行collectstatic，把django-admin相关的静态文件都收集到STATIC_ROOT里。\n```\npython3 manage.py collectstatic\n```\n","source":"_posts/20160418_sun_DjangoBlog.md","raw":"---\ntitle: 过去的Django Blog\ndate: 2016-04-18 21:20:31\ntags: Django\ncategories: Web\n---\n\n记录过去体验Django时搭的博客。\n\n------\n\n# 概要\n\n1. 系统[Ubuntu14.04LTS]\n2. Apache2 + libapache2-mod-wsgi\n3. 用[VirtualEnv12.0.7](http://virtualenv.readthedocs.org/en/latest/)隔离。\n4. 域名在[Godaddy](https://www.godaddy.com/)，全是广告。\n5. DNS和Nameservers全都用的[CloudFlare](https://www.cloudflare.com/)，免费。\n6. 主机本来用树莓派，实在太慢了受不了了，就用了的linode的VPS。\n7. Github: https://github.com/pslg916/SLGBlog.git （此系统现已废弃，博客已改用Hexo）\n\n------\n\n# 依赖安装\n\n```shell\n$ sudo apt-get install apache2\n$ sudo apt-get install libapache2-mod-wsgi\n$ sudo apt-get install python3-pip\n$ sudo pip3 install virtualenv\n```\n\n------\n\n# 使用virtualenv\n\n## 生成指定python版本的虚拟环境。\n```shell\n$ virtualenv -p /path/to/your/python2.7 ENV2.7      # 对于python2.7\n$ virtualenv -p /path/to/your/python3.4 ENV3.4      # 对于python3.4\n```\n\n*   -p PYTHON_EXE 选项在创建虚拟环境的时候指定python版本\n*   lib, 所有安装的python库都会放在这个目录中的lib/pythonx.x/site-packages/下，\n    并且在配置apache2时，mod_wsgi的WSGIPythonPath必须要写加上这个目录的路径。\n    WSGIPythonPath /path/to/mysite.com:/path/to/your/venv/lib/python2.X/site-packages\n*   bin,bin/python是在当前环境是使用的python解释器\n\n## 激活/取消 virtualenv\n```shell\n$ source ./ENVx.x/bin/activate           # 激活\n$ deactivate                             # 取消\n```\n\n## pip安装依赖\n```shell\n(ENV3.4)$ pip install  django            # 安装最新版本的Django\n(ENV3.4)$ pip install -v django==1.7.1   # 或者指定安装版本\n(ENV3.4)$ pip install bootstrap-admin    # 安装bootstrap-admin(可选，美化用)\n(ENV3.4)$ pip install markdown           # 安装markdown\n```\n\n------\n\n# apache2的mod配置\n\n1. apache2安装后的module的位置在/usr/lib/apache2/modules/mod_wsgi.so\n2. 配置apache2的mod的文件夹在/etc/apache2/下，LoadModule wsgi_module /usr/lib/apache2/modules/mod_wsgi.so\n\n------\n\n# apache2的sites-available配置文件\n\n1. apache的site相关文件位置/etc/apache2/sites-available/***.conf。\n2. 可以自行添加.conf文件，其实这里的.conf即为apache2 VirtualHost的配置，理论上一个.conf中是可以配置多个VirtualHost的，没实践过。\n\n下面是本次用的配置。用mod-wsgi和django配合，初学，目标是能工作就行，优化啊，安全啊什么的以后再说吧。\n```shell\n   WSGIPythonPath /var/www/html/my_blog:/var/www/html/ENV3.4/lib/python3.4/site-packages\n   <VirtualHost *:80>\n        # The ServerName directive sets the request scheme, hostname and port that\n        # the server uses to identify itself. This is used when creating\n        # redirection URLs. In the context of virtual hosts, the ServerName\n        # specifies what hostname must appear in the request's Host: header to\n        # match this virtual host. For the default virtual host (this file) this\n        # value is not decisive as it is used as a last resort host regardless.\n        # However, you must set it for any further virtual host explicitly.\n\n        ServerName sun-is.me\n        ServerAlias www.sun-is.me\n\n        DocumentRoot /var/www/html/my_blog\n\n        Alias /static /var/www/html/my_blog/static\n        <Directory /var/www/html/my_blog/static>\n                #Order allow,deny\n                Require all granted\n        </Directory>\n\n        <Directory /var/www/html/my_blog/templates>\n                #Order allow,deny\n                Require all granted\n        </Directory>\n\n        WSGIScriptAlias / /var/www/html/my_blog/my_blog/wsgi.py\n\n        <Directory /var/www/html/my_blog/my_blog>\n                <Files wsgi.py>\n                        #Order allow,deny\n                        Require all granted\n                </Files>\n        </Directory>\n\n\n        # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,\n        # error, crit, alert, emerg.\n        # It is also possible to configure the loglevel for particular\n        # modules, e.g.\n        #LogLevel info ssl:warn\n\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n        # For most configuration files from conf-available/, which are\n        # enabled or disabled at a global level, it is possible to\n        # include a line for only one particular virtual host. For example the\n        # following line enables the CGI configuration for this host only\n        # after it has been globally disabled with \"a2disconf\".\n        #Include conf-available/serve-cgi-bin.conf\n    </VirtualHost>\n\n    # vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n```\n\n------\n\n# 细节的坑\n\n- 多看error.log，可节约很多时间。\n- base.html中一定引用静态文件时，一定要以\"/\"开头，比如“/static/xxx/xxx.css\"。\n- Linux下的配置文件基本都在/etc/下。\n- Linux下的apache2相关的module，安装后都在/usr/lib/apache2/modules下。\n- 不要用Goddady的免费DNS，如果一定要用，把默认的那个删了，否则域名有50%机会被解析到Goddady的广告页上，太坑跌。\n- Django的项目结构不合理，有空再看看什么”最佳实践“之类的吧，或者别人的代码。\n- 静态文件设置\n```\n    STATIC_URL = '/static/'\n    STATIC_ROOT = '/var/www/html/my_blog/static/'\n    STATICFILES_DIRS = (\n          # 除了STATIC_ROOT之外的各APP的静态文件地址\n     )\n```\n- 生产环境上线前， 要执行collectstatic，把django-admin相关的静态文件都收集到STATIC_ROOT里。\n```\npython3 manage.py collectstatic\n```\n","slug":"20160418_sun_DjangoBlog","published":1,"updated":"2016-05-02T10:48:41.455Z","_id":"cing328t10004bwfgfrfl1dlj","comments":1,"layout":"post","photos":[],"link":"","content":"<p>记录过去体验Django时搭的博客。</p>\n<hr>\n<h1 id=\"概要\"><a href=\"#概要\" class=\"headerlink\" title=\"概要\"></a>概要</h1><ol>\n<li>系统[Ubuntu14.04LTS]</li>\n<li>Apache2 + libapache2-mod-wsgi</li>\n<li>用<a href=\"http://virtualenv.readthedocs.org/en/latest/\" target=\"_blank\" rel=\"external\">VirtualEnv12.0.7</a>隔离。</li>\n<li>域名在<a href=\"https://www.godaddy.com/\" target=\"_blank\" rel=\"external\">Godaddy</a>，全是广告。</li>\n<li>DNS和Nameservers全都用的<a href=\"https://www.cloudflare.com/\" target=\"_blank\" rel=\"external\">CloudFlare</a>，免费。</li>\n<li>主机本来用树莓派，实在太慢了受不了了，就用了的linode的VPS。</li>\n<li>Github: <a href=\"https://github.com/pslg916/SLGBlog.git\" target=\"_blank\" rel=\"external\">https://github.com/pslg916/SLGBlog.git</a> （此系统现已废弃，博客已改用Hexo）</li>\n</ol>\n<hr>\n<h1 id=\"依赖安装\"><a href=\"#依赖安装\" class=\"headerlink\" title=\"依赖安装\"></a>依赖安装</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get install apache2</span><br><span class=\"line\">$ sudo apt-get install libapache2-mod-wsgi</span><br><span class=\"line\">$ sudo apt-get install python3-pip</span><br><span class=\"line\">$ sudo pip3 install virtualenv</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"使用virtualenv\"><a href=\"#使用virtualenv\" class=\"headerlink\" title=\"使用virtualenv\"></a>使用virtualenv</h1><h2 id=\"生成指定python版本的虚拟环境。\"><a href=\"#生成指定python版本的虚拟环境。\" class=\"headerlink\" title=\"生成指定python版本的虚拟环境。\"></a>生成指定python版本的虚拟环境。</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ virtualenv -p /path/to/your/python2.7 ENV2.7      # 对于python2.7</span><br><span class=\"line\">$ virtualenv -p /path/to/your/python3.4 ENV3.4      # 对于python3.4</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-p PYTHON_EXE 选项在创建虚拟环境的时候指定python版本</li>\n<li>lib, 所有安装的python库都会放在这个目录中的lib/pythonx.x/site-packages/下，<br>并且在配置apache2时，mod_wsgi的WSGIPythonPath必须要写加上这个目录的路径。<br>WSGIPythonPath /path/to/mysite.com:/path/to/your/venv/lib/python2.X/site-packages</li>\n<li>bin,bin/python是在当前环境是使用的python解释器</li>\n</ul>\n<h2 id=\"激活-取消-virtualenv\"><a href=\"#激活-取消-virtualenv\" class=\"headerlink\" title=\"激活/取消 virtualenv\"></a>激活/取消 virtualenv</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ source ./ENVx.x/bin/activate           # 激活</span><br><span class=\"line\">$ deactivate                             # 取消</span><br></pre></td></tr></table></figure>\n<h2 id=\"pip安装依赖\"><a href=\"#pip安装依赖\" class=\"headerlink\" title=\"pip安装依赖\"></a>pip安装依赖</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(ENV3.4)$ pip install  django            # 安装最新版本的Django</span><br><span class=\"line\">(ENV3.4)$ pip install -v django==1.7.1   # 或者指定安装版本</span><br><span class=\"line\">(ENV3.4)$ pip install bootstrap-admin    # 安装bootstrap-admin(可选，美化用)</span><br><span class=\"line\">(ENV3.4)$ pip install markdown           # 安装markdown</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"apache2的mod配置\"><a href=\"#apache2的mod配置\" class=\"headerlink\" title=\"apache2的mod配置\"></a>apache2的mod配置</h1><ol>\n<li>apache2安装后的module的位置在/usr/lib/apache2/modules/mod_wsgi.so</li>\n<li>配置apache2的mod的文件夹在/etc/apache2/下，LoadModule wsgi_module /usr/lib/apache2/modules/mod_wsgi.so</li>\n</ol>\n<hr>\n<h1 id=\"apache2的sites-available配置文件\"><a href=\"#apache2的sites-available配置文件\" class=\"headerlink\" title=\"apache2的sites-available配置文件\"></a>apache2的sites-available配置文件</h1><ol>\n<li>apache的site相关文件位置/etc/apache2/sites-available/<em>*</em>.conf。</li>\n<li>可以自行添加.conf文件，其实这里的.conf即为apache2 VirtualHost的配置，理论上一个.conf中是可以配置多个VirtualHost的，没实践过。</li>\n</ol>\n<p>下面是本次用的配置。用mod-wsgi和django配合，初学，目标是能工作就行，优化啊，安全啊什么的以后再说吧。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WSGIPythonPath /var/www/html/my_blog:/var/www/html/ENV3.4/lib/python3.4/site-packages</span><br><span class=\"line\">&lt;VirtualHost *:80&gt;</span><br><span class=\"line\">     # The ServerName directive sets the request scheme, hostname and port that</span><br><span class=\"line\">     # the server uses to identify itself. This is used when creating</span><br><span class=\"line\">     # redirection URLs. In the context of virtual hosts, the ServerName</span><br><span class=\"line\">     # specifies what hostname must appear in the request&apos;s Host: header to</span><br><span class=\"line\">     # match this virtual host. For the default virtual host (this file) this</span><br><span class=\"line\">     # value is not decisive as it is used as a last resort host regardless.</span><br><span class=\"line\">     # However, you must set it for any further virtual host explicitly.</span><br><span class=\"line\"></span><br><span class=\"line\">     ServerName sun-is.me</span><br><span class=\"line\">     ServerAlias www.sun-is.me</span><br><span class=\"line\"></span><br><span class=\"line\">     DocumentRoot /var/www/html/my_blog</span><br><span class=\"line\"></span><br><span class=\"line\">     Alias /static /var/www/html/my_blog/static</span><br><span class=\"line\">     &lt;Directory /var/www/html/my_blog/static&gt;</span><br><span class=\"line\">             #Order allow,deny</span><br><span class=\"line\">             Require all granted</span><br><span class=\"line\">     &lt;/Directory&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">     &lt;Directory /var/www/html/my_blog/templates&gt;</span><br><span class=\"line\">             #Order allow,deny</span><br><span class=\"line\">             Require all granted</span><br><span class=\"line\">     &lt;/Directory&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">     WSGIScriptAlias / /var/www/html/my_blog/my_blog/wsgi.py</span><br><span class=\"line\"></span><br><span class=\"line\">     &lt;Directory /var/www/html/my_blog/my_blog&gt;</span><br><span class=\"line\">             &lt;Files wsgi.py&gt;</span><br><span class=\"line\">                     #Order allow,deny</span><br><span class=\"line\">                     Require all granted</span><br><span class=\"line\">             &lt;/Files&gt;</span><br><span class=\"line\">     &lt;/Directory&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">     # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,</span><br><span class=\"line\">     # error, crit, alert, emerg.</span><br><span class=\"line\">     # It is also possible to configure the loglevel for particular</span><br><span class=\"line\">     # modules, e.g.</span><br><span class=\"line\">     #LogLevel info ssl:warn</span><br><span class=\"line\"></span><br><span class=\"line\">     ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class=\"line\">     CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class=\"line\"></span><br><span class=\"line\">     # For most configuration files from conf-available/, which are</span><br><span class=\"line\">     # enabled or disabled at a global level, it is possible to</span><br><span class=\"line\">     # include a line for only one particular virtual host. For example the</span><br><span class=\"line\">     # following line enables the CGI configuration for this host only</span><br><span class=\"line\">     # after it has been globally disabled with &quot;a2disconf&quot;.</span><br><span class=\"line\">     #Include conf-available/serve-cgi-bin.conf</span><br><span class=\"line\"> &lt;/VirtualHost&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"> # vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"细节的坑\"><a href=\"#细节的坑\" class=\"headerlink\" title=\"细节的坑\"></a>细节的坑</h1><ul>\n<li>多看error.log，可节约很多时间。</li>\n<li>base.html中一定引用静态文件时，一定要以”/“开头，比如“/static/xxx/xxx.css”。</li>\n<li>Linux下的配置文件基本都在/etc/下。</li>\n<li>Linux下的apache2相关的module，安装后都在/usr/lib/apache2/modules下。</li>\n<li>不要用Goddady的免费DNS，如果一定要用，把默认的那个删了，否则域名有50%机会被解析到Goddady的广告页上，太坑跌。</li>\n<li>Django的项目结构不合理，有空再看看什么”最佳实践“之类的吧，或者别人的代码。</li>\n<li><p>静态文件设置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">STATIC_URL = &apos;/static/&apos;</span><br><span class=\"line\">STATIC_ROOT = &apos;/var/www/html/my_blog/static/&apos;</span><br><span class=\"line\">STATICFILES_DIRS = (</span><br><span class=\"line\">      # 除了STATIC_ROOT之外的各APP的静态文件地址</span><br><span class=\"line\"> )</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>生产环境上线前， 要执行collectstatic，把django-admin相关的静态文件都收集到STATIC_ROOT里。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 manage.py collectstatic</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n","excerpt":"","more":"<p>记录过去体验Django时搭的博客。</p>\n<hr>\n<h1 id=\"概要\"><a href=\"#概要\" class=\"headerlink\" title=\"概要\"></a>概要</h1><ol>\n<li>系统[Ubuntu14.04LTS]</li>\n<li>Apache2 + libapache2-mod-wsgi</li>\n<li>用<a href=\"http://virtualenv.readthedocs.org/en/latest/\">VirtualEnv12.0.7</a>隔离。</li>\n<li>域名在<a href=\"https://www.godaddy.com/\">Godaddy</a>，全是广告。</li>\n<li>DNS和Nameservers全都用的<a href=\"https://www.cloudflare.com/\">CloudFlare</a>，免费。</li>\n<li>主机本来用树莓派，实在太慢了受不了了，就用了的linode的VPS。</li>\n<li>Github: <a href=\"https://github.com/pslg916/SLGBlog.git\">https://github.com/pslg916/SLGBlog.git</a> （此系统现已废弃，博客已改用Hexo）</li>\n</ol>\n<hr>\n<h1 id=\"依赖安装\"><a href=\"#依赖安装\" class=\"headerlink\" title=\"依赖安装\"></a>依赖安装</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get install apache2</span><br><span class=\"line\">$ sudo apt-get install libapache2-mod-wsgi</span><br><span class=\"line\">$ sudo apt-get install python3-pip</span><br><span class=\"line\">$ sudo pip3 install virtualenv</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"使用virtualenv\"><a href=\"#使用virtualenv\" class=\"headerlink\" title=\"使用virtualenv\"></a>使用virtualenv</h1><h2 id=\"生成指定python版本的虚拟环境。\"><a href=\"#生成指定python版本的虚拟环境。\" class=\"headerlink\" title=\"生成指定python版本的虚拟环境。\"></a>生成指定python版本的虚拟环境。</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ virtualenv -p /path/to/your/python2.7 ENV2.7      # 对于python2.7</span><br><span class=\"line\">$ virtualenv -p /path/to/your/python3.4 ENV3.4      # 对于python3.4</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-p PYTHON_EXE 选项在创建虚拟环境的时候指定python版本</li>\n<li>lib, 所有安装的python库都会放在这个目录中的lib/pythonx.x/site-packages/下，<br>并且在配置apache2时，mod_wsgi的WSGIPythonPath必须要写加上这个目录的路径。<br>WSGIPythonPath /path/to/mysite.com:/path/to/your/venv/lib/python2.X/site-packages</li>\n<li>bin,bin/python是在当前环境是使用的python解释器</li>\n</ul>\n<h2 id=\"激活-取消-virtualenv\"><a href=\"#激活-取消-virtualenv\" class=\"headerlink\" title=\"激活/取消 virtualenv\"></a>激活/取消 virtualenv</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ source ./ENVx.x/bin/activate           # 激活</span><br><span class=\"line\">$ deactivate                             # 取消</span><br></pre></td></tr></table></figure>\n<h2 id=\"pip安装依赖\"><a href=\"#pip安装依赖\" class=\"headerlink\" title=\"pip安装依赖\"></a>pip安装依赖</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(ENV3.4)$ pip install  django            # 安装最新版本的Django</span><br><span class=\"line\">(ENV3.4)$ pip install -v django==1.7.1   # 或者指定安装版本</span><br><span class=\"line\">(ENV3.4)$ pip install bootstrap-admin    # 安装bootstrap-admin(可选，美化用)</span><br><span class=\"line\">(ENV3.4)$ pip install markdown           # 安装markdown</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"apache2的mod配置\"><a href=\"#apache2的mod配置\" class=\"headerlink\" title=\"apache2的mod配置\"></a>apache2的mod配置</h1><ol>\n<li>apache2安装后的module的位置在/usr/lib/apache2/modules/mod_wsgi.so</li>\n<li>配置apache2的mod的文件夹在/etc/apache2/下，LoadModule wsgi_module /usr/lib/apache2/modules/mod_wsgi.so</li>\n</ol>\n<hr>\n<h1 id=\"apache2的sites-available配置文件\"><a href=\"#apache2的sites-available配置文件\" class=\"headerlink\" title=\"apache2的sites-available配置文件\"></a>apache2的sites-available配置文件</h1><ol>\n<li>apache的site相关文件位置/etc/apache2/sites-available/<em>*</em>.conf。</li>\n<li>可以自行添加.conf文件，其实这里的.conf即为apache2 VirtualHost的配置，理论上一个.conf中是可以配置多个VirtualHost的，没实践过。</li>\n</ol>\n<p>下面是本次用的配置。用mod-wsgi和django配合，初学，目标是能工作就行，优化啊，安全啊什么的以后再说吧。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WSGIPythonPath /var/www/html/my_blog:/var/www/html/ENV3.4/lib/python3.4/site-packages</span><br><span class=\"line\">&lt;VirtualHost *:80&gt;</span><br><span class=\"line\">     # The ServerName directive sets the request scheme, hostname and port that</span><br><span class=\"line\">     # the server uses to identify itself. This is used when creating</span><br><span class=\"line\">     # redirection URLs. In the context of virtual hosts, the ServerName</span><br><span class=\"line\">     # specifies what hostname must appear in the request&apos;s Host: header to</span><br><span class=\"line\">     # match this virtual host. For the default virtual host (this file) this</span><br><span class=\"line\">     # value is not decisive as it is used as a last resort host regardless.</span><br><span class=\"line\">     # However, you must set it for any further virtual host explicitly.</span><br><span class=\"line\"></span><br><span class=\"line\">     ServerName sun-is.me</span><br><span class=\"line\">     ServerAlias www.sun-is.me</span><br><span class=\"line\"></span><br><span class=\"line\">     DocumentRoot /var/www/html/my_blog</span><br><span class=\"line\"></span><br><span class=\"line\">     Alias /static /var/www/html/my_blog/static</span><br><span class=\"line\">     &lt;Directory /var/www/html/my_blog/static&gt;</span><br><span class=\"line\">             #Order allow,deny</span><br><span class=\"line\">             Require all granted</span><br><span class=\"line\">     &lt;/Directory&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">     &lt;Directory /var/www/html/my_blog/templates&gt;</span><br><span class=\"line\">             #Order allow,deny</span><br><span class=\"line\">             Require all granted</span><br><span class=\"line\">     &lt;/Directory&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">     WSGIScriptAlias / /var/www/html/my_blog/my_blog/wsgi.py</span><br><span class=\"line\"></span><br><span class=\"line\">     &lt;Directory /var/www/html/my_blog/my_blog&gt;</span><br><span class=\"line\">             &lt;Files wsgi.py&gt;</span><br><span class=\"line\">                     #Order allow,deny</span><br><span class=\"line\">                     Require all granted</span><br><span class=\"line\">             &lt;/Files&gt;</span><br><span class=\"line\">     &lt;/Directory&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">     # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,</span><br><span class=\"line\">     # error, crit, alert, emerg.</span><br><span class=\"line\">     # It is also possible to configure the loglevel for particular</span><br><span class=\"line\">     # modules, e.g.</span><br><span class=\"line\">     #LogLevel info ssl:warn</span><br><span class=\"line\"></span><br><span class=\"line\">     ErrorLog $&#123;APACHE_LOG_DIR&#125;/error.log</span><br><span class=\"line\">     CustomLog $&#123;APACHE_LOG_DIR&#125;/access.log combined</span><br><span class=\"line\"></span><br><span class=\"line\">     # For most configuration files from conf-available/, which are</span><br><span class=\"line\">     # enabled or disabled at a global level, it is possible to</span><br><span class=\"line\">     # include a line for only one particular virtual host. For example the</span><br><span class=\"line\">     # following line enables the CGI configuration for this host only</span><br><span class=\"line\">     # after it has been globally disabled with &quot;a2disconf&quot;.</span><br><span class=\"line\">     #Include conf-available/serve-cgi-bin.conf</span><br><span class=\"line\"> &lt;/VirtualHost&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"> # vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"细节的坑\"><a href=\"#细节的坑\" class=\"headerlink\" title=\"细节的坑\"></a>细节的坑</h1><ul>\n<li>多看error.log，可节约很多时间。</li>\n<li>base.html中一定引用静态文件时，一定要以”/“开头，比如“/static/xxx/xxx.css”。</li>\n<li>Linux下的配置文件基本都在/etc/下。</li>\n<li>Linux下的apache2相关的module，安装后都在/usr/lib/apache2/modules下。</li>\n<li>不要用Goddady的免费DNS，如果一定要用，把默认的那个删了，否则域名有50%机会被解析到Goddady的广告页上，太坑跌。</li>\n<li>Django的项目结构不合理，有空再看看什么”最佳实践“之类的吧，或者别人的代码。</li>\n<li><p>静态文件设置</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">STATIC_URL = &apos;/static/&apos;</span><br><span class=\"line\">STATIC_ROOT = &apos;/var/www/html/my_blog/static/&apos;</span><br><span class=\"line\">STATICFILES_DIRS = (</span><br><span class=\"line\">      # 除了STATIC_ROOT之外的各APP的静态文件地址</span><br><span class=\"line\"> )</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>生产环境上线前， 要执行collectstatic，把django-admin相关的静态文件都收集到STATIC_ROOT里。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 manage.py collectstatic</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"Hexo在VPS上用Git Hook部署","date":"2016-04-20T13:23:50.000Z","_content":"\nHexo在VPS上部署的笔记。\n\n------\n\n# 本地生成RSA Key，拷贝至VPS，无密码登录\n\n## Step1 本地创建RSA Key Pair\n```shell\nssh-keygen -t rsa\n```\n- -t type\n    - 指定要创建的密钥类型。可以使用：\"rsa1\"(SSH-1) \"rsa\"(SSH-2) \"dsa\"(SSH-2)\n\n## Step2 存储Keys并设置密码(可选)\n第一步结束后，会出现下述问题：\n```shell\nEnter file in which to save the key (/home/demo/.ssh/id_rsa):\n```\n只需要连续按回车，就会在默认位置无密码产生keys。\n```shell\nEnter file in which to save the key (/home/demo/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\n```\n完整的步骤如下：\n```shell\nssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/demo/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/demo/.ssh/id_rsa.\nYour public key has been saved in /home/demo/.ssh/id_rsa.pub.\nThe key fingerprint is:\n4a:dd:0a:c6:35:4e:3f:ed:27:38:8c:74:44:4d:93:67 demo@a\nThe key's randomart image is:\n+--[ RSA 2048]----+\n|          .oo.   |\n|         .  o.E  |\n|        + .  o   |\n|     . = = .     |\n|      = S = .    |\n|     o + = +     |\n|      . o + o .  |\n|           . o   |\n|                 |\n+-----------------+\n```\n其中，公共key是\n```shell\n/home/demo/.ssh/id_rsa.pub\n```\n私有key是\n```shell\n /home/demo/.ssh/id_rsa\n```\n## Step3 拷贝共有key至VPS\n通过ssh-copy-id可以拷贝共有key至VPS\n```shell\nssh-copy-id user@123.45.56.78\n```\n如果没有ssh-copy-id，比如mac osx，可以通过下面的方法安装\n```shell\ncurl -L https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/install.sh | sh\n```\n\n执行ssh-copy-id命令后，会出现如下结果\n```shell\nThe authenticity of host '12.34.56.78 (12.34.56.78)' can't be established.\nRSA key fingerprint is b1:2d:33:67:ce:35:4d:5f:f3:a8:cd:c0:c4:48:86:12.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '12.34.56.78' (RSA) to the list of known hosts.\nuser@12.34.56.78's password:\nNow try logging into the machine, with \"ssh 'user@12.34.56.78'\", and check in:\n\n  ~/.ssh/authorized_keys\n\nto make sure we haven't added extra keys that you weren't expecting.\n```\n现在就可已通过\n```shell\nssh user@12.34.56.78\n```\n无密码登录VPS了。\n\n## Step4 配置VPS，禁止ssh密码root登录(可选)\n首先登录VPS，\n```shell\nssh user@12.34.56.78\n```\n然后修改配置文件\n```shell\nsudo nano /etc/ssh/sshd_config\n```\n找到PermitRootLogin所在处，并修改为\n```shell\nPermitRootLogin without-password\n```\n最后，重载ssh\n```shell\nreload ssh\n```\n\n------\n\n# VPS新建空Git Repo，用Hook在push时部署\n\n## VPS新建空Blog Git Repo\n\n创建静态blog目录\n```shell\nsudo mkdir -p /var/www/blog\n```\n创建git repo目录\n```shell\nsudo mkdir -p /var/www/repo\n```\n进入repo目录，初始化空repo\n```shell\ncd /var/www/repo\ngit init --bare\ntree -L 1 repo\n    repo/\n    ├── branches\n    ├── config\n    ├── description\n    ├── HEAD\n    ├── hooks\n    ├── index\n    ├── info\n    ├── objects\n    └── refs\n```\n--bare 的意思是该目录只作为版本控制，但是不实际包含源代码文件。\n\n## 写hook，分别部署版本控制和代码文件\n进入hooks目录，\n```shell\ncd hooks\n```\n创建post-receive文件，\n```shell\nvim post-receive\n```\n并写入\n```shell\n#!/bin/sh\ngit --work-tree=/var/www/blog --git-dir=/var/repo checkout -f\n```\n- 这里的参数\n    - --work-tree：本地push后remote端最新版代码存放文件夹\n    - --work-dir：本地push后remote端版代控制相关文件存放处\n\n最后设置权限\n```shell\nchmod +x post-receive\n```\n\n------\n\n# 本地添加remote，push\n在本地机，进入hexo的目录，比如\n```shell\ncd ~/blog\n```\n接着添加代号XXX的remote\n```shell\ngit remote add XXX ssh://user@12.34.56.78/var/www/repo\n```\n今后，用hexo生成静态文件后，push至VPS\n```shell\nhexo g\ngit add .\ngit commit -m \"我的第一篇博客\"\ngit push XXX master\n```\n即可将版本信息push到VPS的/var/www/repo，\n并将最新版代码push到VPS的/var/www/blog。\n\n------\n\n# VPS安装Nginx\n\n首先，安装nginx\n```shell\nsudo apt-get update\nsudo apt-get install nginx\n```\n然后查询VPS公网IP\n```shell\nip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's/\\/.*$//'\n```\nNginx动作确认\n通过浏览器访问VPS公网IP，如果有域名，可以设置[DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-host-name-with-digitalocean)等DNS服务商。\n如果一切正常，浏览http://server_domain_name_or_IP后可见如下结果\n![nginx](https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQL3gkKlCzKAnBJjdy9vCLnEciVZ4LY3Euu9yya-gVFImPsB4xlfw)\n\n- nginx相关基本操作\n```shell\nsudo service nginx stop     # 停止\nsudo service nginx start    # 启动\nsudo service nginx restart  # 重启\n```\n- 确认nginx在reboot后自启动\n```shell\nsudo update-rc.d nginx defaults\n    System start/stop links for /etc/init.d/nginx already exist.\n```\n\n# 配置nginx，最终可通过公网访问静态Hexo Blog\n编辑下述文件\n```shell\nsudo vim /etc/nginx/conf.d/default.conf\n```\n加入\n```shell\nserver {\n    # 写上Hexo博客生成文件夹地址\n    root /var/www/blog/public;\n    index index.html index.htm;\n\n    # 写上自己的VPS的域名或IP\n    server_name www.XXX.XXX XXX.XXX *.XXX.XXX;\n\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n}\n```\n重启nginx\n```shell\nsudo service nginx restart\n```\n终于，可以通过VPS公网IP或域名，来访问Hexo Blog了。\n比如我的，https://www.sun-is.me\n","source":"_posts/20160420_sun_HexoBlogEnv.md","raw":"---\ntitle: Hexo在VPS上用Git Hook部署\ndate: 2016-04-20 23:23:50\ntags: Hexo\ncategories: 工具\n---\n\nHexo在VPS上部署的笔记。\n\n------\n\n# 本地生成RSA Key，拷贝至VPS，无密码登录\n\n## Step1 本地创建RSA Key Pair\n```shell\nssh-keygen -t rsa\n```\n- -t type\n    - 指定要创建的密钥类型。可以使用：\"rsa1\"(SSH-1) \"rsa\"(SSH-2) \"dsa\"(SSH-2)\n\n## Step2 存储Keys并设置密码(可选)\n第一步结束后，会出现下述问题：\n```shell\nEnter file in which to save the key (/home/demo/.ssh/id_rsa):\n```\n只需要连续按回车，就会在默认位置无密码产生keys。\n```shell\nEnter file in which to save the key (/home/demo/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\n```\n完整的步骤如下：\n```shell\nssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/demo/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/demo/.ssh/id_rsa.\nYour public key has been saved in /home/demo/.ssh/id_rsa.pub.\nThe key fingerprint is:\n4a:dd:0a:c6:35:4e:3f:ed:27:38:8c:74:44:4d:93:67 demo@a\nThe key's randomart image is:\n+--[ RSA 2048]----+\n|          .oo.   |\n|         .  o.E  |\n|        + .  o   |\n|     . = = .     |\n|      = S = .    |\n|     o + = +     |\n|      . o + o .  |\n|           . o   |\n|                 |\n+-----------------+\n```\n其中，公共key是\n```shell\n/home/demo/.ssh/id_rsa.pub\n```\n私有key是\n```shell\n /home/demo/.ssh/id_rsa\n```\n## Step3 拷贝共有key至VPS\n通过ssh-copy-id可以拷贝共有key至VPS\n```shell\nssh-copy-id user@123.45.56.78\n```\n如果没有ssh-copy-id，比如mac osx，可以通过下面的方法安装\n```shell\ncurl -L https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/install.sh | sh\n```\n\n执行ssh-copy-id命令后，会出现如下结果\n```shell\nThe authenticity of host '12.34.56.78 (12.34.56.78)' can't be established.\nRSA key fingerprint is b1:2d:33:67:ce:35:4d:5f:f3:a8:cd:c0:c4:48:86:12.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '12.34.56.78' (RSA) to the list of known hosts.\nuser@12.34.56.78's password:\nNow try logging into the machine, with \"ssh 'user@12.34.56.78'\", and check in:\n\n  ~/.ssh/authorized_keys\n\nto make sure we haven't added extra keys that you weren't expecting.\n```\n现在就可已通过\n```shell\nssh user@12.34.56.78\n```\n无密码登录VPS了。\n\n## Step4 配置VPS，禁止ssh密码root登录(可选)\n首先登录VPS，\n```shell\nssh user@12.34.56.78\n```\n然后修改配置文件\n```shell\nsudo nano /etc/ssh/sshd_config\n```\n找到PermitRootLogin所在处，并修改为\n```shell\nPermitRootLogin without-password\n```\n最后，重载ssh\n```shell\nreload ssh\n```\n\n------\n\n# VPS新建空Git Repo，用Hook在push时部署\n\n## VPS新建空Blog Git Repo\n\n创建静态blog目录\n```shell\nsudo mkdir -p /var/www/blog\n```\n创建git repo目录\n```shell\nsudo mkdir -p /var/www/repo\n```\n进入repo目录，初始化空repo\n```shell\ncd /var/www/repo\ngit init --bare\ntree -L 1 repo\n    repo/\n    ├── branches\n    ├── config\n    ├── description\n    ├── HEAD\n    ├── hooks\n    ├── index\n    ├── info\n    ├── objects\n    └── refs\n```\n--bare 的意思是该目录只作为版本控制，但是不实际包含源代码文件。\n\n## 写hook，分别部署版本控制和代码文件\n进入hooks目录，\n```shell\ncd hooks\n```\n创建post-receive文件，\n```shell\nvim post-receive\n```\n并写入\n```shell\n#!/bin/sh\ngit --work-tree=/var/www/blog --git-dir=/var/repo checkout -f\n```\n- 这里的参数\n    - --work-tree：本地push后remote端最新版代码存放文件夹\n    - --work-dir：本地push后remote端版代控制相关文件存放处\n\n最后设置权限\n```shell\nchmod +x post-receive\n```\n\n------\n\n# 本地添加remote，push\n在本地机，进入hexo的目录，比如\n```shell\ncd ~/blog\n```\n接着添加代号XXX的remote\n```shell\ngit remote add XXX ssh://user@12.34.56.78/var/www/repo\n```\n今后，用hexo生成静态文件后，push至VPS\n```shell\nhexo g\ngit add .\ngit commit -m \"我的第一篇博客\"\ngit push XXX master\n```\n即可将版本信息push到VPS的/var/www/repo，\n并将最新版代码push到VPS的/var/www/blog。\n\n------\n\n# VPS安装Nginx\n\n首先，安装nginx\n```shell\nsudo apt-get update\nsudo apt-get install nginx\n```\n然后查询VPS公网IP\n```shell\nip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's/\\/.*$//'\n```\nNginx动作确认\n通过浏览器访问VPS公网IP，如果有域名，可以设置[DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-host-name-with-digitalocean)等DNS服务商。\n如果一切正常，浏览http://server_domain_name_or_IP后可见如下结果\n![nginx](https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQL3gkKlCzKAnBJjdy9vCLnEciVZ4LY3Euu9yya-gVFImPsB4xlfw)\n\n- nginx相关基本操作\n```shell\nsudo service nginx stop     # 停止\nsudo service nginx start    # 启动\nsudo service nginx restart  # 重启\n```\n- 确认nginx在reboot后自启动\n```shell\nsudo update-rc.d nginx defaults\n    System start/stop links for /etc/init.d/nginx already exist.\n```\n\n# 配置nginx，最终可通过公网访问静态Hexo Blog\n编辑下述文件\n```shell\nsudo vim /etc/nginx/conf.d/default.conf\n```\n加入\n```shell\nserver {\n    # 写上Hexo博客生成文件夹地址\n    root /var/www/blog/public;\n    index index.html index.htm;\n\n    # 写上自己的VPS的域名或IP\n    server_name www.XXX.XXX XXX.XXX *.XXX.XXX;\n\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n}\n```\n重启nginx\n```shell\nsudo service nginx restart\n```\n终于，可以通过VPS公网IP或域名，来访问Hexo Blog了。\n比如我的，https://www.sun-is.me\n","slug":"20160420_sun_HexoBlogEnv","published":1,"updated":"2016-05-02T10:45:51.788Z","_id":"cing328z7000cbwfgoae8s9av","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Hexo在VPS上部署的笔记。</p>\n<hr>\n<h1 id=\"本地生成RSA-Key，拷贝至VPS，无密码登录\"><a href=\"#本地生成RSA-Key，拷贝至VPS，无密码登录\" class=\"headerlink\" title=\"本地生成RSA Key，拷贝至VPS，无密码登录\"></a>本地生成RSA Key，拷贝至VPS，无密码登录</h1><h2 id=\"Step1-本地创建RSA-Key-Pair\"><a href=\"#Step1-本地创建RSA-Key-Pair\" class=\"headerlink\" title=\"Step1 本地创建RSA Key Pair\"></a>Step1 本地创建RSA Key Pair</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-t type<ul>\n<li>指定要创建的密钥类型。可以使用：”rsa1”(SSH-1) “rsa”(SSH-2) “dsa”(SSH-2)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Step2-存储Keys并设置密码-可选\"><a href=\"#Step2-存储Keys并设置密码-可选\" class=\"headerlink\" title=\"Step2 存储Keys并设置密码(可选)\"></a>Step2 存储Keys并设置密码(可选)</h2><p>第一步结束后，会出现下述问题：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Enter file in which to save the key (/home/demo/.ssh/id_rsa):</span><br></pre></td></tr></table></figure></p>\n<p>只需要连续按回车，就会在默认位置无密码产生keys。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Enter file in which to save the key (/home/demo/.ssh/id_rsa):</span><br><span class=\"line\">Enter passphrase (empty for no passphrase):</span><br></pre></td></tr></table></figure></p>\n<p>完整的步骤如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\">Generating public/private rsa key pair.</span><br><span class=\"line\">Enter file in which to save the key (/home/demo/.ssh/id_rsa):</span><br><span class=\"line\">Enter passphrase (empty for no passphrase):</span><br><span class=\"line\">Enter same passphrase again:</span><br><span class=\"line\">Your identification has been saved in /home/demo/.ssh/id_rsa.</span><br><span class=\"line\">Your public key has been saved in /home/demo/.ssh/id_rsa.pub.</span><br><span class=\"line\">The key fingerprint is:</span><br><span class=\"line\">4a:dd:0a:c6:35:4e:3f:ed:27:38:8c:74:44:4d:93:67 demo@a</span><br><span class=\"line\">The key&apos;s randomart image is:</span><br><span class=\"line\">+--[ RSA 2048]----+</span><br><span class=\"line\">|          .oo.   |</span><br><span class=\"line\">|         .  o.E  |</span><br><span class=\"line\">|        + .  o   |</span><br><span class=\"line\">|     . = = .     |</span><br><span class=\"line\">|      = S = .    |</span><br><span class=\"line\">|     o + = +     |</span><br><span class=\"line\">|      . o + o .  |</span><br><span class=\"line\">|           . o   |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">+-----------------+</span><br></pre></td></tr></table></figure></p>\n<p>其中，公共key是<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/home/demo/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure></p>\n<p>私有key是<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/home/demo/.ssh/id_rsa</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Step3-拷贝共有key至VPS\"><a href=\"#Step3-拷贝共有key至VPS\" class=\"headerlink\" title=\"Step3 拷贝共有key至VPS\"></a>Step3 拷贝共有key至VPS</h2><p>通过ssh-copy-id可以拷贝共有key至VPS<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id user@123.45.56.78</span><br></pre></td></tr></table></figure></p>\n<p>如果没有ssh-copy-id，比如mac osx，可以通过下面的方法安装<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/install.sh | sh</span><br></pre></td></tr></table></figure></p>\n<p>执行ssh-copy-id命令后，会出现如下结果<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The authenticity of host &apos;12.34.56.78 (12.34.56.78)&apos; can&apos;t be established.</span><br><span class=\"line\">RSA key fingerprint is b1:2d:33:67:ce:35:4d:5f:f3:a8:cd:c0:c4:48:86:12.</span><br><span class=\"line\">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class=\"line\">Warning: Permanently added &apos;12.34.56.78&apos; (RSA) to the list of known hosts.</span><br><span class=\"line\">user@12.34.56.78&apos;s password:</span><br><span class=\"line\">Now try logging into the machine, with &quot;ssh &apos;user@12.34.56.78&apos;&quot;, and check in:</span><br><span class=\"line\"></span><br><span class=\"line\">  ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">to make sure we haven&apos;t added extra keys that you weren&apos;t expecting.</span><br></pre></td></tr></table></figure></p>\n<p>现在就可已通过<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh user@12.34.56.78</span><br></pre></td></tr></table></figure></p>\n<p>无密码登录VPS了。</p>\n<h2 id=\"Step4-配置VPS，禁止ssh密码root登录-可选\"><a href=\"#Step4-配置VPS，禁止ssh密码root登录-可选\" class=\"headerlink\" title=\"Step4 配置VPS，禁止ssh密码root登录(可选)\"></a>Step4 配置VPS，禁止ssh密码root登录(可选)</h2><p>首先登录VPS，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh user@12.34.56.78</span><br></pre></td></tr></table></figure></p>\n<p>然后修改配置文件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></p>\n<p>找到PermitRootLogin所在处，并修改为<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PermitRootLogin without-password</span><br></pre></td></tr></table></figure></p>\n<p>最后，重载ssh<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reload ssh</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"VPS新建空Git-Repo，用Hook在push时部署\"><a href=\"#VPS新建空Git-Repo，用Hook在push时部署\" class=\"headerlink\" title=\"VPS新建空Git Repo，用Hook在push时部署\"></a>VPS新建空Git Repo，用Hook在push时部署</h1><h2 id=\"VPS新建空Blog-Git-Repo\"><a href=\"#VPS新建空Blog-Git-Repo\" class=\"headerlink\" title=\"VPS新建空Blog Git Repo\"></a>VPS新建空Blog Git Repo</h2><p>创建静态blog目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /var/www/blog</span><br></pre></td></tr></table></figure></p>\n<p>创建git repo目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /var/www/repo</span><br></pre></td></tr></table></figure></p>\n<p>进入repo目录，初始化空repo<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /var/www/repo</span><br><span class=\"line\">git init --bare</span><br><span class=\"line\">tree -L 1 repo</span><br><span class=\"line\">    repo/</span><br><span class=\"line\">    ├── branches</span><br><span class=\"line\">    ├── config</span><br><span class=\"line\">    ├── description</span><br><span class=\"line\">    ├── HEAD</span><br><span class=\"line\">    ├── hooks</span><br><span class=\"line\">    ├── index</span><br><span class=\"line\">    ├── info</span><br><span class=\"line\">    ├── objects</span><br><span class=\"line\">    └── refs</span><br></pre></td></tr></table></figure></p>\n<p>–bare 的意思是该目录只作为版本控制，但是不实际包含源代码文件。</p>\n<h2 id=\"写hook，分别部署版本控制和代码文件\"><a href=\"#写hook，分别部署版本控制和代码文件\" class=\"headerlink\" title=\"写hook，分别部署版本控制和代码文件\"></a>写hook，分别部署版本控制和代码文件</h2><p>进入hooks目录，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd hooks</span><br></pre></td></tr></table></figure></p>\n<p>创建post-receive文件，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim post-receive</span><br></pre></td></tr></table></figure></p>\n<p>并写入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/sh</span><br><span class=\"line\">git --work-tree=/var/www/blog --git-dir=/var/repo checkout -f</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>这里的参数<ul>\n<li>–work-tree：本地push后remote端最新版代码存放文件夹</li>\n<li>–work-dir：本地push后remote端版代控制相关文件存放处</li>\n</ul>\n</li>\n</ul>\n<p>最后设置权限<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x post-receive</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"本地添加remote，push\"><a href=\"#本地添加remote，push\" class=\"headerlink\" title=\"本地添加remote，push\"></a>本地添加remote，push</h1><p>在本地机，进入hexo的目录，比如<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/blog</span><br></pre></td></tr></table></figure></p>\n<p>接着添加代号XXX的remote<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add XXX ssh://user@12.34.56.78/var/www/repo</span><br></pre></td></tr></table></figure></p>\n<p>今后，用hexo生成静态文件后，push至VPS<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo g</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;我的第一篇博客&quot;</span><br><span class=\"line\">git push XXX master</span><br></pre></td></tr></table></figure></p>\n<p>即可将版本信息push到VPS的/var/www/repo，<br>并将最新版代码push到VPS的/var/www/blog。</p>\n<hr>\n<h1 id=\"VPS安装Nginx\"><a href=\"#VPS安装Nginx\" class=\"headerlink\" title=\"VPS安装Nginx\"></a>VPS安装Nginx</h1><p>首先，安装nginx<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install nginx</span><br></pre></td></tr></table></figure></p>\n<p>然后查询VPS公网IP<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip addr show eth0 | grep inet | awk &apos;&#123; print $2; &#125;&apos; | sed &apos;s/\\/.*$//&apos;</span><br></pre></td></tr></table></figure></p>\n<p>Nginx动作确认<br>通过浏览器访问VPS公网IP，如果有域名，可以设置<a href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-host-name-with-digitalocean\" target=\"_blank\" rel=\"external\">DigitalOcean</a>等DNS服务商。<br>如果一切正常，浏览<a href=\"http://server_domain_name_or_IP后可见如下结果\" target=\"_blank\" rel=\"external\">http://server_domain_name_or_IP后可见如下结果</a><br><img src=\"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQL3gkKlCzKAnBJjdy9vCLnEciVZ4LY3Euu9yya-gVFImPsB4xlfw\" alt=\"nginx\"></p>\n<ul>\n<li><p>nginx相关基本操作</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service nginx stop     # 停止</span><br><span class=\"line\">sudo service nginx start    # 启动</span><br><span class=\"line\">sudo service nginx restart  # 重启</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>确认nginx在reboot后自启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo update-rc.d nginx defaults</span><br><span class=\"line\">    System start/stop links for /etc/init.d/nginx already exist.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"配置nginx，最终可通过公网访问静态Hexo-Blog\"><a href=\"#配置nginx，最终可通过公网访问静态Hexo-Blog\" class=\"headerlink\" title=\"配置nginx，最终可通过公网访问静态Hexo Blog\"></a>配置nginx，最终可通过公网访问静态Hexo Blog</h1><p>编辑下述文件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/nginx/conf.d/default.conf</span><br></pre></td></tr></table></figure></p>\n<p>加入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    # 写上Hexo博客生成文件夹地址</span><br><span class=\"line\">    root /var/www/blog/public;</span><br><span class=\"line\">    index index.html index.htm;</span><br><span class=\"line\"></span><br><span class=\"line\">    # 写上自己的VPS的域名或IP</span><br><span class=\"line\">    server_name www.XXX.XXX XXX.XXX *.XXX.XXX;</span><br><span class=\"line\"></span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri $uri/ /index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>重启nginx<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service nginx restart</span><br></pre></td></tr></table></figure></p>\n<p>终于，可以通过VPS公网IP或域名，来访问Hexo Blog了。<br>比如我的，<a href=\"https://www.sun-is.me\" target=\"_blank\" rel=\"external\">https://www.sun-is.me</a></p>\n","excerpt":"","more":"<p>Hexo在VPS上部署的笔记。</p>\n<hr>\n<h1 id=\"本地生成RSA-Key，拷贝至VPS，无密码登录\"><a href=\"#本地生成RSA-Key，拷贝至VPS，无密码登录\" class=\"headerlink\" title=\"本地生成RSA Key，拷贝至VPS，无密码登录\"></a>本地生成RSA Key，拷贝至VPS，无密码登录</h1><h2 id=\"Step1-本地创建RSA-Key-Pair\"><a href=\"#Step1-本地创建RSA-Key-Pair\" class=\"headerlink\" title=\"Step1 本地创建RSA Key Pair\"></a>Step1 本地创建RSA Key Pair</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-t type<ul>\n<li>指定要创建的密钥类型。可以使用：”rsa1”(SSH-1) “rsa”(SSH-2) “dsa”(SSH-2)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"Step2-存储Keys并设置密码-可选\"><a href=\"#Step2-存储Keys并设置密码-可选\" class=\"headerlink\" title=\"Step2 存储Keys并设置密码(可选)\"></a>Step2 存储Keys并设置密码(可选)</h2><p>第一步结束后，会出现下述问题：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Enter file in which to save the key (/home/demo/.ssh/id_rsa):</span><br></pre></td></tr></table></figure></p>\n<p>只需要连续按回车，就会在默认位置无密码产生keys。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Enter file in which to save the key (/home/demo/.ssh/id_rsa):</span><br><span class=\"line\">Enter passphrase (empty for no passphrase):</span><br></pre></td></tr></table></figure></p>\n<p>完整的步骤如下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\">Generating public/private rsa key pair.</span><br><span class=\"line\">Enter file in which to save the key (/home/demo/.ssh/id_rsa):</span><br><span class=\"line\">Enter passphrase (empty for no passphrase):</span><br><span class=\"line\">Enter same passphrase again:</span><br><span class=\"line\">Your identification has been saved in /home/demo/.ssh/id_rsa.</span><br><span class=\"line\">Your public key has been saved in /home/demo/.ssh/id_rsa.pub.</span><br><span class=\"line\">The key fingerprint is:</span><br><span class=\"line\">4a:dd:0a:c6:35:4e:3f:ed:27:38:8c:74:44:4d:93:67 demo@a</span><br><span class=\"line\">The key&apos;s randomart image is:</span><br><span class=\"line\">+--[ RSA 2048]----+</span><br><span class=\"line\">|          .oo.   |</span><br><span class=\"line\">|         .  o.E  |</span><br><span class=\"line\">|        + .  o   |</span><br><span class=\"line\">|     . = = .     |</span><br><span class=\"line\">|      = S = .    |</span><br><span class=\"line\">|     o + = +     |</span><br><span class=\"line\">|      . o + o .  |</span><br><span class=\"line\">|           . o   |</span><br><span class=\"line\">|                 |</span><br><span class=\"line\">+-----------------+</span><br></pre></td></tr></table></figure></p>\n<p>其中，公共key是<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/home/demo/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure></p>\n<p>私有key是<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/home/demo/.ssh/id_rsa</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Step3-拷贝共有key至VPS\"><a href=\"#Step3-拷贝共有key至VPS\" class=\"headerlink\" title=\"Step3 拷贝共有key至VPS\"></a>Step3 拷贝共有key至VPS</h2><p>通过ssh-copy-id可以拷贝共有key至VPS<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-copy-id user@123.45.56.78</span><br></pre></td></tr></table></figure></p>\n<p>如果没有ssh-copy-id，比如mac osx，可以通过下面的方法安装<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -L https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/install.sh | sh</span><br></pre></td></tr></table></figure></p>\n<p>执行ssh-copy-id命令后，会出现如下结果<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The authenticity of host &apos;12.34.56.78 (12.34.56.78)&apos; can&apos;t be established.</span><br><span class=\"line\">RSA key fingerprint is b1:2d:33:67:ce:35:4d:5f:f3:a8:cd:c0:c4:48:86:12.</span><br><span class=\"line\">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class=\"line\">Warning: Permanently added &apos;12.34.56.78&apos; (RSA) to the list of known hosts.</span><br><span class=\"line\">user@12.34.56.78&apos;s password:</span><br><span class=\"line\">Now try logging into the machine, with &quot;ssh &apos;user@12.34.56.78&apos;&quot;, and check in:</span><br><span class=\"line\"></span><br><span class=\"line\">  ~/.ssh/authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">to make sure we haven&apos;t added extra keys that you weren&apos;t expecting.</span><br></pre></td></tr></table></figure></p>\n<p>现在就可已通过<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh user@12.34.56.78</span><br></pre></td></tr></table></figure></p>\n<p>无密码登录VPS了。</p>\n<h2 id=\"Step4-配置VPS，禁止ssh密码root登录-可选\"><a href=\"#Step4-配置VPS，禁止ssh密码root登录-可选\" class=\"headerlink\" title=\"Step4 配置VPS，禁止ssh密码root登录(可选)\"></a>Step4 配置VPS，禁止ssh密码root登录(可选)</h2><p>首先登录VPS，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh user@12.34.56.78</span><br></pre></td></tr></table></figure></p>\n<p>然后修改配置文件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo nano /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></p>\n<p>找到PermitRootLogin所在处，并修改为<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PermitRootLogin without-password</span><br></pre></td></tr></table></figure></p>\n<p>最后，重载ssh<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reload ssh</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"VPS新建空Git-Repo，用Hook在push时部署\"><a href=\"#VPS新建空Git-Repo，用Hook在push时部署\" class=\"headerlink\" title=\"VPS新建空Git Repo，用Hook在push时部署\"></a>VPS新建空Git Repo，用Hook在push时部署</h1><h2 id=\"VPS新建空Blog-Git-Repo\"><a href=\"#VPS新建空Blog-Git-Repo\" class=\"headerlink\" title=\"VPS新建空Blog Git Repo\"></a>VPS新建空Blog Git Repo</h2><p>创建静态blog目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /var/www/blog</span><br></pre></td></tr></table></figure></p>\n<p>创建git repo目录<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /var/www/repo</span><br></pre></td></tr></table></figure></p>\n<p>进入repo目录，初始化空repo<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /var/www/repo</span><br><span class=\"line\">git init --bare</span><br><span class=\"line\">tree -L 1 repo</span><br><span class=\"line\">    repo/</span><br><span class=\"line\">    ├── branches</span><br><span class=\"line\">    ├── config</span><br><span class=\"line\">    ├── description</span><br><span class=\"line\">    ├── HEAD</span><br><span class=\"line\">    ├── hooks</span><br><span class=\"line\">    ├── index</span><br><span class=\"line\">    ├── info</span><br><span class=\"line\">    ├── objects</span><br><span class=\"line\">    └── refs</span><br></pre></td></tr></table></figure></p>\n<p>–bare 的意思是该目录只作为版本控制，但是不实际包含源代码文件。</p>\n<h2 id=\"写hook，分别部署版本控制和代码文件\"><a href=\"#写hook，分别部署版本控制和代码文件\" class=\"headerlink\" title=\"写hook，分别部署版本控制和代码文件\"></a>写hook，分别部署版本控制和代码文件</h2><p>进入hooks目录，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd hooks</span><br></pre></td></tr></table></figure></p>\n<p>创建post-receive文件，<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim post-receive</span><br></pre></td></tr></table></figure></p>\n<p>并写入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#!/bin/sh</span><br><span class=\"line\">git --work-tree=/var/www/blog --git-dir=/var/repo checkout -f</span><br></pre></td></tr></table></figure></p>\n<ul>\n<li>这里的参数<ul>\n<li>–work-tree：本地push后remote端最新版代码存放文件夹</li>\n<li>–work-dir：本地push后remote端版代控制相关文件存放处</li>\n</ul>\n</li>\n</ul>\n<p>最后设置权限<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x post-receive</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h1 id=\"本地添加remote，push\"><a href=\"#本地添加remote，push\" class=\"headerlink\" title=\"本地添加remote，push\"></a>本地添加remote，push</h1><p>在本地机，进入hexo的目录，比如<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ~/blog</span><br></pre></td></tr></table></figure></p>\n<p>接着添加代号XXX的remote<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add XXX ssh://user@12.34.56.78/var/www/repo</span><br></pre></td></tr></table></figure></p>\n<p>今后，用hexo生成静态文件后，push至VPS<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo g</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &quot;我的第一篇博客&quot;</span><br><span class=\"line\">git push XXX master</span><br></pre></td></tr></table></figure></p>\n<p>即可将版本信息push到VPS的/var/www/repo，<br>并将最新版代码push到VPS的/var/www/blog。</p>\n<hr>\n<h1 id=\"VPS安装Nginx\"><a href=\"#VPS安装Nginx\" class=\"headerlink\" title=\"VPS安装Nginx\"></a>VPS安装Nginx</h1><p>首先，安装nginx<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install nginx</span><br></pre></td></tr></table></figure></p>\n<p>然后查询VPS公网IP<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip addr show eth0 | grep inet | awk &apos;&#123; print $2; &#125;&apos; | sed &apos;s/\\/.*$//&apos;</span><br></pre></td></tr></table></figure></p>\n<p>Nginx动作确认<br>通过浏览器访问VPS公网IP，如果有域名，可以设置<a href=\"https://www.digitalocean.com/community/tutorials/how-to-set-up-a-host-name-with-digitalocean\">DigitalOcean</a>等DNS服务商。<br>如果一切正常，浏览<a href=\"http://server_domain_name_or_IP后可见如下结果\">http://server_domain_name_or_IP后可见如下结果</a><br><img src=\"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQL3gkKlCzKAnBJjdy9vCLnEciVZ4LY3Euu9yya-gVFImPsB4xlfw\" alt=\"nginx\"></p>\n<ul>\n<li><p>nginx相关基本操作</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service nginx stop     # 停止</span><br><span class=\"line\">sudo service nginx start    # 启动</span><br><span class=\"line\">sudo service nginx restart  # 重启</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>确认nginx在reboot后自启动</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo update-rc.d nginx defaults</span><br><span class=\"line\">    System start/stop links for /etc/init.d/nginx already exist.</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"配置nginx，最终可通过公网访问静态Hexo-Blog\"><a href=\"#配置nginx，最终可通过公网访问静态Hexo-Blog\" class=\"headerlink\" title=\"配置nginx，最终可通过公网访问静态Hexo Blog\"></a>配置nginx，最终可通过公网访问静态Hexo Blog</h1><p>编辑下述文件<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/nginx/conf.d/default.conf</span><br></pre></td></tr></table></figure></p>\n<p>加入<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server &#123;</span><br><span class=\"line\">    # 写上Hexo博客生成文件夹地址</span><br><span class=\"line\">    root /var/www/blog/public;</span><br><span class=\"line\">    index index.html index.htm;</span><br><span class=\"line\"></span><br><span class=\"line\">    # 写上自己的VPS的域名或IP</span><br><span class=\"line\">    server_name www.XXX.XXX XXX.XXX *.XXX.XXX;</span><br><span class=\"line\"></span><br><span class=\"line\">    location / &#123;</span><br><span class=\"line\">        try_files $uri $uri/ /index.html;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>重启nginx<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo service nginx restart</span><br></pre></td></tr></table></figure></p>\n<p>终于，可以通过VPS公网IP或域名，来访问Hexo Blog了。<br>比如我的，<a href=\"https://www.sun-is.me\">https://www.sun-is.me</a></p>\n"},{"title":"Thin Plate Spline","date":"2016-04-24T08:05:32.000Z","_content":"\n非刚体形变常用算法。\n\n------\n\n# Thin Plate Spline\n\n简单来说，TPS是一种$ f: \\mathbb R^K → \\mathbb R^L $的座标变换。\n此变换包含两部分，第一是Affine $f\\_A(x)$, 第二是Kernel $f\\_K(x)$。\n\n完整的TPS如下:\n\n$$\nf(x)=f\\_A(x)+f\\_K(x)=\\underbrace{Ax+b}\\_{\\text{Affine}}+\\overbrace{\\sum\\_{n=1}^N w^{(n)} \\varphi(x^{(n)}, x)}^{\\text{Kernel}}\n\\tag{1}\n$$\n其中，\n\n$x$是变换前的K维座标；$f(x)$是变换后L维新座标；$x^{(n)}$是K维控制点，总共N个；$\\varphi()$是核函数。\n如此，便实现了$ \\mathbb R^K→ \\mathbb R^L $的变换。\n\n变换后的第$i$维$(i=1,...,L)$：\n\n$$\nf\\_i(x)=\\sum\\_{j=1}^K A\\_{ij}+b\\_i+\\sum\\_{n=1}^N W\\_{in}\\varphi(x^{(n)}, x)\n\\tag{2}\n$$\n\n------\n\n# TPS的能量函数1\n\nTPS的能量函数包含数据项Data和平滑项TPS：\n\n$$\nE(f) = E\\_{Data} + \\lambda E\\_{TPS} = \\underbrace{\\sum\\_{n=1}^N ||y^{(n)}-f(x)^{(n)}||^2}\\_{\\text{Data项}} + \\overbrace{\\lambda \\int\\_{\\mathbb R^K} dx||D^2f(x)||\\_{Frob.}}^{\\text{TPS平滑项}}\n\\tag{3}\n$$\n\n其中，\n\n- $\\lambda$是平滑项和数据项的平衡系数。\n- $y^{(n)}$是变换后的\\_L\\_维控制点，与变换前的\\_K\\_维控制点$x^{(n)}$一一对应。\n- 数据项比较简单，用来表征控制点的误差。\n- 平滑项比较复杂，用来表征变换后数据的平滑性。\n\n平滑项的具体定义为TPS变换$f(x)$二次微分$[D^2f(x)]\\_{ijk}$\n\n$$\n[D^2f(x)]\\_{ijk} = \\frac{\\partial^2 f\\_i(x)}{\\partial x\\_j \\partial x\\_k}\n\\tag{4}\n$$\n\n的[Frobenius范数](http://mathworld.wolfram.com/FrobeniusNorm.html)累加和$||D^2f(x)||\\_{Frob.}$\n\n$$\n||D^2f(x)||\\_{Frob.} = \\sum\\_{i=1}^L \\sum\\_{j=1}^K \\sum\\_{k=1}^K |\\frac{\\partial^2}{\\partial x\\_j \\partial x\\_k}f\\_i(x)|^2\n\\tag{5}\n$$\n\n在原始K维空间中的积分$\\int\\_{\\mathbb R^K} dx||D^2f(x)||\\_{Frob.}$。具体的计算见下节。\n\n------\n\n# 基于核函数的TPS平滑项\n首先定义一下核函数:\n\n$$\n\\varphi(x, x^,) =\n\\begin{cases}\nr^4-Klnr & \\text{(K为基数)} \\\\\\\\\nr^4-K & \\text{(K为偶数)}\n\\end{cases} \\\\\\\\\n\\tag{6}\n$$\n\n其中$r=||x-x^,||$。\n接着处理原始K维空间中的积分$\\int\\_{\\mathbb R^K} dx||D^2f(x)||\\_{Frob.}$：\n\n$$\nE\\_{TPS}=\\int\\_{\\mathbb R^K}dx||D^2f(x)||\\_{Frob.}=\\int\\_{\\mathbb R^K}dx\\sum\\_{i=1}^L\\sum\\_{j=1}^K\\sum\\_{k=1}^K|\\frac {\\partial^2} {\\partial x\\_j \\partial x\\_k} f\\_i (x)|^2\n\\tag{7}\n$$\n\n$$\n=\\int\\_{\\mathbb R^K}dx\\sum\\_{i=1}^L\\sum\\_{j=1}^K\\sum\\_{k=1}^K|\\frac {\\partial^2} {\\partial x\\_j \\partial x\\_k} \\sum\\_{n=1}^N W\\_{in} \\varphi(x^{(n)}, x) |^2\n\\tag{8}\n$$\n\n$$\n= \\mathbf Tr( \\mathbf {W \\phi W^T}) = \\sum\\_{i=1}^L \\sum\\_{n=1}^N \\sum\\_{m=1}^N W\\_{in} \\phi\\_{mn} W\\_{im}\n\\tag{9}\n$$\n\n其中$\\phi\\_{mn}=\\varphi(||x^{(n)}-x^{(m)}||)$。\n\n------\n\n# TPS能量函数2\n\n把式(1)，式(9)，以及核函数的定义带入能量函数(3):\n\n$$\nE(f)=E\\_{Data}+\\lambda E\\_{TPS}\n\\tag{10}\n$$\n\n$$\n= \\sum\\_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum\\_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\mathbf Tr( \\mathbf {W \\phi W^T})\n\\tag{11}\n$$\n\n$$\n= \\sum\\_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum\\_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\sum\\_{i=1}^L \\sum\\_{n=1}^N \\sum\\_{m=1}^N W\\_{in} \\phi\\_{mn} W\\_{im}\n\\tag{12}\n$$\n\n其中，\n\n- $Y\\_{in}$ 是变换后的第n个控制点的第i维(共L维)。\n- $X\\_{jn}$ 是变换前的第n个控制点的第j维(共K维)。\n\n如式(12)所示，TPS的能量函数最终归结为关于三个变量$A\\_{ij}, b\\_i, W\\_{in}$的二次函数。\n\n- 第一项$E\\_{Data}$明显是关于变量($A\\_{ij}, b\\_i$)下突二次函数。\n- 第二项$E\\_{TPS}$可以看作关于变量$W$的正系数($\\mathbf \\phi$)连加下突二次($W\\_{in}W\\_{im}$)函数。\n\n两项都下突，TPS能量函数的最小值就可能存在解析解。\n\n------\n\n# 能量函数最小值\n\n首先对三个变量$A\\_{ij}, b\\_i, W\\_{in}$分别求偏导:\n\n$$\n\\frac {\\partial E(f)} {\\partial A\\_{ij}} = -2 \\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) X\\_{jn}\n\\tag{13}\n$$\n\n$$\n\\frac {\\partial E(f)} {\\partial b\\_i} = -2 \\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln})\n\\tag{14}\n$$\n\n$$\n\\frac {\\partial E(f)} {\\partial W\\_{im}} = -2 \\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) \\phi\\_{mn} + \\lambda \\sum\\_{n=1}^N (W\\_{in} \\phi\\_{mn} + \\phi\\_{nm} W\\_{in})\n\\tag{15}\n$$\n\n令$\\partial E(f) = 0$，并利用核函数$\\phi\\_{mn}=\\phi\\_{nm}$的对称性，可得:\n\n$$\n\\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) X\\_{jn} = 0 \\\\\n(i=1,...,L, j=1,...,K)\n\\tag{16}\n$$\n\n$$\n\\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) = 0 \\\\\n(i=1,...,L)\n\\tag{17}\n$$\n\n$$\n\\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln} - \\lambda W\\_{in}) \\phi\\_{mn} = 0 \\\\\n(i=1,...,L, m=1,...,N)\n\\tag{18}\n$$\n\n进一步整理可得($i,m,n$取值范围同上，下略):\n\n$$\n\\sum\\_{n=1}^N \\sum\\_{k=1}^K X\\_{kn} X\\_{jn} A\\_{ik} + \\sum\\_{n=1}^N X\\_{jn}b\\_i + \\sum\\_{n=1}^N \\sum\\_{l=1}^N X\\_{jn} \\phi\\_{ln} W\\_{il} = \\sum\\_{n=1}^N Y\\_{in} X\\_{jn}\n\\tag{19}\n$$\n\n$$\n\\sum\\_{n=1}^N \\sum\\_{k=1}^K X\\_{kn} A\\_{ik} + Nb\\_i + \\sum\\_{n=1}^N \\sum\\_{l=1}^N \\phi\\_{ln} W\\_{il} = \\sum\\_{n=1}^N Y\\_{in}\n\\tag{20}\n$$\n\n$$\n\\sum\\_{n=1}^N \\sum\\_{k=1}^K X\\_{kn} \\phi\\_{mn} A\\_{ik} + \\sum\\_{n=1}^N \\phi\\_{mn}b\\_i + \\sum\\_{l=1}^N (\\sum\\_{n=1}^N \\phi\\_{ln} \\phi\\_{mn} + \\lambda \\phi\\_{ml}) W\\_{il} = \\sum\\_{n=1}^N Y\\_{in} \\phi\\_{mn}\n\\tag{21}\n$$\n\n上式中各项可通过矩阵表示:\n\n- 变换前的K维控制点$X\\_{kn}$用$K*N$矩阵表示$\\mathbf X$。\n- 变换后的L维控制点$Y\\_{ln}$用$L*N$矩阵表示$\\mathbf Y$。\n- 变形系数$W\\_{ln}$可以表示为$L*N$矩阵$\\mathbf W$。\n- Affine变换系数$A\\_{lk}$可以表示为$L*K$矩阵$\\mathbf A$。\n- Affine变换系数$b\\_{l}$可以表示为$L*1$矩阵$\\mathbf b$。\n- 把所有控制点带入核函数$\\phi\\_{mn}(||x^{(n)-x^{(m)}}||)$，可得$N*N$核矩阵$\\mathbf \\phi$。\n\n将上述矩阵带入:\n\n$$\n\\sum\\_{k=1}^K A\\_{ik}[\\mathbf X \\mathbf X^T]\\_{kj} + bi[\\sum\\_{n=1}^N X\\_{jn}] + \\sum\\_{l=1}^N[\\mathbf X \\phi^T]\\_{jl}W\\_{il} = [\\mathbf Y \\mathbf X^T]\\_{ij}\n\\tag{22}\n$$\n\n$$\n\\sum\\_{k=1}^K A\\_{ik}[\\sum\\_{n=1}^N X\\_{kn}] + Nb\\_i + \\sum\\_{l=1}^N[\\sum\\_{n=1}^N \\phi\\_{ln}]W\\_{il} = [\\sum\\_{n=1}^N Y\\_{in}]\n\\tag{23}\n$$\n\n$$\n\\sum\\_{k=1}^K A\\_{ik}[\\mathbf X \\mathbf \\phi^T]\\_{km} + b\\_i[\\sum\\_{n=1}^N \\phi\\_{mn}] + \\sum\\_{l=1}^N[\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)]\\_ml W\\_{il} = [\\mathbf Y \\mathbf \\phi^T]\\_{im}\n\\tag{24}\n$$\n\n引入$N*1$的列向量$\\mathbf 1$:\n\n$$\n[\\mathbf A \\mathbf X \\mathbf X^T]\\_{ij} + [\\mathbf b(\\mathbf X \\mathbf 1)^T]\\_{ij} + [\\mathbf W \\mathbf \\phi \\mathbf X^T]\\_{ij} = [\\mathbf Y \\mathbf X^T]\\_{ij}\n\\tag{25}\n$$\n\n$$\n[\\mathbf A(\\mathbf X \\mathbf 1)]\\_i + [(\\mathbf 1^T \\mathbf 1)\\mathbf b]\\_i + [\\mathbf W \\mathbf \\phi \\mathbf 1]\\_i = [\\mathbf Y \\mathbf 1]\\_i\n\\tag{26}\n$$\n\n$$\n[\\mathbf A \\mathbf X \\mathbf \\phi^T]\\_{im} + [\\mathbf b (\\mathbf 1^T \\mathbf \\phi^T)]\\_{im} + [\\mathbf W (\\mathbf \\phi^T+\\lambda \\mathbf I)^T \\mathbf \\phi^T]\\_(im) = [\\mathbf  Y \\mathbf \\phi^T]\\_im\n\\tag{27}\n$$\n\n去掉上式中的所有的索引$i,j$，并转置:\n\n$$\n\\mathbf X^T \\mathbf X \\mathbf A^T + \\mathbf X \\mathbf 1 \\mathbf b^T + \\mathbf X \\mathbf \\phi^T \\mathbf W^T = \\mathbf X \\mathbf Y^T\n\\tag{28}\n$$\n\n$$\n\\mathbf 1^T \\mathbf X^T \\mathbf A^T + \\mathbf 1^T \\mathbf 1 \\mathbf b^T + \\mathbf 1^T \\mathbf \\phi^T \\mathbf W^T = \\mathbf 1^T \\mathbf Y^T\n\\tag{29}\n$$\n\n$$\n\\mathbf \\phi \\mathbf X^T \\mathbf A^T + \\mathbf \\phi \\mathbf 1 \\mathbf b^T + \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)\\mathbf W^T = \\mathbf \\phi \\mathbf Y^T\n\\tag{30}\n$$\n\n至此，已得到关于未知矩阵$\\mathbf A，\\mathbf b，\\mathbf W$的三个方程。\n进一步将上述方程组的系数和未知数分离(注意这里系数核未知数都是矩阵，不是常量):\n\n$$\n\\begin{bmatrix}\n\\mathbf X^T \\mathbf X & \\mathbf X \\mathbf 1 & \\mathbf X \\mathbf \\phi^T \\\\\\\\\n\\mathbf 1^T \\mathbf X^T & \\mathbf 1^T \\mathbf 1 & \\mathbf 1^T \\mathbf \\phi^T \\\\\\\\\n\\mathbf \\phi \\mathbf X^T & \\mathbf \\phi \\mathbf 1 & \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T \\\\\\\\\n\\mathbf W^T\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n\\mathbf X \\mathbf Y^T \\\\\\\\\n\\mathbf 1^T \\mathbf Y \\\\\\\\\n\\mathbf \\phi \\mathbf Y^T\n\\end{bmatrix}\n\\tag{31}\n$$\n\n继续整理:\n\n$$\n\\begin{bmatrix}\n\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I) & \\mathbf \\phi \\mathbf X^T & \\mathbf \\phi \\mathbf 1 \\\\\\\\\n\\mathbf X \\mathbf \\phi^T & \\mathbf X^T \\mathbf X & \\mathbf X \\mathbf 1 \\\\\\\\\n\\mathbf 1^T \\mathbf \\phi \\mathbf 1^T & \\mathbf 1 ^T \\mathbf X^T & \\mathbf 1^T \\mathbf 1\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf W^T \\\\\\\\\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\mathbf Y^T\n\\tag{32}\n$$\n\n接着将数据项和平滑项相关矩阵分离:\n\n$$\n\\left(\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf \\phi^T & \\mathbf X^T & \\mathbf 1\n\\end{bmatrix} + \\lambda\n\\begin{bmatrix}\n\\mathbf \\phi & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0\n\\end{bmatrix}\n\\right)\n\\begin{bmatrix}\n\\mathbf W^T \\\\\\\\\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T\n\\end{bmatrix} =\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\mathbf Y^T\n\\tag{33}\n$$\n\n最后将未知矩阵放左边，其余部分放右边:\n\n$$\n\\begin{bmatrix}\n\\mathbf W^T \\\\\\\\\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T\n\\end{bmatrix} =\n\\left(\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf \\phi^T & \\mathbf X^T & \\mathbf 1\n\\end{bmatrix} + \\lambda\n\\begin{bmatrix}\n\\mathbf \\phi & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0\n\\end{bmatrix}\n\\right)^{-1}\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\mathbf Y^T\n\\tag{34}\n$$\n\n式(34)的计算结果，即为TPS能量函数最小值的参数。\n得到此参数后，便可通过式(1)对任意K维座标$x$进行变换，得到新的L维座标$f(x)$。\n\n------\n\n# References\n\n[1]. Thin plate spline (Wikipedia).\n[2]. Chui, Haili, and Anand Rangarajan. “A new point matching algorithm for non-rigid registration.”Computer Vision and Image Understanding 89.2 (2003): 114-141.\n[3]. Wood, Simon N. “Thin plate regression splines.” Journal of the Royal Statistical Society: Series B (Statistical Methodology) 65.1 (2003): 95-114.\n\n------\n\n# 附录(变量索引)\n\n- (知) K: 变换前控制点$X\\_{kn}$的维数。\n- (知) L: 变换后控制点$Y\\_{ln}$的维数。\n- (知) $\\mathbf x^{(n)}$: 变换前的K维控制点(K*1)。\n- (知) $\\mathbf y^{(n)}$: 变换后的L维控制点(L*1)。\n- (知) $\\mathbf X$: 变换前的所有控制点的$K*N$矩阵表示。\n- (知) $\\mathbf Y$: 变换后的所有控制点的$L*N$矩阵表示。\n- (知) $\\mathbf \\phi$: 所有控制点带入核函数$\\phi\\_{mn}(||x^{(n)-x^{(m)}}||)$所得$N*N$核矩阵。\n- (未) $\\mathbf W$: 变形系数$W\\_{ln}$的$L*N$矩阵表示。\n- (未) $\\mathbf A$: Affine变换系数$A\\_{lk}$的$L*K$矩阵表示。\n- (未) $\\mathbf b$: Affine变换系数$b\\_{l}$的$L*1$矩阵表示。\n","source":"_posts/20160424_sun_ThinPlateSpline.md","raw":"---\ntitle: Thin Plate Spline\ndate: 2016-04-24 18:05:32\ntags: TPS\ncategories: 数学\n---\n\n非刚体形变常用算法。\n\n------\n\n# Thin Plate Spline\n\n简单来说，TPS是一种$ f: \\mathbb R^K → \\mathbb R^L $的座标变换。\n此变换包含两部分，第一是Affine $f\\_A(x)$, 第二是Kernel $f\\_K(x)$。\n\n完整的TPS如下:\n\n$$\nf(x)=f\\_A(x)+f\\_K(x)=\\underbrace{Ax+b}\\_{\\text{Affine}}+\\overbrace{\\sum\\_{n=1}^N w^{(n)} \\varphi(x^{(n)}, x)}^{\\text{Kernel}}\n\\tag{1}\n$$\n其中，\n\n$x$是变换前的K维座标；$f(x)$是变换后L维新座标；$x^{(n)}$是K维控制点，总共N个；$\\varphi()$是核函数。\n如此，便实现了$ \\mathbb R^K→ \\mathbb R^L $的变换。\n\n变换后的第$i$维$(i=1,...,L)$：\n\n$$\nf\\_i(x)=\\sum\\_{j=1}^K A\\_{ij}+b\\_i+\\sum\\_{n=1}^N W\\_{in}\\varphi(x^{(n)}, x)\n\\tag{2}\n$$\n\n------\n\n# TPS的能量函数1\n\nTPS的能量函数包含数据项Data和平滑项TPS：\n\n$$\nE(f) = E\\_{Data} + \\lambda E\\_{TPS} = \\underbrace{\\sum\\_{n=1}^N ||y^{(n)}-f(x)^{(n)}||^2}\\_{\\text{Data项}} + \\overbrace{\\lambda \\int\\_{\\mathbb R^K} dx||D^2f(x)||\\_{Frob.}}^{\\text{TPS平滑项}}\n\\tag{3}\n$$\n\n其中，\n\n- $\\lambda$是平滑项和数据项的平衡系数。\n- $y^{(n)}$是变换后的\\_L\\_维控制点，与变换前的\\_K\\_维控制点$x^{(n)}$一一对应。\n- 数据项比较简单，用来表征控制点的误差。\n- 平滑项比较复杂，用来表征变换后数据的平滑性。\n\n平滑项的具体定义为TPS变换$f(x)$二次微分$[D^2f(x)]\\_{ijk}$\n\n$$\n[D^2f(x)]\\_{ijk} = \\frac{\\partial^2 f\\_i(x)}{\\partial x\\_j \\partial x\\_k}\n\\tag{4}\n$$\n\n的[Frobenius范数](http://mathworld.wolfram.com/FrobeniusNorm.html)累加和$||D^2f(x)||\\_{Frob.}$\n\n$$\n||D^2f(x)||\\_{Frob.} = \\sum\\_{i=1}^L \\sum\\_{j=1}^K \\sum\\_{k=1}^K |\\frac{\\partial^2}{\\partial x\\_j \\partial x\\_k}f\\_i(x)|^2\n\\tag{5}\n$$\n\n在原始K维空间中的积分$\\int\\_{\\mathbb R^K} dx||D^2f(x)||\\_{Frob.}$。具体的计算见下节。\n\n------\n\n# 基于核函数的TPS平滑项\n首先定义一下核函数:\n\n$$\n\\varphi(x, x^,) =\n\\begin{cases}\nr^4-Klnr & \\text{(K为基数)} \\\\\\\\\nr^4-K & \\text{(K为偶数)}\n\\end{cases} \\\\\\\\\n\\tag{6}\n$$\n\n其中$r=||x-x^,||$。\n接着处理原始K维空间中的积分$\\int\\_{\\mathbb R^K} dx||D^2f(x)||\\_{Frob.}$：\n\n$$\nE\\_{TPS}=\\int\\_{\\mathbb R^K}dx||D^2f(x)||\\_{Frob.}=\\int\\_{\\mathbb R^K}dx\\sum\\_{i=1}^L\\sum\\_{j=1}^K\\sum\\_{k=1}^K|\\frac {\\partial^2} {\\partial x\\_j \\partial x\\_k} f\\_i (x)|^2\n\\tag{7}\n$$\n\n$$\n=\\int\\_{\\mathbb R^K}dx\\sum\\_{i=1}^L\\sum\\_{j=1}^K\\sum\\_{k=1}^K|\\frac {\\partial^2} {\\partial x\\_j \\partial x\\_k} \\sum\\_{n=1}^N W\\_{in} \\varphi(x^{(n)}, x) |^2\n\\tag{8}\n$$\n\n$$\n= \\mathbf Tr( \\mathbf {W \\phi W^T}) = \\sum\\_{i=1}^L \\sum\\_{n=1}^N \\sum\\_{m=1}^N W\\_{in} \\phi\\_{mn} W\\_{im}\n\\tag{9}\n$$\n\n其中$\\phi\\_{mn}=\\varphi(||x^{(n)}-x^{(m)}||)$。\n\n------\n\n# TPS能量函数2\n\n把式(1)，式(9)，以及核函数的定义带入能量函数(3):\n\n$$\nE(f)=E\\_{Data}+\\lambda E\\_{TPS}\n\\tag{10}\n$$\n\n$$\n= \\sum\\_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum\\_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\mathbf Tr( \\mathbf {W \\phi W^T})\n\\tag{11}\n$$\n\n$$\n= \\sum\\_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum\\_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\sum\\_{i=1}^L \\sum\\_{n=1}^N \\sum\\_{m=1}^N W\\_{in} \\phi\\_{mn} W\\_{im}\n\\tag{12}\n$$\n\n其中，\n\n- $Y\\_{in}$ 是变换后的第n个控制点的第i维(共L维)。\n- $X\\_{jn}$ 是变换前的第n个控制点的第j维(共K维)。\n\n如式(12)所示，TPS的能量函数最终归结为关于三个变量$A\\_{ij}, b\\_i, W\\_{in}$的二次函数。\n\n- 第一项$E\\_{Data}$明显是关于变量($A\\_{ij}, b\\_i$)下突二次函数。\n- 第二项$E\\_{TPS}$可以看作关于变量$W$的正系数($\\mathbf \\phi$)连加下突二次($W\\_{in}W\\_{im}$)函数。\n\n两项都下突，TPS能量函数的最小值就可能存在解析解。\n\n------\n\n# 能量函数最小值\n\n首先对三个变量$A\\_{ij}, b\\_i, W\\_{in}$分别求偏导:\n\n$$\n\\frac {\\partial E(f)} {\\partial A\\_{ij}} = -2 \\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) X\\_{jn}\n\\tag{13}\n$$\n\n$$\n\\frac {\\partial E(f)} {\\partial b\\_i} = -2 \\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln})\n\\tag{14}\n$$\n\n$$\n\\frac {\\partial E(f)} {\\partial W\\_{im}} = -2 \\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) \\phi\\_{mn} + \\lambda \\sum\\_{n=1}^N (W\\_{in} \\phi\\_{mn} + \\phi\\_{nm} W\\_{in})\n\\tag{15}\n$$\n\n令$\\partial E(f) = 0$，并利用核函数$\\phi\\_{mn}=\\phi\\_{nm}$的对称性，可得:\n\n$$\n\\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) X\\_{jn} = 0 \\\\\n(i=1,...,L, j=1,...,K)\n\\tag{16}\n$$\n\n$$\n\\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln}) = 0 \\\\\n(i=1,...,L)\n\\tag{17}\n$$\n\n$$\n\\sum\\_{n=1}^K (Y\\_{in} - \\sum\\_{k=1}^K A\\_{ik}X\\_{kn} - b\\_i - \\sum\\_{l=1}^N W\\_{il} \\phi\\_{ln} - \\lambda W\\_{in}) \\phi\\_{mn} = 0 \\\\\n(i=1,...,L, m=1,...,N)\n\\tag{18}\n$$\n\n进一步整理可得($i,m,n$取值范围同上，下略):\n\n$$\n\\sum\\_{n=1}^N \\sum\\_{k=1}^K X\\_{kn} X\\_{jn} A\\_{ik} + \\sum\\_{n=1}^N X\\_{jn}b\\_i + \\sum\\_{n=1}^N \\sum\\_{l=1}^N X\\_{jn} \\phi\\_{ln} W\\_{il} = \\sum\\_{n=1}^N Y\\_{in} X\\_{jn}\n\\tag{19}\n$$\n\n$$\n\\sum\\_{n=1}^N \\sum\\_{k=1}^K X\\_{kn} A\\_{ik} + Nb\\_i + \\sum\\_{n=1}^N \\sum\\_{l=1}^N \\phi\\_{ln} W\\_{il} = \\sum\\_{n=1}^N Y\\_{in}\n\\tag{20}\n$$\n\n$$\n\\sum\\_{n=1}^N \\sum\\_{k=1}^K X\\_{kn} \\phi\\_{mn} A\\_{ik} + \\sum\\_{n=1}^N \\phi\\_{mn}b\\_i + \\sum\\_{l=1}^N (\\sum\\_{n=1}^N \\phi\\_{ln} \\phi\\_{mn} + \\lambda \\phi\\_{ml}) W\\_{il} = \\sum\\_{n=1}^N Y\\_{in} \\phi\\_{mn}\n\\tag{21}\n$$\n\n上式中各项可通过矩阵表示:\n\n- 变换前的K维控制点$X\\_{kn}$用$K*N$矩阵表示$\\mathbf X$。\n- 变换后的L维控制点$Y\\_{ln}$用$L*N$矩阵表示$\\mathbf Y$。\n- 变形系数$W\\_{ln}$可以表示为$L*N$矩阵$\\mathbf W$。\n- Affine变换系数$A\\_{lk}$可以表示为$L*K$矩阵$\\mathbf A$。\n- Affine变换系数$b\\_{l}$可以表示为$L*1$矩阵$\\mathbf b$。\n- 把所有控制点带入核函数$\\phi\\_{mn}(||x^{(n)-x^{(m)}}||)$，可得$N*N$核矩阵$\\mathbf \\phi$。\n\n将上述矩阵带入:\n\n$$\n\\sum\\_{k=1}^K A\\_{ik}[\\mathbf X \\mathbf X^T]\\_{kj} + bi[\\sum\\_{n=1}^N X\\_{jn}] + \\sum\\_{l=1}^N[\\mathbf X \\phi^T]\\_{jl}W\\_{il} = [\\mathbf Y \\mathbf X^T]\\_{ij}\n\\tag{22}\n$$\n\n$$\n\\sum\\_{k=1}^K A\\_{ik}[\\sum\\_{n=1}^N X\\_{kn}] + Nb\\_i + \\sum\\_{l=1}^N[\\sum\\_{n=1}^N \\phi\\_{ln}]W\\_{il} = [\\sum\\_{n=1}^N Y\\_{in}]\n\\tag{23}\n$$\n\n$$\n\\sum\\_{k=1}^K A\\_{ik}[\\mathbf X \\mathbf \\phi^T]\\_{km} + b\\_i[\\sum\\_{n=1}^N \\phi\\_{mn}] + \\sum\\_{l=1}^N[\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)]\\_ml W\\_{il} = [\\mathbf Y \\mathbf \\phi^T]\\_{im}\n\\tag{24}\n$$\n\n引入$N*1$的列向量$\\mathbf 1$:\n\n$$\n[\\mathbf A \\mathbf X \\mathbf X^T]\\_{ij} + [\\mathbf b(\\mathbf X \\mathbf 1)^T]\\_{ij} + [\\mathbf W \\mathbf \\phi \\mathbf X^T]\\_{ij} = [\\mathbf Y \\mathbf X^T]\\_{ij}\n\\tag{25}\n$$\n\n$$\n[\\mathbf A(\\mathbf X \\mathbf 1)]\\_i + [(\\mathbf 1^T \\mathbf 1)\\mathbf b]\\_i + [\\mathbf W \\mathbf \\phi \\mathbf 1]\\_i = [\\mathbf Y \\mathbf 1]\\_i\n\\tag{26}\n$$\n\n$$\n[\\mathbf A \\mathbf X \\mathbf \\phi^T]\\_{im} + [\\mathbf b (\\mathbf 1^T \\mathbf \\phi^T)]\\_{im} + [\\mathbf W (\\mathbf \\phi^T+\\lambda \\mathbf I)^T \\mathbf \\phi^T]\\_(im) = [\\mathbf  Y \\mathbf \\phi^T]\\_im\n\\tag{27}\n$$\n\n去掉上式中的所有的索引$i,j$，并转置:\n\n$$\n\\mathbf X^T \\mathbf X \\mathbf A^T + \\mathbf X \\mathbf 1 \\mathbf b^T + \\mathbf X \\mathbf \\phi^T \\mathbf W^T = \\mathbf X \\mathbf Y^T\n\\tag{28}\n$$\n\n$$\n\\mathbf 1^T \\mathbf X^T \\mathbf A^T + \\mathbf 1^T \\mathbf 1 \\mathbf b^T + \\mathbf 1^T \\mathbf \\phi^T \\mathbf W^T = \\mathbf 1^T \\mathbf Y^T\n\\tag{29}\n$$\n\n$$\n\\mathbf \\phi \\mathbf X^T \\mathbf A^T + \\mathbf \\phi \\mathbf 1 \\mathbf b^T + \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)\\mathbf W^T = \\mathbf \\phi \\mathbf Y^T\n\\tag{30}\n$$\n\n至此，已得到关于未知矩阵$\\mathbf A，\\mathbf b，\\mathbf W$的三个方程。\n进一步将上述方程组的系数和未知数分离(注意这里系数核未知数都是矩阵，不是常量):\n\n$$\n\\begin{bmatrix}\n\\mathbf X^T \\mathbf X & \\mathbf X \\mathbf 1 & \\mathbf X \\mathbf \\phi^T \\\\\\\\\n\\mathbf 1^T \\mathbf X^T & \\mathbf 1^T \\mathbf 1 & \\mathbf 1^T \\mathbf \\phi^T \\\\\\\\\n\\mathbf \\phi \\mathbf X^T & \\mathbf \\phi \\mathbf 1 & \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T \\\\\\\\\n\\mathbf W^T\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n\\mathbf X \\mathbf Y^T \\\\\\\\\n\\mathbf 1^T \\mathbf Y \\\\\\\\\n\\mathbf \\phi \\mathbf Y^T\n\\end{bmatrix}\n\\tag{31}\n$$\n\n继续整理:\n\n$$\n\\begin{bmatrix}\n\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I) & \\mathbf \\phi \\mathbf X^T & \\mathbf \\phi \\mathbf 1 \\\\\\\\\n\\mathbf X \\mathbf \\phi^T & \\mathbf X^T \\mathbf X & \\mathbf X \\mathbf 1 \\\\\\\\\n\\mathbf 1^T \\mathbf \\phi \\mathbf 1^T & \\mathbf 1 ^T \\mathbf X^T & \\mathbf 1^T \\mathbf 1\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf W^T \\\\\\\\\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\mathbf Y^T\n\\tag{32}\n$$\n\n接着将数据项和平滑项相关矩阵分离:\n\n$$\n\\left(\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf \\phi^T & \\mathbf X^T & \\mathbf 1\n\\end{bmatrix} + \\lambda\n\\begin{bmatrix}\n\\mathbf \\phi & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0\n\\end{bmatrix}\n\\right)\n\\begin{bmatrix}\n\\mathbf W^T \\\\\\\\\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T\n\\end{bmatrix} =\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\mathbf Y^T\n\\tag{33}\n$$\n\n最后将未知矩阵放左边，其余部分放右边:\n\n$$\n\\begin{bmatrix}\n\\mathbf W^T \\\\\\\\\n\\mathbf A^T \\\\\\\\\n\\mathbf b^T\n\\end{bmatrix} =\n\\left(\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\begin{bmatrix}\n\\mathbf \\phi^T & \\mathbf X^T & \\mathbf 1\n\\end{bmatrix} + \\lambda\n\\begin{bmatrix}\n\\mathbf \\phi & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0 \\\\\\\\\n\\mathbf 0 & \\mathbf 0 & \\mathbf 0\n\\end{bmatrix}\n\\right)^{-1}\n\\begin{bmatrix}\n\\mathbf \\phi \\\\\\\\\n\\mathbf X \\\\\\\\\n\\mathbf 1^T\n\\end{bmatrix}\n\\mathbf Y^T\n\\tag{34}\n$$\n\n式(34)的计算结果，即为TPS能量函数最小值的参数。\n得到此参数后，便可通过式(1)对任意K维座标$x$进行变换，得到新的L维座标$f(x)$。\n\n------\n\n# References\n\n[1]. Thin plate spline (Wikipedia).\n[2]. Chui, Haili, and Anand Rangarajan. “A new point matching algorithm for non-rigid registration.”Computer Vision and Image Understanding 89.2 (2003): 114-141.\n[3]. Wood, Simon N. “Thin plate regression splines.” Journal of the Royal Statistical Society: Series B (Statistical Methodology) 65.1 (2003): 95-114.\n\n------\n\n# 附录(变量索引)\n\n- (知) K: 变换前控制点$X\\_{kn}$的维数。\n- (知) L: 变换后控制点$Y\\_{ln}$的维数。\n- (知) $\\mathbf x^{(n)}$: 变换前的K维控制点(K*1)。\n- (知) $\\mathbf y^{(n)}$: 变换后的L维控制点(L*1)。\n- (知) $\\mathbf X$: 变换前的所有控制点的$K*N$矩阵表示。\n- (知) $\\mathbf Y$: 变换后的所有控制点的$L*N$矩阵表示。\n- (知) $\\mathbf \\phi$: 所有控制点带入核函数$\\phi\\_{mn}(||x^{(n)-x^{(m)}}||)$所得$N*N$核矩阵。\n- (未) $\\mathbf W$: 变形系数$W\\_{ln}$的$L*N$矩阵表示。\n- (未) $\\mathbf A$: Affine变换系数$A\\_{lk}$的$L*K$矩阵表示。\n- (未) $\\mathbf b$: Affine变换系数$b\\_{l}$的$L*1$矩阵表示。\n","slug":"20160424_sun_ThinPlateSpline","published":1,"updated":"2016-05-02T10:48:50.140Z","_id":"cing328zd000ebwfgtamh122s","comments":1,"layout":"post","photos":[],"link":"","content":"<p>非刚体形变常用算法。</p>\n<hr>\n<h1 id=\"Thin-Plate-Spline\"><a href=\"#Thin-Plate-Spline\" class=\"headerlink\" title=\"Thin Plate Spline\"></a>Thin Plate Spline</h1><p>简单来说，TPS是一种$ f: \\mathbb R^K → \\mathbb R^L $的座标变换。<br>此变换包含两部分，第一是Affine $f_A(x)$, 第二是Kernel $f_K(x)$。</p>\n<p>完整的TPS如下:</p>\n<p>$$<br>f(x)=f_A(x)+f_K(x)=\\underbrace{Ax+b}_{\\text{Affine}}+\\overbrace{\\sum_{n=1}^N w^{(n)} \\varphi(x^{(n)}, x)}^{\\text{Kernel}}<br>\\tag{1}<br>$$<br>其中，</p>\n<p>$x$是变换前的K维座标；$f(x)$是变换后L维新座标；$x^{(n)}$是K维控制点，总共N个；$\\varphi()$是核函数。<br>如此，便实现了$ \\mathbb R^K→ \\mathbb R^L $的变换。</p>\n<p>变换后的第$i$维$(i=1,…,L)$：</p>\n<p>$$<br>f_i(x)=\\sum_{j=1}^K A_{ij}+b_i+\\sum_{n=1}^N W_{in}\\varphi(x^{(n)}, x)<br>\\tag{2}<br>$$</p>\n<hr>\n<h1 id=\"TPS的能量函数1\"><a href=\"#TPS的能量函数1\" class=\"headerlink\" title=\"TPS的能量函数1\"></a>TPS的能量函数1</h1><p>TPS的能量函数包含数据项Data和平滑项TPS：</p>\n<p>$$<br>E(f) = E_{Data} + \\lambda E_{TPS} = \\underbrace{\\sum_{n=1}^N ||y^{(n)}-f(x)^{(n)}||^2}_{\\text{Data项}} + \\overbrace{\\lambda \\int_{\\mathbb R^K} dx||D^2f(x)||_{Frob.}}^{\\text{TPS平滑项}}<br>\\tag{3}<br>$$</p>\n<p>其中，</p>\n<ul>\n<li>$\\lambda$是平滑项和数据项的平衡系数。</li>\n<li>$y^{(n)}$是变换后的_L_维控制点，与变换前的_K_维控制点$x^{(n)}$一一对应。</li>\n<li>数据项比较简单，用来表征控制点的误差。</li>\n<li>平滑项比较复杂，用来表征变换后数据的平滑性。</li>\n</ul>\n<p>平滑项的具体定义为TPS变换$f(x)$二次微分$[D^2f(x)]_{ijk}$</p>\n<p>$$<br>[D^2f(x)]_{ijk} = \\frac{\\partial^2 f_i(x)}{\\partial x_j \\partial x_k}<br>\\tag{4}<br>$$</p>\n<p>的<a href=\"http://mathworld.wolfram.com/FrobeniusNorm.html\" target=\"_blank\" rel=\"external\">Frobenius范数</a>累加和$||D^2f(x)||_{Frob.}$</p>\n<p>$$<br>||D^2f(x)||_{Frob.} = \\sum_{i=1}^L \\sum_{j=1}^K \\sum_{k=1}^K |\\frac{\\partial^2}{\\partial x_j \\partial x_k}f_i(x)|^2<br>\\tag{5}<br>$$</p>\n<p>在原始K维空间中的积分$\\int_{\\mathbb R^K} dx||D^2f(x)||_{Frob.}$。具体的计算见下节。</p>\n<hr>\n<h1 id=\"基于核函数的TPS平滑项\"><a href=\"#基于核函数的TPS平滑项\" class=\"headerlink\" title=\"基于核函数的TPS平滑项\"></a>基于核函数的TPS平滑项</h1><p>首先定义一下核函数:</p>\n<p>$$<br>\\varphi(x, x^,) =<br>\\begin{cases}<br>r^4-Klnr &amp; \\text{(K为基数)} \\\\<br>r^4-K &amp; \\text{(K为偶数)}<br>\\end{cases} \\\\<br>\\tag{6}<br>$$</p>\n<p>其中$r=||x-x^,||$。<br>接着处理原始K维空间中的积分$\\int_{\\mathbb R^K} dx||D^2f(x)||_{Frob.}$：</p>\n<p>$$<br>E_{TPS}=\\int_{\\mathbb R^K}dx||D^2f(x)||_{Frob.}=\\int_{\\mathbb R^K}dx\\sum_{i=1}^L\\sum_{j=1}^K\\sum_{k=1}^K|\\frac {\\partial^2} {\\partial x_j \\partial x_k} f_i (x)|^2<br>\\tag{7}<br>$$</p>\n<p>$$<br>=\\int_{\\mathbb R^K}dx\\sum_{i=1}^L\\sum_{j=1}^K\\sum_{k=1}^K|\\frac {\\partial^2} {\\partial x_j \\partial x_k} \\sum_{n=1}^N W_{in} \\varphi(x^{(n)}, x) |^2<br>\\tag{8}<br>$$</p>\n<p>$$<br>= \\mathbf Tr( \\mathbf {W \\phi W^T}) = \\sum_{i=1}^L \\sum_{n=1}^N \\sum_{m=1}^N W_{in} \\phi_{mn} W_{im}<br>\\tag{9}<br>$$</p>\n<p>其中$\\phi_{mn}=\\varphi(||x^{(n)}-x^{(m)}||)$。</p>\n<hr>\n<h1 id=\"TPS能量函数2\"><a href=\"#TPS能量函数2\" class=\"headerlink\" title=\"TPS能量函数2\"></a>TPS能量函数2</h1><p>把式(1)，式(9)，以及核函数的定义带入能量函数(3):</p>\n<p>$$<br>E(f)=E_{Data}+\\lambda E_{TPS}<br>\\tag{10}<br>$$</p>\n<p>$$<br>= \\sum_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\mathbf Tr( \\mathbf {W \\phi W^T})<br>\\tag{11}<br>$$</p>\n<p>$$<br>= \\sum_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\sum_{i=1}^L \\sum_{n=1}^N \\sum_{m=1}^N W_{in} \\phi_{mn} W_{im}<br>\\tag{12}<br>$$</p>\n<p>其中，</p>\n<ul>\n<li>$Y_{in}$ 是变换后的第n个控制点的第i维(共L维)。</li>\n<li>$X_{jn}$ 是变换前的第n个控制点的第j维(共K维)。</li>\n</ul>\n<p>如式(12)所示，TPS的能量函数最终归结为关于三个变量$A_{ij}, b_i, W_{in}$的二次函数。</p>\n<ul>\n<li>第一项$E_{Data}$明显是关于变量($A_{ij}, b_i$)下突二次函数。</li>\n<li>第二项$E_{TPS}$可以看作关于变量$W$的正系数($\\mathbf \\phi$)连加下突二次($W_{in}W_{im}$)函数。</li>\n</ul>\n<p>两项都下突，TPS能量函数的最小值就可能存在解析解。</p>\n<hr>\n<h1 id=\"能量函数最小值\"><a href=\"#能量函数最小值\" class=\"headerlink\" title=\"能量函数最小值\"></a>能量函数最小值</h1><p>首先对三个变量$A_{ij}, b_i, W_{in}$分别求偏导:</p>\n<p>$$<br>\\frac {\\partial E(f)} {\\partial A_{ij}} = -2 \\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) X_{jn}<br>\\tag{13}<br>$$</p>\n<p>$$<br>\\frac {\\partial E(f)} {\\partial b_i} = -2 \\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln})<br>\\tag{14}<br>$$</p>\n<p>$$<br>\\frac {\\partial E(f)} {\\partial W_{im}} = -2 \\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) \\phi_{mn} + \\lambda \\sum_{n=1}^N (W_{in} \\phi_{mn} + \\phi_{nm} W_{in})<br>\\tag{15}<br>$$</p>\n<p>令$\\partial E(f) = 0$，并利用核函数$\\phi_{mn}=\\phi_{nm}$的对称性，可得:</p>\n<p>$$<br>\\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) X_{jn} = 0 \\<br>(i=1,…,L, j=1,…,K)<br>\\tag{16}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) = 0 \\<br>(i=1,…,L)<br>\\tag{17}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln} - \\lambda W_{in}) \\phi_{mn} = 0 \\<br>(i=1,…,L, m=1,…,N)<br>\\tag{18}<br>$$</p>\n<p>进一步整理可得($i,m,n$取值范围同上，下略):</p>\n<p>$$<br>\\sum_{n=1}^N \\sum_{k=1}^K X_{kn} X_{jn} A_{ik} + \\sum_{n=1}^N X_{jn}b_i + \\sum_{n=1}^N \\sum_{l=1}^N X_{jn} \\phi_{ln} W_{il} = \\sum_{n=1}^N Y_{in} X_{jn}<br>\\tag{19}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^N \\sum_{k=1}^K X_{kn} A_{ik} + Nb_i + \\sum_{n=1}^N \\sum_{l=1}^N \\phi_{ln} W_{il} = \\sum_{n=1}^N Y_{in}<br>\\tag{20}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^N \\sum_{k=1}^K X_{kn} \\phi_{mn} A_{ik} + \\sum_{n=1}^N \\phi_{mn}b_i + \\sum_{l=1}^N (\\sum_{n=1}^N \\phi_{ln} \\phi_{mn} + \\lambda \\phi_{ml}) W_{il} = \\sum_{n=1}^N Y_{in} \\phi_{mn}<br>\\tag{21}<br>$$</p>\n<p>上式中各项可通过矩阵表示:</p>\n<ul>\n<li>变换前的K维控制点$X_{kn}$用$K*N$矩阵表示$\\mathbf X$。</li>\n<li>变换后的L维控制点$Y_{ln}$用$L*N$矩阵表示$\\mathbf Y$。</li>\n<li>变形系数$W_{ln}$可以表示为$L*N$矩阵$\\mathbf W$。</li>\n<li>Affine变换系数$A_{lk}$可以表示为$L*K$矩阵$\\mathbf A$。</li>\n<li>Affine变换系数$b_{l}$可以表示为$L*1$矩阵$\\mathbf b$。</li>\n<li>把所有控制点带入核函数$\\phi_{mn}(||x^{(n)-x^{(m)}}||)$，可得$N*N$核矩阵$\\mathbf \\phi$。</li>\n</ul>\n<p>将上述矩阵带入:</p>\n<p>$$<br>\\sum_{k=1}^K A_{ik}[\\mathbf X \\mathbf X^T]_{kj} + bi[\\sum_{n=1}^N X_{jn}] + \\sum_{l=1}^N[\\mathbf X \\phi^T]_{jl}W_{il} = [\\mathbf Y \\mathbf X^T]_{ij}<br>\\tag{22}<br>$$</p>\n<p>$$<br>\\sum_{k=1}^K A_{ik}[\\sum_{n=1}^N X_{kn}] + Nb_i + \\sum_{l=1}^N[\\sum_{n=1}^N \\phi_{ln}]W_{il} = [\\sum_{n=1}^N Y_{in}]<br>\\tag{23}<br>$$</p>\n<p>$$<br>\\sum_{k=1}^K A_{ik}[\\mathbf X \\mathbf \\phi^T]_{km} + b_i[\\sum_{n=1}^N \\phi_{mn}] + \\sum_{l=1}^N[\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)]_ml W_{il} = [\\mathbf Y \\mathbf \\phi^T]_{im}<br>\\tag{24}<br>$$</p>\n<p>引入$N*1$的列向量$\\mathbf 1$:</p>\n<p>$$<br>[\\mathbf A \\mathbf X \\mathbf X^T]_{ij} + [\\mathbf b(\\mathbf X \\mathbf 1)^T]_{ij} + [\\mathbf W \\mathbf \\phi \\mathbf X^T]_{ij} = [\\mathbf Y \\mathbf X^T]_{ij}<br>\\tag{25}<br>$$</p>\n<p>$$<br>[\\mathbf A(\\mathbf X \\mathbf 1)]_i + [(\\mathbf 1^T \\mathbf 1)\\mathbf b]_i + [\\mathbf W \\mathbf \\phi \\mathbf 1]_i = [\\mathbf Y \\mathbf 1]_i<br>\\tag{26}<br>$$</p>\n<p>$$<br>[\\mathbf A \\mathbf X \\mathbf \\phi^T]_{im} + [\\mathbf b (\\mathbf 1^T \\mathbf \\phi^T)]_{im} + [\\mathbf W (\\mathbf \\phi^T+\\lambda \\mathbf I)^T \\mathbf \\phi^T]_(im) = [\\mathbf  Y \\mathbf \\phi^T]_im<br>\\tag{27}<br>$$</p>\n<p>去掉上式中的所有的索引$i,j$，并转置:</p>\n<p>$$<br>\\mathbf X^T \\mathbf X \\mathbf A^T + \\mathbf X \\mathbf 1 \\mathbf b^T + \\mathbf X \\mathbf \\phi^T \\mathbf W^T = \\mathbf X \\mathbf Y^T<br>\\tag{28}<br>$$</p>\n<p>$$<br>\\mathbf 1^T \\mathbf X^T \\mathbf A^T + \\mathbf 1^T \\mathbf 1 \\mathbf b^T + \\mathbf 1^T \\mathbf \\phi^T \\mathbf W^T = \\mathbf 1^T \\mathbf Y^T<br>\\tag{29}<br>$$</p>\n<p>$$<br>\\mathbf \\phi \\mathbf X^T \\mathbf A^T + \\mathbf \\phi \\mathbf 1 \\mathbf b^T + \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)\\mathbf W^T = \\mathbf \\phi \\mathbf Y^T<br>\\tag{30}<br>$$</p>\n<p>至此，已得到关于未知矩阵$\\mathbf A，\\mathbf b，\\mathbf W$的三个方程。<br>进一步将上述方程组的系数和未知数分离(注意这里系数核未知数都是矩阵，不是常量):</p>\n<p>$$<br>\\begin{bmatrix}<br>\\mathbf X^T \\mathbf X &amp; \\mathbf X \\mathbf 1 &amp; \\mathbf X \\mathbf \\phi^T \\\\<br>\\mathbf 1^T \\mathbf X^T &amp; \\mathbf 1^T \\mathbf 1 &amp; \\mathbf 1^T \\mathbf \\phi^T \\\\<br>\\mathbf \\phi \\mathbf X^T &amp; \\mathbf \\phi \\mathbf 1 &amp; \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf A^T \\\\<br>\\mathbf b^T \\\\<br>\\mathbf W^T<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>\\mathbf X \\mathbf Y^T \\\\<br>\\mathbf 1^T \\mathbf Y \\\\<br>\\mathbf \\phi \\mathbf Y^T<br>\\end{bmatrix}<br>\\tag{31}<br>$$</p>\n<p>继续整理:</p>\n<p>$$<br>\\begin{bmatrix}<br>\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I) &amp; \\mathbf \\phi \\mathbf X^T &amp; \\mathbf \\phi \\mathbf 1 \\\\<br>\\mathbf X \\mathbf \\phi^T &amp; \\mathbf X^T \\mathbf X &amp; \\mathbf X \\mathbf 1 \\\\<br>\\mathbf 1^T \\mathbf \\phi \\mathbf 1^T &amp; \\mathbf 1 ^T \\mathbf X^T &amp; \\mathbf 1^T \\mathbf 1<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf W^T \\\\<br>\\mathbf A^T \\\\<br>\\mathbf b^T<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\mathbf Y^T<br>\\tag{32}<br>$$</p>\n<p>接着将数据项和平滑项相关矩阵分离:</p>\n<p>$$<br>\\left(<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf \\phi^T &amp; \\mathbf X^T &amp; \\mathbf 1<br>\\end{bmatrix} + \\lambda<br>\\begin{bmatrix}<br>\\mathbf \\phi &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0<br>\\end{bmatrix}<br>\\right)<br>\\begin{bmatrix}<br>\\mathbf W^T \\\\<br>\\mathbf A^T \\\\<br>\\mathbf b^T<br>\\end{bmatrix} =<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\mathbf Y^T<br>\\tag{33}<br>$$</p>\n<p>最后将未知矩阵放左边，其余部分放右边:</p>\n<p>$$<br>\\begin{bmatrix}<br>\\mathbf W^T \\\\<br>\\mathbf A^T \\\\<br>\\mathbf b^T<br>\\end{bmatrix} =<br>\\left(<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf \\phi^T &amp; \\mathbf X^T &amp; \\mathbf 1<br>\\end{bmatrix} + \\lambda<br>\\begin{bmatrix}<br>\\mathbf \\phi &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0<br>\\end{bmatrix}<br>\\right)^{-1}<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\mathbf Y^T<br>\\tag{34}<br>$$</p>\n<p>式(34)的计算结果，即为TPS能量函数最小值的参数。<br>得到此参数后，便可通过式(1)对任意K维座标$x$进行变换，得到新的L维座标$f(x)$。</p>\n<hr>\n<h1 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h1><p>[1]. Thin plate spline (Wikipedia).<br>[2]. Chui, Haili, and Anand Rangarajan. “A new point matching algorithm for non-rigid registration.”Computer Vision and Image Understanding 89.2 (2003): 114-141.<br>[3]. Wood, Simon N. “Thin plate regression splines.” Journal of the Royal Statistical Society: Series B (Statistical Methodology) 65.1 (2003): 95-114.</p>\n<hr>\n<h1 id=\"附录-变量索引\"><a href=\"#附录-变量索引\" class=\"headerlink\" title=\"附录(变量索引)\"></a>附录(变量索引)</h1><ul>\n<li>(知) K: 变换前控制点$X_{kn}$的维数。</li>\n<li>(知) L: 变换后控制点$Y_{ln}$的维数。</li>\n<li>(知) $\\mathbf x^{(n)}$: 变换前的K维控制点(K*1)。</li>\n<li>(知) $\\mathbf y^{(n)}$: 变换后的L维控制点(L*1)。</li>\n<li>(知) $\\mathbf X$: 变换前的所有控制点的$K*N$矩阵表示。</li>\n<li>(知) $\\mathbf Y$: 变换后的所有控制点的$L*N$矩阵表示。</li>\n<li>(知) $\\mathbf \\phi$: 所有控制点带入核函数$\\phi_{mn}(||x^{(n)-x^{(m)}}||)$所得$N*N$核矩阵。</li>\n<li>(未) $\\mathbf W$: 变形系数$W_{ln}$的$L*N$矩阵表示。</li>\n<li>(未) $\\mathbf A$: Affine变换系数$A_{lk}$的$L*K$矩阵表示。</li>\n<li>(未) $\\mathbf b$: Affine变换系数$b_{l}$的$L*1$矩阵表示。</li>\n</ul>\n","excerpt":"","more":"<p>非刚体形变常用算法。</p>\n<hr>\n<h1 id=\"Thin-Plate-Spline\"><a href=\"#Thin-Plate-Spline\" class=\"headerlink\" title=\"Thin Plate Spline\"></a>Thin Plate Spline</h1><p>简单来说，TPS是一种$ f: \\mathbb R^K → \\mathbb R^L $的座标变换。<br>此变换包含两部分，第一是Affine $f_A(x)$, 第二是Kernel $f_K(x)$。</p>\n<p>完整的TPS如下:</p>\n<p>$$<br>f(x)=f_A(x)+f_K(x)=\\underbrace{Ax+b}_{\\text{Affine}}+\\overbrace{\\sum_{n=1}^N w^{(n)} \\varphi(x^{(n)}, x)}^{\\text{Kernel}}<br>\\tag{1}<br>$$<br>其中，</p>\n<p>$x$是变换前的K维座标；$f(x)$是变换后L维新座标；$x^{(n)}$是K维控制点，总共N个；$\\varphi()$是核函数。<br>如此，便实现了$ \\mathbb R^K→ \\mathbb R^L $的变换。</p>\n<p>变换后的第$i$维$(i=1,…,L)$：</p>\n<p>$$<br>f_i(x)=\\sum_{j=1}^K A_{ij}+b_i+\\sum_{n=1}^N W_{in}\\varphi(x^{(n)}, x)<br>\\tag{2}<br>$$</p>\n<hr>\n<h1 id=\"TPS的能量函数1\"><a href=\"#TPS的能量函数1\" class=\"headerlink\" title=\"TPS的能量函数1\"></a>TPS的能量函数1</h1><p>TPS的能量函数包含数据项Data和平滑项TPS：</p>\n<p>$$<br>E(f) = E_{Data} + \\lambda E_{TPS} = \\underbrace{\\sum_{n=1}^N ||y^{(n)}-f(x)^{(n)}||^2}_{\\text{Data项}} + \\overbrace{\\lambda \\int_{\\mathbb R^K} dx||D^2f(x)||_{Frob.}}^{\\text{TPS平滑项}}<br>\\tag{3}<br>$$</p>\n<p>其中，</p>\n<ul>\n<li>$\\lambda$是平滑项和数据项的平衡系数。</li>\n<li>$y^{(n)}$是变换后的_L_维控制点，与变换前的_K_维控制点$x^{(n)}$一一对应。</li>\n<li>数据项比较简单，用来表征控制点的误差。</li>\n<li>平滑项比较复杂，用来表征变换后数据的平滑性。</li>\n</ul>\n<p>平滑项的具体定义为TPS变换$f(x)$二次微分$[D^2f(x)]_{ijk}$</p>\n<p>$$<br>[D^2f(x)]_{ijk} = \\frac{\\partial^2 f_i(x)}{\\partial x_j \\partial x_k}<br>\\tag{4}<br>$$</p>\n<p>的<a href=\"http://mathworld.wolfram.com/FrobeniusNorm.html\">Frobenius范数</a>累加和$||D^2f(x)||_{Frob.}$</p>\n<p>$$<br>||D^2f(x)||_{Frob.} = \\sum_{i=1}^L \\sum_{j=1}^K \\sum_{k=1}^K |\\frac{\\partial^2}{\\partial x_j \\partial x_k}f_i(x)|^2<br>\\tag{5}<br>$$</p>\n<p>在原始K维空间中的积分$\\int_{\\mathbb R^K} dx||D^2f(x)||_{Frob.}$。具体的计算见下节。</p>\n<hr>\n<h1 id=\"基于核函数的TPS平滑项\"><a href=\"#基于核函数的TPS平滑项\" class=\"headerlink\" title=\"基于核函数的TPS平滑项\"></a>基于核函数的TPS平滑项</h1><p>首先定义一下核函数:</p>\n<p>$$<br>\\varphi(x, x^,) =<br>\\begin{cases}<br>r^4-Klnr &amp; \\text{(K为基数)} \\\\<br>r^4-K &amp; \\text{(K为偶数)}<br>\\end{cases} \\\\<br>\\tag{6}<br>$$</p>\n<p>其中$r=||x-x^,||$。<br>接着处理原始K维空间中的积分$\\int_{\\mathbb R^K} dx||D^2f(x)||_{Frob.}$：</p>\n<p>$$<br>E_{TPS}=\\int_{\\mathbb R^K}dx||D^2f(x)||_{Frob.}=\\int_{\\mathbb R^K}dx\\sum_{i=1}^L\\sum_{j=1}^K\\sum_{k=1}^K|\\frac {\\partial^2} {\\partial x_j \\partial x_k} f_i (x)|^2<br>\\tag{7}<br>$$</p>\n<p>$$<br>=\\int_{\\mathbb R^K}dx\\sum_{i=1}^L\\sum_{j=1}^K\\sum_{k=1}^K|\\frac {\\partial^2} {\\partial x_j \\partial x_k} \\sum_{n=1}^N W_{in} \\varphi(x^{(n)}, x) |^2<br>\\tag{8}<br>$$</p>\n<p>$$<br>= \\mathbf Tr( \\mathbf {W \\phi W^T}) = \\sum_{i=1}^L \\sum_{n=1}^N \\sum_{m=1}^N W_{in} \\phi_{mn} W_{im}<br>\\tag{9}<br>$$</p>\n<p>其中$\\phi_{mn}=\\varphi(||x^{(n)}-x^{(m)}||)$。</p>\n<hr>\n<h1 id=\"TPS能量函数2\"><a href=\"#TPS能量函数2\" class=\"headerlink\" title=\"TPS能量函数2\"></a>TPS能量函数2</h1><p>把式(1)，式(9)，以及核函数的定义带入能量函数(3):</p>\n<p>$$<br>E(f)=E_{Data}+\\lambda E_{TPS}<br>\\tag{10}<br>$$</p>\n<p>$$<br>= \\sum_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\mathbf Tr( \\mathbf {W \\phi W^T})<br>\\tag{11}<br>$$</p>\n<p>$$<br>= \\sum_{n=1}^N || y^{(n)} - Ax^{(n)} - b - \\sum_{m=1}^Nw^{(m)}\\varphi(||x^{(n)}-x^{(m)}||)||^2 + \\lambda \\sum_{i=1}^L \\sum_{n=1}^N \\sum_{m=1}^N W_{in} \\phi_{mn} W_{im}<br>\\tag{12}<br>$$</p>\n<p>其中，</p>\n<ul>\n<li>$Y_{in}$ 是变换后的第n个控制点的第i维(共L维)。</li>\n<li>$X_{jn}$ 是变换前的第n个控制点的第j维(共K维)。</li>\n</ul>\n<p>如式(12)所示，TPS的能量函数最终归结为关于三个变量$A_{ij}, b_i, W_{in}$的二次函数。</p>\n<ul>\n<li>第一项$E_{Data}$明显是关于变量($A_{ij}, b_i$)下突二次函数。</li>\n<li>第二项$E_{TPS}$可以看作关于变量$W$的正系数($\\mathbf \\phi$)连加下突二次($W_{in}W_{im}$)函数。</li>\n</ul>\n<p>两项都下突，TPS能量函数的最小值就可能存在解析解。</p>\n<hr>\n<h1 id=\"能量函数最小值\"><a href=\"#能量函数最小值\" class=\"headerlink\" title=\"能量函数最小值\"></a>能量函数最小值</h1><p>首先对三个变量$A_{ij}, b_i, W_{in}$分别求偏导:</p>\n<p>$$<br>\\frac {\\partial E(f)} {\\partial A_{ij}} = -2 \\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) X_{jn}<br>\\tag{13}<br>$$</p>\n<p>$$<br>\\frac {\\partial E(f)} {\\partial b_i} = -2 \\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln})<br>\\tag{14}<br>$$</p>\n<p>$$<br>\\frac {\\partial E(f)} {\\partial W_{im}} = -2 \\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) \\phi_{mn} + \\lambda \\sum_{n=1}^N (W_{in} \\phi_{mn} + \\phi_{nm} W_{in})<br>\\tag{15}<br>$$</p>\n<p>令$\\partial E(f) = 0$，并利用核函数$\\phi_{mn}=\\phi_{nm}$的对称性，可得:</p>\n<p>$$<br>\\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) X_{jn} = 0 \\<br>(i=1,…,L, j=1,…,K)<br>\\tag{16}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln}) = 0 \\<br>(i=1,…,L)<br>\\tag{17}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^K (Y_{in} - \\sum_{k=1}^K A_{ik}X_{kn} - b_i - \\sum_{l=1}^N W_{il} \\phi_{ln} - \\lambda W_{in}) \\phi_{mn} = 0 \\<br>(i=1,…,L, m=1,…,N)<br>\\tag{18}<br>$$</p>\n<p>进一步整理可得($i,m,n$取值范围同上，下略):</p>\n<p>$$<br>\\sum_{n=1}^N \\sum_{k=1}^K X_{kn} X_{jn} A_{ik} + \\sum_{n=1}^N X_{jn}b_i + \\sum_{n=1}^N \\sum_{l=1}^N X_{jn} \\phi_{ln} W_{il} = \\sum_{n=1}^N Y_{in} X_{jn}<br>\\tag{19}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^N \\sum_{k=1}^K X_{kn} A_{ik} + Nb_i + \\sum_{n=1}^N \\sum_{l=1}^N \\phi_{ln} W_{il} = \\sum_{n=1}^N Y_{in}<br>\\tag{20}<br>$$</p>\n<p>$$<br>\\sum_{n=1}^N \\sum_{k=1}^K X_{kn} \\phi_{mn} A_{ik} + \\sum_{n=1}^N \\phi_{mn}b_i + \\sum_{l=1}^N (\\sum_{n=1}^N \\phi_{ln} \\phi_{mn} + \\lambda \\phi_{ml}) W_{il} = \\sum_{n=1}^N Y_{in} \\phi_{mn}<br>\\tag{21}<br>$$</p>\n<p>上式中各项可通过矩阵表示:</p>\n<ul>\n<li>变换前的K维控制点$X_{kn}$用$K*N$矩阵表示$\\mathbf X$。</li>\n<li>变换后的L维控制点$Y_{ln}$用$L*N$矩阵表示$\\mathbf Y$。</li>\n<li>变形系数$W_{ln}$可以表示为$L*N$矩阵$\\mathbf W$。</li>\n<li>Affine变换系数$A_{lk}$可以表示为$L*K$矩阵$\\mathbf A$。</li>\n<li>Affine变换系数$b_{l}$可以表示为$L*1$矩阵$\\mathbf b$。</li>\n<li>把所有控制点带入核函数$\\phi_{mn}(||x^{(n)-x^{(m)}}||)$，可得$N*N$核矩阵$\\mathbf \\phi$。</li>\n</ul>\n<p>将上述矩阵带入:</p>\n<p>$$<br>\\sum_{k=1}^K A_{ik}[\\mathbf X \\mathbf X^T]_{kj} + bi[\\sum_{n=1}^N X_{jn}] + \\sum_{l=1}^N[\\mathbf X \\phi^T]_{jl}W_{il} = [\\mathbf Y \\mathbf X^T]_{ij}<br>\\tag{22}<br>$$</p>\n<p>$$<br>\\sum_{k=1}^K A_{ik}[\\sum_{n=1}^N X_{kn}] + Nb_i + \\sum_{l=1}^N[\\sum_{n=1}^N \\phi_{ln}]W_{il} = [\\sum_{n=1}^N Y_{in}]<br>\\tag{23}<br>$$</p>\n<p>$$<br>\\sum_{k=1}^K A_{ik}[\\mathbf X \\mathbf \\phi^T]_{km} + b_i[\\sum_{n=1}^N \\phi_{mn}] + \\sum_{l=1}^N[\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)]_ml W_{il} = [\\mathbf Y \\mathbf \\phi^T]_{im}<br>\\tag{24}<br>$$</p>\n<p>引入$N*1$的列向量$\\mathbf 1$:</p>\n<p>$$<br>[\\mathbf A \\mathbf X \\mathbf X^T]_{ij} + [\\mathbf b(\\mathbf X \\mathbf 1)^T]_{ij} + [\\mathbf W \\mathbf \\phi \\mathbf X^T]_{ij} = [\\mathbf Y \\mathbf X^T]_{ij}<br>\\tag{25}<br>$$</p>\n<p>$$<br>[\\mathbf A(\\mathbf X \\mathbf 1)]_i + [(\\mathbf 1^T \\mathbf 1)\\mathbf b]_i + [\\mathbf W \\mathbf \\phi \\mathbf 1]_i = [\\mathbf Y \\mathbf 1]_i<br>\\tag{26}<br>$$</p>\n<p>$$<br>[\\mathbf A \\mathbf X \\mathbf \\phi^T]_{im} + [\\mathbf b (\\mathbf 1^T \\mathbf \\phi^T)]_{im} + [\\mathbf W (\\mathbf \\phi^T+\\lambda \\mathbf I)^T \\mathbf \\phi^T]_(im) = [\\mathbf  Y \\mathbf \\phi^T]_im<br>\\tag{27}<br>$$</p>\n<p>去掉上式中的所有的索引$i,j$，并转置:</p>\n<p>$$<br>\\mathbf X^T \\mathbf X \\mathbf A^T + \\mathbf X \\mathbf 1 \\mathbf b^T + \\mathbf X \\mathbf \\phi^T \\mathbf W^T = \\mathbf X \\mathbf Y^T<br>\\tag{28}<br>$$</p>\n<p>$$<br>\\mathbf 1^T \\mathbf X^T \\mathbf A^T + \\mathbf 1^T \\mathbf 1 \\mathbf b^T + \\mathbf 1^T \\mathbf \\phi^T \\mathbf W^T = \\mathbf 1^T \\mathbf Y^T<br>\\tag{29}<br>$$</p>\n<p>$$<br>\\mathbf \\phi \\mathbf X^T \\mathbf A^T + \\mathbf \\phi \\mathbf 1 \\mathbf b^T + \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)\\mathbf W^T = \\mathbf \\phi \\mathbf Y^T<br>\\tag{30}<br>$$</p>\n<p>至此，已得到关于未知矩阵$\\mathbf A，\\mathbf b，\\mathbf W$的三个方程。<br>进一步将上述方程组的系数和未知数分离(注意这里系数核未知数都是矩阵，不是常量):</p>\n<p>$$<br>\\begin{bmatrix}<br>\\mathbf X^T \\mathbf X &amp; \\mathbf X \\mathbf 1 &amp; \\mathbf X \\mathbf \\phi^T \\\\<br>\\mathbf 1^T \\mathbf X^T &amp; \\mathbf 1^T \\mathbf 1 &amp; \\mathbf 1^T \\mathbf \\phi^T \\\\<br>\\mathbf \\phi \\mathbf X^T &amp; \\mathbf \\phi \\mathbf 1 &amp; \\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I)<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf A^T \\\\<br>\\mathbf b^T \\\\<br>\\mathbf W^T<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>\\mathbf X \\mathbf Y^T \\\\<br>\\mathbf 1^T \\mathbf Y \\\\<br>\\mathbf \\phi \\mathbf Y^T<br>\\end{bmatrix}<br>\\tag{31}<br>$$</p>\n<p>继续整理:</p>\n<p>$$<br>\\begin{bmatrix}<br>\\mathbf \\phi(\\mathbf \\phi^T + \\lambda \\mathbf I) &amp; \\mathbf \\phi \\mathbf X^T &amp; \\mathbf \\phi \\mathbf 1 \\\\<br>\\mathbf X \\mathbf \\phi^T &amp; \\mathbf X^T \\mathbf X &amp; \\mathbf X \\mathbf 1 \\\\<br>\\mathbf 1^T \\mathbf \\phi \\mathbf 1^T &amp; \\mathbf 1 ^T \\mathbf X^T &amp; \\mathbf 1^T \\mathbf 1<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf W^T \\\\<br>\\mathbf A^T \\\\<br>\\mathbf b^T<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\mathbf Y^T<br>\\tag{32}<br>$$</p>\n<p>接着将数据项和平滑项相关矩阵分离:</p>\n<p>$$<br>\\left(<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf \\phi^T &amp; \\mathbf X^T &amp; \\mathbf 1<br>\\end{bmatrix} + \\lambda<br>\\begin{bmatrix}<br>\\mathbf \\phi &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0<br>\\end{bmatrix}<br>\\right)<br>\\begin{bmatrix}<br>\\mathbf W^T \\\\<br>\\mathbf A^T \\\\<br>\\mathbf b^T<br>\\end{bmatrix} =<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\mathbf Y^T<br>\\tag{33}<br>$$</p>\n<p>最后将未知矩阵放左边，其余部分放右边:</p>\n<p>$$<br>\\begin{bmatrix}<br>\\mathbf W^T \\\\<br>\\mathbf A^T \\\\<br>\\mathbf b^T<br>\\end{bmatrix} =<br>\\left(<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>\\mathbf \\phi^T &amp; \\mathbf X^T &amp; \\mathbf 1<br>\\end{bmatrix} + \\lambda<br>\\begin{bmatrix}<br>\\mathbf \\phi &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0 \\\\<br>\\mathbf 0 &amp; \\mathbf 0 &amp; \\mathbf 0<br>\\end{bmatrix}<br>\\right)^{-1}<br>\\begin{bmatrix}<br>\\mathbf \\phi \\\\<br>\\mathbf X \\\\<br>\\mathbf 1^T<br>\\end{bmatrix}<br>\\mathbf Y^T<br>\\tag{34}<br>$$</p>\n<p>式(34)的计算结果，即为TPS能量函数最小值的参数。<br>得到此参数后，便可通过式(1)对任意K维座标$x$进行变换，得到新的L维座标$f(x)$。</p>\n<hr>\n<h1 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h1><p>[1]. Thin plate spline (Wikipedia).<br>[2]. Chui, Haili, and Anand Rangarajan. “A new point matching algorithm for non-rigid registration.”Computer Vision and Image Understanding 89.2 (2003): 114-141.<br>[3]. Wood, Simon N. “Thin plate regression splines.” Journal of the Royal Statistical Society: Series B (Statistical Methodology) 65.1 (2003): 95-114.</p>\n<hr>\n<h1 id=\"附录-变量索引\"><a href=\"#附录-变量索引\" class=\"headerlink\" title=\"附录(变量索引)\"></a>附录(变量索引)</h1><ul>\n<li>(知) K: 变换前控制点$X_{kn}$的维数。</li>\n<li>(知) L: 变换后控制点$Y_{ln}$的维数。</li>\n<li>(知) $\\mathbf x^{(n)}$: 变换前的K维控制点(K*1)。</li>\n<li>(知) $\\mathbf y^{(n)}$: 变换后的L维控制点(L*1)。</li>\n<li>(知) $\\mathbf X$: 变换前的所有控制点的$K*N$矩阵表示。</li>\n<li>(知) $\\mathbf Y$: 变换后的所有控制点的$L*N$矩阵表示。</li>\n<li>(知) $\\mathbf \\phi$: 所有控制点带入核函数$\\phi_{mn}(||x^{(n)-x^{(m)}}||)$所得$N*N$核矩阵。</li>\n<li>(未) $\\mathbf W$: 变形系数$W_{ln}$的$L*N$矩阵表示。</li>\n<li>(未) $\\mathbf A$: Affine变换系数$A_{lk}$的$L*K$矩阵表示。</li>\n<li>(未) $\\mathbf b$: Affine变换系数$b_{l}$的$L*1$矩阵表示。</li>\n</ul>\n"},{"title":"新起点，Area51到货","date":"2016-04-30T05:32:29.000Z","_content":"\n新入手的GTX970的GPU。\n\n------\n\n# 新起点，Area51到货\n\n> * 16GB ｸﾜｯﾄﾞ ﾁｬﾝﾈﾙ DDR4 at 2133MHz\n> * 128GB SSD 6Gb/s ﾒｲﾝ + 2TB 7200RPM SATA 6Gb/s ｽﾄﾚｰｼﾞ\n> * ｲﾝﾃﾙ® ｺｱ(TM) i7-5820K (6-cores, 15MB ｷｬｯｼｭ, ｵｰﾊﾞｰｸﾛｯｸ 最大3.8 GHz w/ Turbo Boost)\n> * NVIDIA  GeForce  GTX 970 (4GB GDDR5付き)\n\n![Area51-outside](https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_b9693c4b-7238-4f37-840f-9880e28bb904.jpg)\n\n![Area51-inside](https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_3517f532-67ab-4cef-9d39-2072ac30bcaa.jpg)\n\n![Area51-all](http://media.couponic.com.au/2015/05/Area-51-Gaming-Desktop-A.jpg)\n图片来至http://www.couponic.com.au/shopping/build-the-ultimate-vr-gaming-box-with-the-alienware-area-51-dell-desktop/\n\n------\n\n# 用Area51打算干的事\n\n[1] PyThreeD重构。\n[2] Human Model v1.0。\n[3] Human Model C++版。\n[4] GPGPU的机器学习。\n","source":"_posts/20160430_sun_DellArea51.md","raw":"---\ntitle: 新起点，Area51到货\ndate: 2016-04-30 15:32:29\ntags: GPU\ncategories: 工具\n---\n\n新入手的GTX970的GPU。\n\n------\n\n# 新起点，Area51到货\n\n> * 16GB ｸﾜｯﾄﾞ ﾁｬﾝﾈﾙ DDR4 at 2133MHz\n> * 128GB SSD 6Gb/s ﾒｲﾝ + 2TB 7200RPM SATA 6Gb/s ｽﾄﾚｰｼﾞ\n> * ｲﾝﾃﾙ® ｺｱ(TM) i7-5820K (6-cores, 15MB ｷｬｯｼｭ, ｵｰﾊﾞｰｸﾛｯｸ 最大3.8 GHz w/ Turbo Boost)\n> * NVIDIA  GeForce  GTX 970 (4GB GDDR5付き)\n\n![Area51-outside](https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_b9693c4b-7238-4f37-840f-9880e28bb904.jpg)\n\n![Area51-inside](https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_3517f532-67ab-4cef-9d39-2072ac30bcaa.jpg)\n\n![Area51-all](http://media.couponic.com.au/2015/05/Area-51-Gaming-Desktop-A.jpg)\n图片来至http://www.couponic.com.au/shopping/build-the-ultimate-vr-gaming-box-with-the-alienware-area-51-dell-desktop/\n\n------\n\n# 用Area51打算干的事\n\n[1] PyThreeD重构。\n[2] Human Model v1.0。\n[3] Human Model C++版。\n[4] GPGPU的机器学习。\n","slug":"20160430_sun_DellArea51","published":1,"updated":"2016-05-02T10:47:09.181Z","_id":"cinmtwap70000sogo58ki8h6j","comments":1,"layout":"post","photos":[],"link":"","content":"<p>新入手的GTX970的GPU。</p>\n<hr>\n<h1 id=\"新起点，Area51到货\"><a href=\"#新起点，Area51到货\" class=\"headerlink\" title=\"新起点，Area51到货\"></a>新起点，Area51到货</h1><blockquote>\n<ul>\n<li>16GB ｸﾜｯﾄﾞ ﾁｬﾝﾈﾙ DDR4 at 2133MHz</li>\n<li>128GB SSD 6Gb/s ﾒｲﾝ + 2TB 7200RPM SATA 6Gb/s ｽﾄﾚｰｼﾞ</li>\n<li>ｲﾝﾃﾙ® ｺｱ(TM) i7-5820K (6-cores, 15MB ｷｬｯｼｭ, ｵｰﾊﾞｰｸﾛｯｸ 最大3.8 GHz w/ Turbo Boost)</li>\n<li>NVIDIA  GeForce  GTX 970 (4GB GDDR5付き)</li>\n</ul>\n</blockquote>\n<p><img src=\"https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_b9693c4b-7238-4f37-840f-9880e28bb904.jpg\" alt=\"Area51-outside\"></p>\n<p><img src=\"https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_3517f532-67ab-4cef-9d39-2072ac30bcaa.jpg\" alt=\"Area51-inside\"></p>\n<p><img src=\"http://media.couponic.com.au/2015/05/Area-51-Gaming-Desktop-A.jpg\" alt=\"Area51-all\"><br>图片来至<a href=\"http://www.couponic.com.au/shopping/build-the-ultimate-vr-gaming-box-with-the-alienware-area-51-dell-desktop/\" target=\"_blank\" rel=\"external\">http://www.couponic.com.au/shopping/build-the-ultimate-vr-gaming-box-with-the-alienware-area-51-dell-desktop/</a></p>\n<hr>\n<h1 id=\"用Area51打算干的事\"><a href=\"#用Area51打算干的事\" class=\"headerlink\" title=\"用Area51打算干的事\"></a>用Area51打算干的事</h1><p>[1] PyThreeD重构。<br>[2] Human Model v1.0。<br>[3] Human Model C++版。<br>[4] GPGPU的机器学习。</p>\n","excerpt":"","more":"<p>新入手的GTX970的GPU。</p>\n<hr>\n<h1 id=\"新起点，Area51到货\"><a href=\"#新起点，Area51到货\" class=\"headerlink\" title=\"新起点，Area51到货\"></a>新起点，Area51到货</h1><blockquote>\n<ul>\n<li>16GB ｸﾜｯﾄﾞ ﾁｬﾝﾈﾙ DDR4 at 2133MHz</li>\n<li>128GB SSD 6Gb/s ﾒｲﾝ + 2TB 7200RPM SATA 6Gb/s ｽﾄﾚｰｼﾞ</li>\n<li>ｲﾝﾃﾙ® ｺｱ(TM) i7-5820K (6-cores, 15MB ｷｬｯｼｭ, ｵｰﾊﾞｰｸﾛｯｸ 最大3.8 GHz w/ Turbo Boost)</li>\n<li>NVIDIA  GeForce  GTX 970 (4GB GDDR5付き)</li>\n</ul>\n</blockquote>\n<p><img src=\"https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_b9693c4b-7238-4f37-840f-9880e28bb904.jpg\" alt=\"Area51-outside\"></p>\n<p><img src=\"https://ecs7.tokopedia.net/img/product-1/2016/4/20/6780339/6780339_3517f532-67ab-4cef-9d39-2072ac30bcaa.jpg\" alt=\"Area51-inside\"></p>\n<p><img src=\"http://media.couponic.com.au/2015/05/Area-51-Gaming-Desktop-A.jpg\" alt=\"Area51-all\"><br>图片来至<a href=\"http://www.couponic.com.au/shopping/build-the-ultimate-vr-gaming-box-with-the-alienware-area-51-dell-desktop/\">http://www.couponic.com.au/shopping/build-the-ultimate-vr-gaming-box-with-the-alienware-area-51-dell-desktop/</a></p>\n<hr>\n<h1 id=\"用Area51打算干的事\"><a href=\"#用Area51打算干的事\" class=\"headerlink\" title=\"用Area51打算干的事\"></a>用Area51打算干的事</h1><p>[1] PyThreeD重构。<br>[2] Human Model v1.0。<br>[3] Human Model C++版。<br>[4] GPGPU的机器学习。</p>\n"},{"title":"Cmd Markdown 样例","date":"2016-04-18T13:01:21.000Z","_content":"\n做个广告，Cmd Markdown 的官方说明，作者 [@ghosert][3]，详细请关注\nhttps://www.zybuluo.com/mdeditor\n\n------\n\n# 欢迎使用 Cmd Markdown 编辑阅读器\n\n我们理解您需要更便捷更高效的工具记录思想，整理笔记、知识，并将其中承载的价值传播给他人，**Cmd Markdown** 是我们给出的答案 —— 我们为记录思想和分享知识提供更专业的工具。 您可以使用 Cmd Markdown：\n\n> * 整理知识，学习笔记\n> * 发布日记，杂文，所见所想\n> * 撰写发布技术文稿（代码支持）\n> * 撰写发布学术论文（LaTeX 公式支持）\n\n![cmd-markdown-logo](https://www.zybuluo.com/static/img/logo.png)\n\n除了您现在看到的这个 Cmd Markdown 在线版本，您还可以前往以下网址下载：\n\n## [Windows/Mac/Linux 全平台客户端](https://www.zybuluo.com/cmd/)\n\n> 请保留此份 Cmd Markdown 的欢迎稿兼使用说明，如需撰写新稿件，点击顶部工具栏右侧的 <i class=\"icon-file\"></i> **新文稿** 或者使用快捷键 `Ctrl+Alt+N`。\n\n------\n\n# 什么是 Markdown\n\nMarkdown 是一种方便记忆、书写的纯文本标记语言，用户可以使用这些标记符号以最小的输入代价生成极富表现力的文档：譬如您正在阅读的这份文档。它使用简单的符号标记不同的标题，分割不同的段落，**粗体** 或者 *斜体* 某些文字，更棒的是，它还可以\n\n## 制作一份待办事宜 [Todo 列表](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#13-待办事宜-todo-列表)\n\n- [ ] 支持以 PDF 格式导出文稿\n- [ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率\n- [x] 新增 Todo 列表功能\n- [x] 修复 LaTex 公式渲染问题\n- [x] 新增 LaTex 公式编号功能\n\n## 书写一个质能守恒公式[^LaTeX]\n\n$$E=mc^2$$\n\n## 高亮一段代码[^code]\n\n```python\n@requires_authorization\nclass SomeClass:\n    pass\n\nif __name__ == '__main__':\n    # A comment\n    print 'hello world'\n```\n\n## 高效绘制 [流程图](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#7-流程图)\n\n```flow\nst=>start: Start\nop=>operation: Your Operation\ncond=>condition: Yes or No?\ne=>end\n\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```\n\n## 高效绘制 [序列图](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#8-序列图)\n\n```seq\nAlice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!\n```\n\n## 绘制表格\n\n| 项目        | 价格   |  数量  |\n| --------   | -----:  | :----:  |\n| 计算机     | \\$1600 |   5     |\n| 手机        |   \\$12   |   12   |\n| 管线        |    \\$1    |  234  |\n\n## 更详细语法说明\n\n想要查看更详细的语法说明，可以参考我们准备的 [Cmd Markdown 简明语法手册][1]，进阶用户可以参考 [Cmd Markdown 高阶语法手册][2] 了解更多高级功能。\n\n总而言之，不同于其它 *所见即所得* 的编辑器：你只需使用键盘专注于书写文本内容，就可以生成印刷级的排版格式，省却在键盘和工具栏之间来回切换，调整内容和格式的麻烦。**Markdown 在流畅的书写和印刷级的阅读体验之间找到了平衡。** 目前它已经成为世界上最大的技术分享网站 GitHub 和 技术问答网站 StackOverFlow 的御用书写格式。\n\n------\n\n# 什么是 Cmd Markdown\n\n您可以使用很多工具书写 Markdown，但是 Cmd Markdown 是这个星球上我们已知的、最好的 Markdown 工具——没有之一 ：）因为深信文字的力量，所以我们和你一样，对流畅书写，分享思想和知识，以及阅读体验有极致的追求，我们把对于这些诉求的回应整合在 Cmd Markdown，并且一次，两次，三次，乃至无数次地提升这个工具的体验，最终将它演化成一个 **编辑/发布/阅读** Markdown 的在线平台——您可以在任何地方，任何系统/设备上管理这里的文字。\n\n## 实时同步预览\n\n我们将 Cmd Markdown 的主界面一分为二，左边为**编辑区**，右边为**预览区**，在编辑区的操作会实时地渲染到预览区方便查看最终的版面效果，并且如果你在其中一个区拖动滚动条，我们有一个巧妙的算法把另一个区的滚动条同步到等价的位置，超酷！\n\n## 编辑工具栏\n\n也许您还是一个 Markdown 语法的新手，在您完全熟悉它之前，我们在 **编辑区** 的顶部放置了一个如下图所示的工具栏，您可以使用鼠标在工具栏上调整格式，不过我们仍旧鼓励你使用键盘标记格式，提高书写的流畅度。\n\n![tool-editor](https://www.zybuluo.com/static/img/toolbar-editor.png)\n\n## 编辑模式\n\n完全心无旁骛的方式编辑文字：点击 **编辑工具栏** 最右测的拉伸按钮或者按下 `Ctrl + M`，将 Cmd Markdown 切换到独立的编辑模式，这是一个极度简洁的写作环境，所有可能会引起分心的元素都已经被挪除，超清爽！\n\n## 实时的云端文稿\n\n为了保障数据安全，Cmd Markdown 会将您每一次击键的内容保存至云端，同时在 **编辑工具栏** 的最右侧提示 `已保存` 的字样。无需担心浏览器崩溃，机器掉电或者地震，海啸——在编辑的过程中随时关闭浏览器或者机器，下一次回到 Cmd Markdown 的时候继续写作。\n\n## 离线模式\n\n在网络环境不稳定的情况下记录文字一样很安全！在您写作的时候，如果电脑突然失去网络连接，Cmd Markdown 会智能切换至离线模式，将您后续键入的文字保存在本地，直到网络恢复再将他们传送至云端，即使在网络恢复前关闭浏览器或者电脑，一样没有问题，等到下次开启 Cmd Markdown 的时候，她会提醒您将离线保存的文字传送至云端。简而言之，我们尽最大的努力保障您文字的安全。\n\n## 管理工具栏\n\n为了便于管理您的文稿，在 **预览区** 的顶部放置了如下所示的 **管理工具栏**：\n\n![tool-manager](https://www.zybuluo.com/static/img/toolbar-manager.jpg)\n\n通过管理工具栏可以：\n\n<i class=\"icon-share\"></i> 发布：将当前的文稿生成固定链接，在网络上发布，分享\n<i class=\"icon-file\"></i> 新建：开始撰写一篇新的文稿\n<i class=\"icon-trash\"></i> 删除：删除当前的文稿\n<i class=\"icon-cloud\"></i> 导出：将当前的文稿转化为 Markdown 文本或者 Html 格式，并导出到本地\n<i class=\"icon-reorder\"></i> 列表：所有新增和过往的文稿都可以在这里查看、操作\n<i class=\"icon-pencil\"></i> 模式：切换 普通/Vim/Emacs 编辑模式\n\n## 阅读工具栏\n\n![tool-manager](https://www.zybuluo.com/static/img/toolbar-reader.jpg)\n\n通过 **预览区** 右上角的 **阅读工具栏**，可以查看当前文稿的目录并增强阅读体验。\n\n工具栏上的五个图标依次为：\n\n<i class=\"icon-list\"></i> 目录：快速导航当前文稿的目录结构以跳转到感兴趣的段落\n<i class=\"icon-chevron-sign-left\"></i> 视图：互换左边编辑区和右边预览区的位置\n<i class=\"icon-adjust\"></i> 主题：内置了黑白两种模式的主题，试试 **黑色主题**，超炫！\n<i class=\"icon-desktop\"></i> 阅读：心无旁骛的阅读模式提供超一流的阅读体验\n<i class=\"icon-fullscreen\"></i> 全屏：简洁，简洁，再简洁，一个完全沉浸式的写作和阅读环境\n\n## 阅读模式\n\n在 **阅读工具栏** 点击 <i class=\"icon-desktop\"></i> 或者按下 `Ctrl+Alt+M` 随即进入独立的阅读模式界面，我们在版面渲染上的每一个细节：字体，字号，行间距，前背景色都倾注了大量的时间，努力提升阅读的体验和品质。\n\n## 标签、分类和搜索\n\n在编辑区任意行首位置输入以下格式的文字可以标签当前文档：\n\n标签： 未分类\n\n标签以后的文稿在【文件列表】（Ctrl+Alt+F）里会按照标签分类，用户可以同时使用键盘或者鼠标浏览查看，或者在【文件列表】的搜索文本框内搜索标题关键字过滤文稿，如下图所示：\n\n![file-list](https://www.zybuluo.com/static/img/file-list.png)\n\n## 文稿发布和分享\n\n在您使用 Cmd Markdown 记录，创作，整理，阅读文稿的同时，我们不仅希望它是一个有力的工具，更希望您的思想和知识通过这个平台，连同优质的阅读体验，将他们分享给有相同志趣的人，进而鼓励更多的人来到这里记录分享他们的思想和知识，尝试点击 <i class=\"icon-share\"></i> (Ctrl+Alt+P) 发布这份文档给好友吧！\n\n------\n\n# 结束语\n\n再一次感谢您花费时间阅读这份欢迎稿，点击 <i class=\"icon-file\"></i> (Ctrl+Alt+N) 开始撰写新的文稿吧！祝您在这里记录、阅读、分享愉快！\n\n作者 [@ghosert][3]\n2015 年 06月 15日\n\n[^LaTeX]: 支持 **LaTeX** 编辑显示支持，例如：$\\sum_{i=1}^n a_i=0$， 访问 [MathJax][4] 参考更多使用方法。\n\n[^code]: 代码高亮功能支持包括 Java, Python, JavaScript 在内的，**四十一**种主流编程语言。\n\n[1]: https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown\n[2]: https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#cmd-markdown-高阶语法手册\n[3]: http://weibo.com/ghosert\n[4]: http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference\n","source":"_posts/20160418_sun_CmdMarkdownExample.md","raw":"---\ntitle: Cmd Markdown 样例\ndate: 2016-04-18 23:01:21\ntags: Markdown\ncategories: 工具\n---\n\n做个广告，Cmd Markdown 的官方说明，作者 [@ghosert][3]，详细请关注\nhttps://www.zybuluo.com/mdeditor\n\n------\n\n# 欢迎使用 Cmd Markdown 编辑阅读器\n\n我们理解您需要更便捷更高效的工具记录思想，整理笔记、知识，并将其中承载的价值传播给他人，**Cmd Markdown** 是我们给出的答案 —— 我们为记录思想和分享知识提供更专业的工具。 您可以使用 Cmd Markdown：\n\n> * 整理知识，学习笔记\n> * 发布日记，杂文，所见所想\n> * 撰写发布技术文稿（代码支持）\n> * 撰写发布学术论文（LaTeX 公式支持）\n\n![cmd-markdown-logo](https://www.zybuluo.com/static/img/logo.png)\n\n除了您现在看到的这个 Cmd Markdown 在线版本，您还可以前往以下网址下载：\n\n## [Windows/Mac/Linux 全平台客户端](https://www.zybuluo.com/cmd/)\n\n> 请保留此份 Cmd Markdown 的欢迎稿兼使用说明，如需撰写新稿件，点击顶部工具栏右侧的 <i class=\"icon-file\"></i> **新文稿** 或者使用快捷键 `Ctrl+Alt+N`。\n\n------\n\n# 什么是 Markdown\n\nMarkdown 是一种方便记忆、书写的纯文本标记语言，用户可以使用这些标记符号以最小的输入代价生成极富表现力的文档：譬如您正在阅读的这份文档。它使用简单的符号标记不同的标题，分割不同的段落，**粗体** 或者 *斜体* 某些文字，更棒的是，它还可以\n\n## 制作一份待办事宜 [Todo 列表](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#13-待办事宜-todo-列表)\n\n- [ ] 支持以 PDF 格式导出文稿\n- [ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率\n- [x] 新增 Todo 列表功能\n- [x] 修复 LaTex 公式渲染问题\n- [x] 新增 LaTex 公式编号功能\n\n## 书写一个质能守恒公式[^LaTeX]\n\n$$E=mc^2$$\n\n## 高亮一段代码[^code]\n\n```python\n@requires_authorization\nclass SomeClass:\n    pass\n\nif __name__ == '__main__':\n    # A comment\n    print 'hello world'\n```\n\n## 高效绘制 [流程图](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#7-流程图)\n\n```flow\nst=>start: Start\nop=>operation: Your Operation\ncond=>condition: Yes or No?\ne=>end\n\nst->op->cond\ncond(yes)->e\ncond(no)->op\n```\n\n## 高效绘制 [序列图](https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#8-序列图)\n\n```seq\nAlice->Bob: Hello Bob, how are you?\nNote right of Bob: Bob thinks\nBob-->Alice: I am good thanks!\n```\n\n## 绘制表格\n\n| 项目        | 价格   |  数量  |\n| --------   | -----:  | :----:  |\n| 计算机     | \\$1600 |   5     |\n| 手机        |   \\$12   |   12   |\n| 管线        |    \\$1    |  234  |\n\n## 更详细语法说明\n\n想要查看更详细的语法说明，可以参考我们准备的 [Cmd Markdown 简明语法手册][1]，进阶用户可以参考 [Cmd Markdown 高阶语法手册][2] 了解更多高级功能。\n\n总而言之，不同于其它 *所见即所得* 的编辑器：你只需使用键盘专注于书写文本内容，就可以生成印刷级的排版格式，省却在键盘和工具栏之间来回切换，调整内容和格式的麻烦。**Markdown 在流畅的书写和印刷级的阅读体验之间找到了平衡。** 目前它已经成为世界上最大的技术分享网站 GitHub 和 技术问答网站 StackOverFlow 的御用书写格式。\n\n------\n\n# 什么是 Cmd Markdown\n\n您可以使用很多工具书写 Markdown，但是 Cmd Markdown 是这个星球上我们已知的、最好的 Markdown 工具——没有之一 ：）因为深信文字的力量，所以我们和你一样，对流畅书写，分享思想和知识，以及阅读体验有极致的追求，我们把对于这些诉求的回应整合在 Cmd Markdown，并且一次，两次，三次，乃至无数次地提升这个工具的体验，最终将它演化成一个 **编辑/发布/阅读** Markdown 的在线平台——您可以在任何地方，任何系统/设备上管理这里的文字。\n\n## 实时同步预览\n\n我们将 Cmd Markdown 的主界面一分为二，左边为**编辑区**，右边为**预览区**，在编辑区的操作会实时地渲染到预览区方便查看最终的版面效果，并且如果你在其中一个区拖动滚动条，我们有一个巧妙的算法把另一个区的滚动条同步到等价的位置，超酷！\n\n## 编辑工具栏\n\n也许您还是一个 Markdown 语法的新手，在您完全熟悉它之前，我们在 **编辑区** 的顶部放置了一个如下图所示的工具栏，您可以使用鼠标在工具栏上调整格式，不过我们仍旧鼓励你使用键盘标记格式，提高书写的流畅度。\n\n![tool-editor](https://www.zybuluo.com/static/img/toolbar-editor.png)\n\n## 编辑模式\n\n完全心无旁骛的方式编辑文字：点击 **编辑工具栏** 最右测的拉伸按钮或者按下 `Ctrl + M`，将 Cmd Markdown 切换到独立的编辑模式，这是一个极度简洁的写作环境，所有可能会引起分心的元素都已经被挪除，超清爽！\n\n## 实时的云端文稿\n\n为了保障数据安全，Cmd Markdown 会将您每一次击键的内容保存至云端，同时在 **编辑工具栏** 的最右侧提示 `已保存` 的字样。无需担心浏览器崩溃，机器掉电或者地震，海啸——在编辑的过程中随时关闭浏览器或者机器，下一次回到 Cmd Markdown 的时候继续写作。\n\n## 离线模式\n\n在网络环境不稳定的情况下记录文字一样很安全！在您写作的时候，如果电脑突然失去网络连接，Cmd Markdown 会智能切换至离线模式，将您后续键入的文字保存在本地，直到网络恢复再将他们传送至云端，即使在网络恢复前关闭浏览器或者电脑，一样没有问题，等到下次开启 Cmd Markdown 的时候，她会提醒您将离线保存的文字传送至云端。简而言之，我们尽最大的努力保障您文字的安全。\n\n## 管理工具栏\n\n为了便于管理您的文稿，在 **预览区** 的顶部放置了如下所示的 **管理工具栏**：\n\n![tool-manager](https://www.zybuluo.com/static/img/toolbar-manager.jpg)\n\n通过管理工具栏可以：\n\n<i class=\"icon-share\"></i> 发布：将当前的文稿生成固定链接，在网络上发布，分享\n<i class=\"icon-file\"></i> 新建：开始撰写一篇新的文稿\n<i class=\"icon-trash\"></i> 删除：删除当前的文稿\n<i class=\"icon-cloud\"></i> 导出：将当前的文稿转化为 Markdown 文本或者 Html 格式，并导出到本地\n<i class=\"icon-reorder\"></i> 列表：所有新增和过往的文稿都可以在这里查看、操作\n<i class=\"icon-pencil\"></i> 模式：切换 普通/Vim/Emacs 编辑模式\n\n## 阅读工具栏\n\n![tool-manager](https://www.zybuluo.com/static/img/toolbar-reader.jpg)\n\n通过 **预览区** 右上角的 **阅读工具栏**，可以查看当前文稿的目录并增强阅读体验。\n\n工具栏上的五个图标依次为：\n\n<i class=\"icon-list\"></i> 目录：快速导航当前文稿的目录结构以跳转到感兴趣的段落\n<i class=\"icon-chevron-sign-left\"></i> 视图：互换左边编辑区和右边预览区的位置\n<i class=\"icon-adjust\"></i> 主题：内置了黑白两种模式的主题，试试 **黑色主题**，超炫！\n<i class=\"icon-desktop\"></i> 阅读：心无旁骛的阅读模式提供超一流的阅读体验\n<i class=\"icon-fullscreen\"></i> 全屏：简洁，简洁，再简洁，一个完全沉浸式的写作和阅读环境\n\n## 阅读模式\n\n在 **阅读工具栏** 点击 <i class=\"icon-desktop\"></i> 或者按下 `Ctrl+Alt+M` 随即进入独立的阅读模式界面，我们在版面渲染上的每一个细节：字体，字号，行间距，前背景色都倾注了大量的时间，努力提升阅读的体验和品质。\n\n## 标签、分类和搜索\n\n在编辑区任意行首位置输入以下格式的文字可以标签当前文档：\n\n标签： 未分类\n\n标签以后的文稿在【文件列表】（Ctrl+Alt+F）里会按照标签分类，用户可以同时使用键盘或者鼠标浏览查看，或者在【文件列表】的搜索文本框内搜索标题关键字过滤文稿，如下图所示：\n\n![file-list](https://www.zybuluo.com/static/img/file-list.png)\n\n## 文稿发布和分享\n\n在您使用 Cmd Markdown 记录，创作，整理，阅读文稿的同时，我们不仅希望它是一个有力的工具，更希望您的思想和知识通过这个平台，连同优质的阅读体验，将他们分享给有相同志趣的人，进而鼓励更多的人来到这里记录分享他们的思想和知识，尝试点击 <i class=\"icon-share\"></i> (Ctrl+Alt+P) 发布这份文档给好友吧！\n\n------\n\n# 结束语\n\n再一次感谢您花费时间阅读这份欢迎稿，点击 <i class=\"icon-file\"></i> (Ctrl+Alt+N) 开始撰写新的文稿吧！祝您在这里记录、阅读、分享愉快！\n\n作者 [@ghosert][3]\n2015 年 06月 15日\n\n[^LaTeX]: 支持 **LaTeX** 编辑显示支持，例如：$\\sum_{i=1}^n a_i=0$， 访问 [MathJax][4] 参考更多使用方法。\n\n[^code]: 代码高亮功能支持包括 Java, Python, JavaScript 在内的，**四十一**种主流编程语言。\n\n[1]: https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown\n[2]: https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#cmd-markdown-高阶语法手册\n[3]: http://weibo.com/ghosert\n[4]: http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference\n","slug":"20160418_sun_CmdMarkdownExample","published":1,"updated":"2016-05-02T10:48:29.100Z","_id":"cinnbohk80000ecgo5bjo1mow","comments":1,"layout":"post","photos":[],"link":"","content":"<p>做个广告，Cmd Markdown 的官方说明，作者 <a href=\"http://weibo.com/ghosert\" target=\"_blank\" rel=\"external\">@ghosert</a>，详细请关注<br><a href=\"https://www.zybuluo.com/mdeditor\" target=\"_blank\" rel=\"external\">https://www.zybuluo.com/mdeditor</a></p>\n<hr>\n<h1 id=\"欢迎使用-Cmd-Markdown-编辑阅读器\"><a href=\"#欢迎使用-Cmd-Markdown-编辑阅读器\" class=\"headerlink\" title=\"欢迎使用 Cmd Markdown 编辑阅读器\"></a>欢迎使用 Cmd Markdown 编辑阅读器</h1><p>我们理解您需要更便捷更高效的工具记录思想，整理笔记、知识，并将其中承载的价值传播给他人，<strong>Cmd Markdown</strong> 是我们给出的答案 —— 我们为记录思想和分享知识提供更专业的工具。 您可以使用 Cmd Markdown：</p>\n<blockquote>\n<ul>\n<li>整理知识，学习笔记</li>\n<li>发布日记，杂文，所见所想</li>\n<li>撰写发布技术文稿（代码支持）</li>\n<li>撰写发布学术论文（LaTeX 公式支持）</li>\n</ul>\n</blockquote>\n<p><img src=\"https://www.zybuluo.com/static/img/logo.png\" alt=\"cmd-markdown-logo\"></p>\n<p>除了您现在看到的这个 Cmd Markdown 在线版本，您还可以前往以下网址下载：</p>\n<h2 id=\"Windows-Mac-Linux-全平台客户端\"><a href=\"#Windows-Mac-Linux-全平台客户端\" class=\"headerlink\" title=\"Windows/Mac/Linux 全平台客户端\"></a><a href=\"https://www.zybuluo.com/cmd/\" target=\"_blank\" rel=\"external\">Windows/Mac/Linux 全平台客户端</a></h2><blockquote>\n<p>请保留此份 Cmd Markdown 的欢迎稿兼使用说明，如需撰写新稿件，点击顶部工具栏右侧的 <i class=\"icon-file\"></i> <strong>新文稿</strong> 或者使用快捷键 <code>Ctrl+Alt+N</code>。</p>\n</blockquote>\n<hr>\n<h1 id=\"什么是-Markdown\"><a href=\"#什么是-Markdown\" class=\"headerlink\" title=\"什么是 Markdown\"></a>什么是 Markdown</h1><p>Markdown 是一种方便记忆、书写的纯文本标记语言，用户可以使用这些标记符号以最小的输入代价生成极富表现力的文档：譬如您正在阅读的这份文档。它使用简单的符号标记不同的标题，分割不同的段落，<strong>粗体</strong> 或者 <em>斜体</em> 某些文字，更棒的是，它还可以</p>\n<h2 id=\"制作一份待办事宜-Todo-列表\"><a href=\"#制作一份待办事宜-Todo-列表\" class=\"headerlink\" title=\"制作一份待办事宜 Todo 列表\"></a>制作一份待办事宜 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#13-待办事宜-todo-列表\" target=\"_blank\" rel=\"external\">Todo 列表</a></h2><ul>\n<li>[ ] 支持以 PDF 格式导出文稿</li>\n<li>[ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li>\n<li>[x] 新增 Todo 列表功能</li>\n<li>[x] 修复 LaTex 公式渲染问题</li>\n<li>[x] 新增 LaTex 公式编号功能</li>\n</ul>\n<h2 id=\"书写一个质能守恒公式-LaTeX\"><a href=\"#书写一个质能守恒公式-LaTeX\" class=\"headerlink\" title=\"书写一个质能守恒公式[^LaTeX]\"></a>书写一个质能守恒公式[^LaTeX]</h2><p>$$E=mc^2$$</p>\n<h2 id=\"高亮一段代码-code\"><a href=\"#高亮一段代码-code\" class=\"headerlink\" title=\"高亮一段代码[^code]\"></a>高亮一段代码[^code]</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@requires_authorization</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SomeClass</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    <span class=\"comment\"># A comment</span></span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">'hello world'</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"高效绘制-流程图\"><a href=\"#高效绘制-流程图\" class=\"headerlink\" title=\"高效绘制 流程图\"></a>高效绘制 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#7-流程图\" target=\"_blank\" rel=\"external\">流程图</a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">st=&gt;start: Start</span><br><span class=\"line\">op=&gt;operation: Your Operation</span><br><span class=\"line\">cond=&gt;condition: Yes or No?</span><br><span class=\"line\">e=&gt;end</span><br><span class=\"line\"></span><br><span class=\"line\">st-&gt;op-&gt;cond</span><br><span class=\"line\">cond(yes)-&gt;e</span><br><span class=\"line\">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>\n<h2 id=\"高效绘制-序列图\"><a href=\"#高效绘制-序列图\" class=\"headerlink\" title=\"高效绘制 序列图\"></a>高效绘制 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#8-序列图\" target=\"_blank\" rel=\"external\">序列图</a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class=\"line\">Note right of Bob: Bob thinks</span><br><span class=\"line\">Bob--&gt;Alice: I am good thanks!</span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制表格\"><a href=\"#绘制表格\" class=\"headerlink\" title=\"绘制表格\"></a>绘制表格</h2><table>\n<thead>\n<tr>\n<th>项目</th>\n<th style=\"text-align:right\">价格</th>\n<th style=\"text-align:center\">数量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>计算机</td>\n<td style=\"text-align:right\">\\$1600</td>\n<td style=\"text-align:center\">5</td>\n</tr>\n<tr>\n<td>手机</td>\n<td style=\"text-align:right\">\\$12</td>\n<td style=\"text-align:center\">12</td>\n</tr>\n<tr>\n<td>管线</td>\n<td style=\"text-align:right\">\\$1</td>\n<td style=\"text-align:center\">234</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"更详细语法说明\"><a href=\"#更详细语法说明\" class=\"headerlink\" title=\"更详细语法说明\"></a>更详细语法说明</h2><p>想要查看更详细的语法说明，可以参考我们准备的 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown\" target=\"_blank\" rel=\"external\">Cmd Markdown 简明语法手册</a>，进阶用户可以参考 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#cmd-markdown-高阶语法手册\" target=\"_blank\" rel=\"external\">Cmd Markdown 高阶语法手册</a> 了解更多高级功能。</p>\n<p>总而言之，不同于其它 <em>所见即所得</em> 的编辑器：你只需使用键盘专注于书写文本内容，就可以生成印刷级的排版格式，省却在键盘和工具栏之间来回切换，调整内容和格式的麻烦。<strong>Markdown 在流畅的书写和印刷级的阅读体验之间找到了平衡。</strong> 目前它已经成为世界上最大的技术分享网站 GitHub 和 技术问答网站 StackOverFlow 的御用书写格式。</p>\n<hr>\n<h1 id=\"什么是-Cmd-Markdown\"><a href=\"#什么是-Cmd-Markdown\" class=\"headerlink\" title=\"什么是 Cmd Markdown\"></a>什么是 Cmd Markdown</h1><p>您可以使用很多工具书写 Markdown，但是 Cmd Markdown 是这个星球上我们已知的、最好的 Markdown 工具——没有之一 ：）因为深信文字的力量，所以我们和你一样，对流畅书写，分享思想和知识，以及阅读体验有极致的追求，我们把对于这些诉求的回应整合在 Cmd Markdown，并且一次，两次，三次，乃至无数次地提升这个工具的体验，最终将它演化成一个 <strong>编辑/发布/阅读</strong> Markdown 的在线平台——您可以在任何地方，任何系统/设备上管理这里的文字。</p>\n<h2 id=\"实时同步预览\"><a href=\"#实时同步预览\" class=\"headerlink\" title=\"实时同步预览\"></a>实时同步预览</h2><p>我们将 Cmd Markdown 的主界面一分为二，左边为<strong>编辑区</strong>，右边为<strong>预览区</strong>，在编辑区的操作会实时地渲染到预览区方便查看最终的版面效果，并且如果你在其中一个区拖动滚动条，我们有一个巧妙的算法把另一个区的滚动条同步到等价的位置，超酷！</p>\n<h2 id=\"编辑工具栏\"><a href=\"#编辑工具栏\" class=\"headerlink\" title=\"编辑工具栏\"></a>编辑工具栏</h2><p>也许您还是一个 Markdown 语法的新手，在您完全熟悉它之前，我们在 <strong>编辑区</strong> 的顶部放置了一个如下图所示的工具栏，您可以使用鼠标在工具栏上调整格式，不过我们仍旧鼓励你使用键盘标记格式，提高书写的流畅度。</p>\n<p><img src=\"https://www.zybuluo.com/static/img/toolbar-editor.png\" alt=\"tool-editor\"></p>\n<h2 id=\"编辑模式\"><a href=\"#编辑模式\" class=\"headerlink\" title=\"编辑模式\"></a>编辑模式</h2><p>完全心无旁骛的方式编辑文字：点击 <strong>编辑工具栏</strong> 最右测的拉伸按钮或者按下 <code>Ctrl + M</code>，将 Cmd Markdown 切换到独立的编辑模式，这是一个极度简洁的写作环境，所有可能会引起分心的元素都已经被挪除，超清爽！</p>\n<h2 id=\"实时的云端文稿\"><a href=\"#实时的云端文稿\" class=\"headerlink\" title=\"实时的云端文稿\"></a>实时的云端文稿</h2><p>为了保障数据安全，Cmd Markdown 会将您每一次击键的内容保存至云端，同时在 <strong>编辑工具栏</strong> 的最右侧提示 <code>已保存</code> 的字样。无需担心浏览器崩溃，机器掉电或者地震，海啸——在编辑的过程中随时关闭浏览器或者机器，下一次回到 Cmd Markdown 的时候继续写作。</p>\n<h2 id=\"离线模式\"><a href=\"#离线模式\" class=\"headerlink\" title=\"离线模式\"></a>离线模式</h2><p>在网络环境不稳定的情况下记录文字一样很安全！在您写作的时候，如果电脑突然失去网络连接，Cmd Markdown 会智能切换至离线模式，将您后续键入的文字保存在本地，直到网络恢复再将他们传送至云端，即使在网络恢复前关闭浏览器或者电脑，一样没有问题，等到下次开启 Cmd Markdown 的时候，她会提醒您将离线保存的文字传送至云端。简而言之，我们尽最大的努力保障您文字的安全。</p>\n<h2 id=\"管理工具栏\"><a href=\"#管理工具栏\" class=\"headerlink\" title=\"管理工具栏\"></a>管理工具栏</h2><p>为了便于管理您的文稿，在 <strong>预览区</strong> 的顶部放置了如下所示的 <strong>管理工具栏</strong>：</p>\n<p><img src=\"https://www.zybuluo.com/static/img/toolbar-manager.jpg\" alt=\"tool-manager\"></p>\n<p>通过管理工具栏可以：</p>\n<p><i class=\"icon-share\"></i> 发布：将当前的文稿生成固定链接，在网络上发布，分享<br><i class=\"icon-file\"></i> 新建：开始撰写一篇新的文稿<br><i class=\"icon-trash\"></i> 删除：删除当前的文稿<br><i class=\"icon-cloud\"></i> 导出：将当前的文稿转化为 Markdown 文本或者 Html 格式，并导出到本地<br><i class=\"icon-reorder\"></i> 列表：所有新增和过往的文稿都可以在这里查看、操作<br><i class=\"icon-pencil\"></i> 模式：切换 普通/Vim/Emacs 编辑模式</p>\n<h2 id=\"阅读工具栏\"><a href=\"#阅读工具栏\" class=\"headerlink\" title=\"阅读工具栏\"></a>阅读工具栏</h2><p><img src=\"https://www.zybuluo.com/static/img/toolbar-reader.jpg\" alt=\"tool-manager\"></p>\n<p>通过 <strong>预览区</strong> 右上角的 <strong>阅读工具栏</strong>，可以查看当前文稿的目录并增强阅读体验。</p>\n<p>工具栏上的五个图标依次为：</p>\n<p><i class=\"icon-list\"></i> 目录：快速导航当前文稿的目录结构以跳转到感兴趣的段落<br><i class=\"icon-chevron-sign-left\"></i> 视图：互换左边编辑区和右边预览区的位置<br><i class=\"icon-adjust\"></i> 主题：内置了黑白两种模式的主题，试试 <strong>黑色主题</strong>，超炫！<br><i class=\"icon-desktop\"></i> 阅读：心无旁骛的阅读模式提供超一流的阅读体验<br><i class=\"icon-fullscreen\"></i> 全屏：简洁，简洁，再简洁，一个完全沉浸式的写作和阅读环境</p>\n<h2 id=\"阅读模式\"><a href=\"#阅读模式\" class=\"headerlink\" title=\"阅读模式\"></a>阅读模式</h2><p>在 <strong>阅读工具栏</strong> 点击 <i class=\"icon-desktop\"></i> 或者按下 <code>Ctrl+Alt+M</code> 随即进入独立的阅读模式界面，我们在版面渲染上的每一个细节：字体，字号，行间距，前背景色都倾注了大量的时间，努力提升阅读的体验和品质。</p>\n<h2 id=\"标签、分类和搜索\"><a href=\"#标签、分类和搜索\" class=\"headerlink\" title=\"标签、分类和搜索\"></a>标签、分类和搜索</h2><p>在编辑区任意行首位置输入以下格式的文字可以标签当前文档：</p>\n<p>标签： 未分类</p>\n<p>标签以后的文稿在【文件列表】（Ctrl+Alt+F）里会按照标签分类，用户可以同时使用键盘或者鼠标浏览查看，或者在【文件列表】的搜索文本框内搜索标题关键字过滤文稿，如下图所示：</p>\n<p><img src=\"https://www.zybuluo.com/static/img/file-list.png\" alt=\"file-list\"></p>\n<h2 id=\"文稿发布和分享\"><a href=\"#文稿发布和分享\" class=\"headerlink\" title=\"文稿发布和分享\"></a>文稿发布和分享</h2><p>在您使用 Cmd Markdown 记录，创作，整理，阅读文稿的同时，我们不仅希望它是一个有力的工具，更希望您的思想和知识通过这个平台，连同优质的阅读体验，将他们分享给有相同志趣的人，进而鼓励更多的人来到这里记录分享他们的思想和知识，尝试点击 <i class=\"icon-share\"></i> (Ctrl+Alt+P) 发布这份文档给好友吧！</p>\n<hr>\n<h1 id=\"结束语\"><a href=\"#结束语\" class=\"headerlink\" title=\"结束语\"></a>结束语</h1><p>再一次感谢您花费时间阅读这份欢迎稿，点击 <i class=\"icon-file\"></i> (Ctrl+Alt+N) 开始撰写新的文稿吧！祝您在这里记录、阅读、分享愉快！</p>\n<p>作者 <a href=\"http://weibo.com/ghosert\" target=\"_blank\" rel=\"external\">@ghosert</a><br>2015 年 06月 15日</p>\n<p>[^LaTeX]: 支持 <strong>LaTeX</strong> 编辑显示支持，例如：$\\sum_{i=1}^n a_i=0$， 访问 <a href=\"http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference\" target=\"_blank\" rel=\"external\">MathJax</a> 参考更多使用方法。</p>\n<p>[^code]: 代码高亮功能支持包括 Java, Python, JavaScript 在内的，<strong>四十一</strong>种主流编程语言。</p>\n","excerpt":"","more":"<p>做个广告，Cmd Markdown 的官方说明，作者 <a href=\"http://weibo.com/ghosert\">@ghosert</a>，详细请关注<br><a href=\"https://www.zybuluo.com/mdeditor\">https://www.zybuluo.com/mdeditor</a></p>\n<hr>\n<h1 id=\"欢迎使用-Cmd-Markdown-编辑阅读器\"><a href=\"#欢迎使用-Cmd-Markdown-编辑阅读器\" class=\"headerlink\" title=\"欢迎使用 Cmd Markdown 编辑阅读器\"></a>欢迎使用 Cmd Markdown 编辑阅读器</h1><p>我们理解您需要更便捷更高效的工具记录思想，整理笔记、知识，并将其中承载的价值传播给他人，<strong>Cmd Markdown</strong> 是我们给出的答案 —— 我们为记录思想和分享知识提供更专业的工具。 您可以使用 Cmd Markdown：</p>\n<blockquote>\n<ul>\n<li>整理知识，学习笔记</li>\n<li>发布日记，杂文，所见所想</li>\n<li>撰写发布技术文稿（代码支持）</li>\n<li>撰写发布学术论文（LaTeX 公式支持）</li>\n</ul>\n</blockquote>\n<p><img src=\"https://www.zybuluo.com/static/img/logo.png\" alt=\"cmd-markdown-logo\"></p>\n<p>除了您现在看到的这个 Cmd Markdown 在线版本，您还可以前往以下网址下载：</p>\n<h2 id=\"Windows-Mac-Linux-全平台客户端\"><a href=\"#Windows-Mac-Linux-全平台客户端\" class=\"headerlink\" title=\"Windows/Mac/Linux 全平台客户端\"></a><a href=\"https://www.zybuluo.com/cmd/\">Windows/Mac/Linux 全平台客户端</a></h2><blockquote>\n<p>请保留此份 Cmd Markdown 的欢迎稿兼使用说明，如需撰写新稿件，点击顶部工具栏右侧的 <i class=\"icon-file\"></i> <strong>新文稿</strong> 或者使用快捷键 <code>Ctrl+Alt+N</code>。</p>\n</blockquote>\n<hr>\n<h1 id=\"什么是-Markdown\"><a href=\"#什么是-Markdown\" class=\"headerlink\" title=\"什么是 Markdown\"></a>什么是 Markdown</h1><p>Markdown 是一种方便记忆、书写的纯文本标记语言，用户可以使用这些标记符号以最小的输入代价生成极富表现力的文档：譬如您正在阅读的这份文档。它使用简单的符号标记不同的标题，分割不同的段落，<strong>粗体</strong> 或者 <em>斜体</em> 某些文字，更棒的是，它还可以</p>\n<h2 id=\"制作一份待办事宜-Todo-列表\"><a href=\"#制作一份待办事宜-Todo-列表\" class=\"headerlink\" title=\"制作一份待办事宜 Todo 列表\"></a>制作一份待办事宜 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#13-待办事宜-todo-列表\">Todo 列表</a></h2><ul>\n<li>[ ] 支持以 PDF 格式导出文稿</li>\n<li>[ ] 改进 Cmd 渲染算法，使用局部渲染技术提高渲染效率</li>\n<li>[x] 新增 Todo 列表功能</li>\n<li>[x] 修复 LaTex 公式渲染问题</li>\n<li>[x] 新增 LaTex 公式编号功能</li>\n</ul>\n<h2 id=\"书写一个质能守恒公式-LaTeX\"><a href=\"#书写一个质能守恒公式-LaTeX\" class=\"headerlink\" title=\"书写一个质能守恒公式[^LaTeX]\"></a>书写一个质能守恒公式[^LaTeX]</h2><p>$$E=mc^2$$</p>\n<h2 id=\"高亮一段代码-code\"><a href=\"#高亮一段代码-code\" class=\"headerlink\" title=\"高亮一段代码[^code]\"></a>高亮一段代码[^code]</h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@requires_authorization</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SomeClass</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">'__main__'</span>:</span><br><span class=\"line\">    <span class=\"comment\"># A comment</span></span><br><span class=\"line\">    <span class=\"keyword\">print</span> <span class=\"string\">'hello world'</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"高效绘制-流程图\"><a href=\"#高效绘制-流程图\" class=\"headerlink\" title=\"高效绘制 流程图\"></a>高效绘制 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#7-流程图\">流程图</a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">st=&gt;start: Start</span><br><span class=\"line\">op=&gt;operation: Your Operation</span><br><span class=\"line\">cond=&gt;condition: Yes or No?</span><br><span class=\"line\">e=&gt;end</span><br><span class=\"line\"></span><br><span class=\"line\">st-&gt;op-&gt;cond</span><br><span class=\"line\">cond(yes)-&gt;e</span><br><span class=\"line\">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>\n<h2 id=\"高效绘制-序列图\"><a href=\"#高效绘制-序列图\" class=\"headerlink\" title=\"高效绘制 序列图\"></a>高效绘制 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#8-序列图\">序列图</a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class=\"line\">Note right of Bob: Bob thinks</span><br><span class=\"line\">Bob--&gt;Alice: I am good thanks!</span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制表格\"><a href=\"#绘制表格\" class=\"headerlink\" title=\"绘制表格\"></a>绘制表格</h2><table>\n<thead>\n<tr>\n<th>项目</th>\n<th style=\"text-align:right\">价格</th>\n<th style=\"text-align:center\">数量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>计算机</td>\n<td style=\"text-align:right\">\\$1600</td>\n<td style=\"text-align:center\">5</td>\n</tr>\n<tr>\n<td>手机</td>\n<td style=\"text-align:right\">\\$12</td>\n<td style=\"text-align:center\">12</td>\n</tr>\n<tr>\n<td>管线</td>\n<td style=\"text-align:right\">\\$1</td>\n<td style=\"text-align:center\">234</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"更详细语法说明\"><a href=\"#更详细语法说明\" class=\"headerlink\" title=\"更详细语法说明\"></a>更详细语法说明</h2><p>想要查看更详细的语法说明，可以参考我们准备的 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown\">Cmd Markdown 简明语法手册</a>，进阶用户可以参考 <a href=\"https://www.zybuluo.com/mdeditor?url=https://www.zybuluo.com/static/editor/md-help.markdown#cmd-markdown-高阶语法手册\">Cmd Markdown 高阶语法手册</a> 了解更多高级功能。</p>\n<p>总而言之，不同于其它 <em>所见即所得</em> 的编辑器：你只需使用键盘专注于书写文本内容，就可以生成印刷级的排版格式，省却在键盘和工具栏之间来回切换，调整内容和格式的麻烦。<strong>Markdown 在流畅的书写和印刷级的阅读体验之间找到了平衡。</strong> 目前它已经成为世界上最大的技术分享网站 GitHub 和 技术问答网站 StackOverFlow 的御用书写格式。</p>\n<hr>\n<h1 id=\"什么是-Cmd-Markdown\"><a href=\"#什么是-Cmd-Markdown\" class=\"headerlink\" title=\"什么是 Cmd Markdown\"></a>什么是 Cmd Markdown</h1><p>您可以使用很多工具书写 Markdown，但是 Cmd Markdown 是这个星球上我们已知的、最好的 Markdown 工具——没有之一 ：）因为深信文字的力量，所以我们和你一样，对流畅书写，分享思想和知识，以及阅读体验有极致的追求，我们把对于这些诉求的回应整合在 Cmd Markdown，并且一次，两次，三次，乃至无数次地提升这个工具的体验，最终将它演化成一个 <strong>编辑/发布/阅读</strong> Markdown 的在线平台——您可以在任何地方，任何系统/设备上管理这里的文字。</p>\n<h2 id=\"实时同步预览\"><a href=\"#实时同步预览\" class=\"headerlink\" title=\"实时同步预览\"></a>实时同步预览</h2><p>我们将 Cmd Markdown 的主界面一分为二，左边为<strong>编辑区</strong>，右边为<strong>预览区</strong>，在编辑区的操作会实时地渲染到预览区方便查看最终的版面效果，并且如果你在其中一个区拖动滚动条，我们有一个巧妙的算法把另一个区的滚动条同步到等价的位置，超酷！</p>\n<h2 id=\"编辑工具栏\"><a href=\"#编辑工具栏\" class=\"headerlink\" title=\"编辑工具栏\"></a>编辑工具栏</h2><p>也许您还是一个 Markdown 语法的新手，在您完全熟悉它之前，我们在 <strong>编辑区</strong> 的顶部放置了一个如下图所示的工具栏，您可以使用鼠标在工具栏上调整格式，不过我们仍旧鼓励你使用键盘标记格式，提高书写的流畅度。</p>\n<p><img src=\"https://www.zybuluo.com/static/img/toolbar-editor.png\" alt=\"tool-editor\"></p>\n<h2 id=\"编辑模式\"><a href=\"#编辑模式\" class=\"headerlink\" title=\"编辑模式\"></a>编辑模式</h2><p>完全心无旁骛的方式编辑文字：点击 <strong>编辑工具栏</strong> 最右测的拉伸按钮或者按下 <code>Ctrl + M</code>，将 Cmd Markdown 切换到独立的编辑模式，这是一个极度简洁的写作环境，所有可能会引起分心的元素都已经被挪除，超清爽！</p>\n<h2 id=\"实时的云端文稿\"><a href=\"#实时的云端文稿\" class=\"headerlink\" title=\"实时的云端文稿\"></a>实时的云端文稿</h2><p>为了保障数据安全，Cmd Markdown 会将您每一次击键的内容保存至云端，同时在 <strong>编辑工具栏</strong> 的最右侧提示 <code>已保存</code> 的字样。无需担心浏览器崩溃，机器掉电或者地震，海啸——在编辑的过程中随时关闭浏览器或者机器，下一次回到 Cmd Markdown 的时候继续写作。</p>\n<h2 id=\"离线模式\"><a href=\"#离线模式\" class=\"headerlink\" title=\"离线模式\"></a>离线模式</h2><p>在网络环境不稳定的情况下记录文字一样很安全！在您写作的时候，如果电脑突然失去网络连接，Cmd Markdown 会智能切换至离线模式，将您后续键入的文字保存在本地，直到网络恢复再将他们传送至云端，即使在网络恢复前关闭浏览器或者电脑，一样没有问题，等到下次开启 Cmd Markdown 的时候，她会提醒您将离线保存的文字传送至云端。简而言之，我们尽最大的努力保障您文字的安全。</p>\n<h2 id=\"管理工具栏\"><a href=\"#管理工具栏\" class=\"headerlink\" title=\"管理工具栏\"></a>管理工具栏</h2><p>为了便于管理您的文稿，在 <strong>预览区</strong> 的顶部放置了如下所示的 <strong>管理工具栏</strong>：</p>\n<p><img src=\"https://www.zybuluo.com/static/img/toolbar-manager.jpg\" alt=\"tool-manager\"></p>\n<p>通过管理工具栏可以：</p>\n<p><i class=\"icon-share\"></i> 发布：将当前的文稿生成固定链接，在网络上发布，分享<br><i class=\"icon-file\"></i> 新建：开始撰写一篇新的文稿<br><i class=\"icon-trash\"></i> 删除：删除当前的文稿<br><i class=\"icon-cloud\"></i> 导出：将当前的文稿转化为 Markdown 文本或者 Html 格式，并导出到本地<br><i class=\"icon-reorder\"></i> 列表：所有新增和过往的文稿都可以在这里查看、操作<br><i class=\"icon-pencil\"></i> 模式：切换 普通/Vim/Emacs 编辑模式</p>\n<h2 id=\"阅读工具栏\"><a href=\"#阅读工具栏\" class=\"headerlink\" title=\"阅读工具栏\"></a>阅读工具栏</h2><p><img src=\"https://www.zybuluo.com/static/img/toolbar-reader.jpg\" alt=\"tool-manager\"></p>\n<p>通过 <strong>预览区</strong> 右上角的 <strong>阅读工具栏</strong>，可以查看当前文稿的目录并增强阅读体验。</p>\n<p>工具栏上的五个图标依次为：</p>\n<p><i class=\"icon-list\"></i> 目录：快速导航当前文稿的目录结构以跳转到感兴趣的段落<br><i class=\"icon-chevron-sign-left\"></i> 视图：互换左边编辑区和右边预览区的位置<br><i class=\"icon-adjust\"></i> 主题：内置了黑白两种模式的主题，试试 <strong>黑色主题</strong>，超炫！<br><i class=\"icon-desktop\"></i> 阅读：心无旁骛的阅读模式提供超一流的阅读体验<br><i class=\"icon-fullscreen\"></i> 全屏：简洁，简洁，再简洁，一个完全沉浸式的写作和阅读环境</p>\n<h2 id=\"阅读模式\"><a href=\"#阅读模式\" class=\"headerlink\" title=\"阅读模式\"></a>阅读模式</h2><p>在 <strong>阅读工具栏</strong> 点击 <i class=\"icon-desktop\"></i> 或者按下 <code>Ctrl+Alt+M</code> 随即进入独立的阅读模式界面，我们在版面渲染上的每一个细节：字体，字号，行间距，前背景色都倾注了大量的时间，努力提升阅读的体验和品质。</p>\n<h2 id=\"标签、分类和搜索\"><a href=\"#标签、分类和搜索\" class=\"headerlink\" title=\"标签、分类和搜索\"></a>标签、分类和搜索</h2><p>在编辑区任意行首位置输入以下格式的文字可以标签当前文档：</p>\n<p>标签： 未分类</p>\n<p>标签以后的文稿在【文件列表】（Ctrl+Alt+F）里会按照标签分类，用户可以同时使用键盘或者鼠标浏览查看，或者在【文件列表】的搜索文本框内搜索标题关键字过滤文稿，如下图所示：</p>\n<p><img src=\"https://www.zybuluo.com/static/img/file-list.png\" alt=\"file-list\"></p>\n<h2 id=\"文稿发布和分享\"><a href=\"#文稿发布和分享\" class=\"headerlink\" title=\"文稿发布和分享\"></a>文稿发布和分享</h2><p>在您使用 Cmd Markdown 记录，创作，整理，阅读文稿的同时，我们不仅希望它是一个有力的工具，更希望您的思想和知识通过这个平台，连同优质的阅读体验，将他们分享给有相同志趣的人，进而鼓励更多的人来到这里记录分享他们的思想和知识，尝试点击 <i class=\"icon-share\"></i> (Ctrl+Alt+P) 发布这份文档给好友吧！</p>\n<hr>\n<h1 id=\"结束语\"><a href=\"#结束语\" class=\"headerlink\" title=\"结束语\"></a>结束语</h1><p>再一次感谢您花费时间阅读这份欢迎稿，点击 <i class=\"icon-file\"></i> (Ctrl+Alt+N) 开始撰写新的文稿吧！祝您在这里记录、阅读、分享愉快！</p>\n<p>作者 <a href=\"http://weibo.com/ghosert\">@ghosert</a><br>2015 年 06月 15日</p>\n<p>[^LaTeX]: 支持 <strong>LaTeX</strong> 编辑显示支持，例如：$\\sum_{i=1}^n a_i=0$， 访问 <a href=\"http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference\">MathJax</a> 参考更多使用方法。</p>\n<p>[^code]: 代码高亮功能支持包括 Java, Python, JavaScript 在内的，<strong>四十一</strong>种主流编程语言。</p>\n"},{"title":"Build Assimp from Src Code","date":"2016-04-30T14:33:20.000Z","_content":"\nDraft for Assimp buliding.\n\n------\n\n# Intruduction (from offical site)\n\n> Open Asset Import Library (short name: Assimp) is a portable Open Source library to import\n> various well-known 3D model formats in a uniform manner.\n> ...\n> The most recent version also knows how to export 3d files and is therefore suitable as a\n> general-purpose 3D model converter.\n> ...\n> Written in C++, it is available under a liberal BSD license.\n> There is a C API as well as bindings to various other languages, including C#/.net, Python and D.\n\n------\n\n# Feature List\n\n> * Written in portable, ISO-compliant C++\n> * Easily configurable and customizable\n> * Core interface / API is provided for both C++ and C\n> * Command-line interface to perform common operations (i.e. quick file stats, convert models, extract embedded textures) from the shell\n> * Imports bones, vertex weights and animations (i.e. skinning, skeletal animations)\n> * Loads multiple UV and vertex color channels (current limit is 8)\n> * Works well with UNICODE input files\n> * Supports complex multi-layer materials\n> * Supports embedded textures, both compressed (e.g. PNG) or just raw color data\n> * No external dependencies except boost (zlib and irrxml are also needed, but they're included in the repository so you don't need to bother). And there's even a workaround to * compile Assimp without boost - with some minor limitations.\n> * Due to its export interface, Assimp serves as general-purpose 3D model converter\n\nThe last one is the most import feature for me, and it just in most recent version in github.\n\n------\n\n# Install DX11\n\n## download DX11 SDk\n\nThis is the June 2010 DirectX SDK.\nhttp://www.microsoft.com/download/details.aspx?id=6812\n\n## maybe you will see error \"S1023\"\n\n\"S1023\" error when you install the DirectX SDK (June 2010)\nhttps://support.microsoft.com/en-us/kb/2728613\n\n## resolution\n\nTo resolve this issue, you must uninstall all versions of the Visual C++ 2010 Redistributable before installing the June 2010 DirectX SDK. You may have one or more of the following products installed:\n\n- Microsoft Visual C++ 2010 x86 Redistributable\n- Microsoft Visual C++ 2010 x64 Redistributable\n\nYou can use Add or Remove Programs in Control Panel to uninstall the products.\nOr, you can run the following commands from an administrator command prompt:\n\n```\nMsiExec.exe /passive /X{F0C3E5D1-1ADE-321E-8167-68EF0DE699A5}\nMsiExec.exe /passive /X{1D8E6291-B0D5-35EC-8441-6616F567A0F7}\n```\n\n## install DX SDK again\n\nAfter uninstalling the Microsoft Visual C++ 2010 Redistributable products,\nyou may install the June 2010 DirectX SDK.\nhttp://www.microsoft.com/download/details.aspx?id=6812\n\n## install MVC++2010 x86/64 again\n\nAfter installing the June 2010 DirectX SDK,\nyou may then reinstall the most current version of the Visual C++ 2010 Redistributable Package.\nhttp://www.microsoft.com/download/details.aspx?id=26999\n\n------\n\n# Clone laster version from github\n\n```shell\ngit clone https://github.com/assimp/assimp.git\n```\n\n------\n\n# Generate MSVC prj(x64) by CMake\n\nx64 is just because now we using python-64bit\n\n```\ncd assimp\ncmake -G \"Visual Studio 14 2015 Win64\" CMakeLists.txt\n```\n\n- build \"ALL_BUILD\" by MSVC\n- add ./assimp/bin/Release/  to $PATH\n\n------\n\n# Install Python port\n\n```shell\ncd ./assimp/port/PyAssimp\npython setup.py install\n\n```\n\n------\n\n# Try to run without error\n\ntry to run script as bellow without error\n\n```python\nfrom pyassimp import *\n```\n","source":"_posts/20160501_sun_BuildAssimpSrcCode.md","raw":"---\ntitle: Build Assimp from Src Code\ndate: 2016-05-01 00:33:20\ntags: Assimp\ncategories: CG\n---\n\nDraft for Assimp buliding.\n\n------\n\n# Intruduction (from offical site)\n\n> Open Asset Import Library (short name: Assimp) is a portable Open Source library to import\n> various well-known 3D model formats in a uniform manner.\n> ...\n> The most recent version also knows how to export 3d files and is therefore suitable as a\n> general-purpose 3D model converter.\n> ...\n> Written in C++, it is available under a liberal BSD license.\n> There is a C API as well as bindings to various other languages, including C#/.net, Python and D.\n\n------\n\n# Feature List\n\n> * Written in portable, ISO-compliant C++\n> * Easily configurable and customizable\n> * Core interface / API is provided for both C++ and C\n> * Command-line interface to perform common operations (i.e. quick file stats, convert models, extract embedded textures) from the shell\n> * Imports bones, vertex weights and animations (i.e. skinning, skeletal animations)\n> * Loads multiple UV and vertex color channels (current limit is 8)\n> * Works well with UNICODE input files\n> * Supports complex multi-layer materials\n> * Supports embedded textures, both compressed (e.g. PNG) or just raw color data\n> * No external dependencies except boost (zlib and irrxml are also needed, but they're included in the repository so you don't need to bother). And there's even a workaround to * compile Assimp without boost - with some minor limitations.\n> * Due to its export interface, Assimp serves as general-purpose 3D model converter\n\nThe last one is the most import feature for me, and it just in most recent version in github.\n\n------\n\n# Install DX11\n\n## download DX11 SDk\n\nThis is the June 2010 DirectX SDK.\nhttp://www.microsoft.com/download/details.aspx?id=6812\n\n## maybe you will see error \"S1023\"\n\n\"S1023\" error when you install the DirectX SDK (June 2010)\nhttps://support.microsoft.com/en-us/kb/2728613\n\n## resolution\n\nTo resolve this issue, you must uninstall all versions of the Visual C++ 2010 Redistributable before installing the June 2010 DirectX SDK. You may have one or more of the following products installed:\n\n- Microsoft Visual C++ 2010 x86 Redistributable\n- Microsoft Visual C++ 2010 x64 Redistributable\n\nYou can use Add or Remove Programs in Control Panel to uninstall the products.\nOr, you can run the following commands from an administrator command prompt:\n\n```\nMsiExec.exe /passive /X{F0C3E5D1-1ADE-321E-8167-68EF0DE699A5}\nMsiExec.exe /passive /X{1D8E6291-B0D5-35EC-8441-6616F567A0F7}\n```\n\n## install DX SDK again\n\nAfter uninstalling the Microsoft Visual C++ 2010 Redistributable products,\nyou may install the June 2010 DirectX SDK.\nhttp://www.microsoft.com/download/details.aspx?id=6812\n\n## install MVC++2010 x86/64 again\n\nAfter installing the June 2010 DirectX SDK,\nyou may then reinstall the most current version of the Visual C++ 2010 Redistributable Package.\nhttp://www.microsoft.com/download/details.aspx?id=26999\n\n------\n\n# Clone laster version from github\n\n```shell\ngit clone https://github.com/assimp/assimp.git\n```\n\n------\n\n# Generate MSVC prj(x64) by CMake\n\nx64 is just because now we using python-64bit\n\n```\ncd assimp\ncmake -G \"Visual Studio 14 2015 Win64\" CMakeLists.txt\n```\n\n- build \"ALL_BUILD\" by MSVC\n- add ./assimp/bin/Release/  to $PATH\n\n------\n\n# Install Python port\n\n```shell\ncd ./assimp/port/PyAssimp\npython setup.py install\n\n```\n\n------\n\n# Try to run without error\n\ntry to run script as bellow without error\n\n```python\nfrom pyassimp import *\n```\n","slug":"20160501_sun_BuildAssimpSrcCode","published":1,"updated":"2016-05-02T10:47:26.743Z","_id":"cinnbohkq0002ecgo4ow4niee","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Draft for Assimp buliding.</p>\n<hr>\n<h1 id=\"Intruduction-from-offical-site\"><a href=\"#Intruduction-from-offical-site\" class=\"headerlink\" title=\"Intruduction (from offical site)\"></a>Intruduction (from offical site)</h1><blockquote>\n<p>Open Asset Import Library (short name: Assimp) is a portable Open Source library to import<br>various well-known 3D model formats in a uniform manner.<br>…<br>The most recent version also knows how to export 3d files and is therefore suitable as a<br>general-purpose 3D model converter.<br>…<br>Written in C++, it is available under a liberal BSD license.<br>There is a C API as well as bindings to various other languages, including C#/.net, Python and D.</p>\n</blockquote>\n<hr>\n<h1 id=\"Feature-List\"><a href=\"#Feature-List\" class=\"headerlink\" title=\"Feature List\"></a>Feature List</h1><blockquote>\n<ul>\n<li>Written in portable, ISO-compliant C++</li>\n<li>Easily configurable and customizable</li>\n<li>Core interface / API is provided for both C++ and C</li>\n<li>Command-line interface to perform common operations (i.e. quick file stats, convert models, extract embedded textures) from the shell</li>\n<li>Imports bones, vertex weights and animations (i.e. skinning, skeletal animations)</li>\n<li>Loads multiple UV and vertex color channels (current limit is 8)</li>\n<li>Works well with UNICODE input files</li>\n<li>Supports complex multi-layer materials</li>\n<li>Supports embedded textures, both compressed (e.g. PNG) or just raw color data</li>\n<li>No external dependencies except boost (zlib and irrxml are also needed, but they’re included in the repository so you don’t need to bother). And there’s even a workaround to * compile Assimp without boost - with some minor limitations.</li>\n<li>Due to its export interface, Assimp serves as general-purpose 3D model converter</li>\n</ul>\n</blockquote>\n<p>The last one is the most import feature for me, and it just in most recent version in github.</p>\n<hr>\n<h1 id=\"Install-DX11\"><a href=\"#Install-DX11\" class=\"headerlink\" title=\"Install DX11\"></a>Install DX11</h1><h2 id=\"download-DX11-SDk\"><a href=\"#download-DX11-SDk\" class=\"headerlink\" title=\"download DX11 SDk\"></a>download DX11 SDk</h2><p>This is the June 2010 DirectX SDK.<br><a href=\"http://www.microsoft.com/download/details.aspx?id=6812\" target=\"_blank\" rel=\"external\">http://www.microsoft.com/download/details.aspx?id=6812</a></p>\n<h2 id=\"maybe-you-will-see-error-“S1023”\"><a href=\"#maybe-you-will-see-error-“S1023”\" class=\"headerlink\" title=\"maybe you will see error “S1023”\"></a>maybe you will see error “S1023”</h2><p>“S1023” error when you install the DirectX SDK (June 2010)<br><a href=\"https://support.microsoft.com/en-us/kb/2728613\" target=\"_blank\" rel=\"external\">https://support.microsoft.com/en-us/kb/2728613</a></p>\n<h2 id=\"resolution\"><a href=\"#resolution\" class=\"headerlink\" title=\"resolution\"></a>resolution</h2><p>To resolve this issue, you must uninstall all versions of the Visual C++ 2010 Redistributable before installing the June 2010 DirectX SDK. You may have one or more of the following products installed:</p>\n<ul>\n<li>Microsoft Visual C++ 2010 x86 Redistributable</li>\n<li>Microsoft Visual C++ 2010 x64 Redistributable</li>\n</ul>\n<p>You can use Add or Remove Programs in Control Panel to uninstall the products.<br>Or, you can run the following commands from an administrator command prompt:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MsiExec.exe /passive /X&#123;F0C3E5D1-1ADE-321E-8167-68EF0DE699A5&#125;</span><br><span class=\"line\">MsiExec.exe /passive /X&#123;1D8E6291-B0D5-35EC-8441-6616F567A0F7&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"install-DX-SDK-again\"><a href=\"#install-DX-SDK-again\" class=\"headerlink\" title=\"install DX SDK again\"></a>install DX SDK again</h2><p>After uninstalling the Microsoft Visual C++ 2010 Redistributable products,<br>you may install the June 2010 DirectX SDK.<br><a href=\"http://www.microsoft.com/download/details.aspx?id=6812\" target=\"_blank\" rel=\"external\">http://www.microsoft.com/download/details.aspx?id=6812</a></p>\n<h2 id=\"install-MVC-2010-x86-64-again\"><a href=\"#install-MVC-2010-x86-64-again\" class=\"headerlink\" title=\"install MVC++2010 x86/64 again\"></a>install MVC++2010 x86/64 again</h2><p>After installing the June 2010 DirectX SDK,<br>you may then reinstall the most current version of the Visual C++ 2010 Redistributable Package.<br><a href=\"http://www.microsoft.com/download/details.aspx?id=26999\" target=\"_blank\" rel=\"external\">http://www.microsoft.com/download/details.aspx?id=26999</a></p>\n<hr>\n<h1 id=\"Clone-laster-version-from-github\"><a href=\"#Clone-laster-version-from-github\" class=\"headerlink\" title=\"Clone laster version from github\"></a>Clone laster version from github</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/assimp/assimp.git</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Generate-MSVC-prj-x64-by-CMake\"><a href=\"#Generate-MSVC-prj-x64-by-CMake\" class=\"headerlink\" title=\"Generate MSVC prj(x64) by CMake\"></a>Generate MSVC prj(x64) by CMake</h1><p>x64 is just because now we using python-64bit</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd assimp</span><br><span class=\"line\">cmake -G &quot;Visual Studio 14 2015 Win64&quot; CMakeLists.txt</span><br></pre></td></tr></table></figure>\n<ul>\n<li>build “ALL_BUILD” by MSVC</li>\n<li>add ./assimp/bin/Release/  to $PATH</li>\n</ul>\n<hr>\n<h1 id=\"Install-Python-port\"><a href=\"#Install-Python-port\" class=\"headerlink\" title=\"Install Python port\"></a>Install Python port</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ./assimp/port/PyAssimp</span><br><span class=\"line\">python setup.py install</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Try-to-run-without-error\"><a href=\"#Try-to-run-without-error\" class=\"headerlink\" title=\"Try to run without error\"></a>Try to run without error</h1><p>try to run script as bellow without error</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pyassimp <span class=\"keyword\">import</span> *</span><br></pre></td></tr></table></figure>\n","excerpt":"","more":"<p>Draft for Assimp buliding.</p>\n<hr>\n<h1 id=\"Intruduction-from-offical-site\"><a href=\"#Intruduction-from-offical-site\" class=\"headerlink\" title=\"Intruduction (from offical site)\"></a>Intruduction (from offical site)</h1><blockquote>\n<p>Open Asset Import Library (short name: Assimp) is a portable Open Source library to import<br>various well-known 3D model formats in a uniform manner.<br>…<br>The most recent version also knows how to export 3d files and is therefore suitable as a<br>general-purpose 3D model converter.<br>…<br>Written in C++, it is available under a liberal BSD license.<br>There is a C API as well as bindings to various other languages, including C#/.net, Python and D.</p>\n</blockquote>\n<hr>\n<h1 id=\"Feature-List\"><a href=\"#Feature-List\" class=\"headerlink\" title=\"Feature List\"></a>Feature List</h1><blockquote>\n<ul>\n<li>Written in portable, ISO-compliant C++</li>\n<li>Easily configurable and customizable</li>\n<li>Core interface / API is provided for both C++ and C</li>\n<li>Command-line interface to perform common operations (i.e. quick file stats, convert models, extract embedded textures) from the shell</li>\n<li>Imports bones, vertex weights and animations (i.e. skinning, skeletal animations)</li>\n<li>Loads multiple UV and vertex color channels (current limit is 8)</li>\n<li>Works well with UNICODE input files</li>\n<li>Supports complex multi-layer materials</li>\n<li>Supports embedded textures, both compressed (e.g. PNG) or just raw color data</li>\n<li>No external dependencies except boost (zlib and irrxml are also needed, but they’re included in the repository so you don’t need to bother). And there’s even a workaround to * compile Assimp without boost - with some minor limitations.</li>\n<li>Due to its export interface, Assimp serves as general-purpose 3D model converter</li>\n</ul>\n</blockquote>\n<p>The last one is the most import feature for me, and it just in most recent version in github.</p>\n<hr>\n<h1 id=\"Install-DX11\"><a href=\"#Install-DX11\" class=\"headerlink\" title=\"Install DX11\"></a>Install DX11</h1><h2 id=\"download-DX11-SDk\"><a href=\"#download-DX11-SDk\" class=\"headerlink\" title=\"download DX11 SDk\"></a>download DX11 SDk</h2><p>This is the June 2010 DirectX SDK.<br><a href=\"http://www.microsoft.com/download/details.aspx?id=6812\">http://www.microsoft.com/download/details.aspx?id=6812</a></p>\n<h2 id=\"maybe-you-will-see-error-“S1023”\"><a href=\"#maybe-you-will-see-error-“S1023”\" class=\"headerlink\" title=\"maybe you will see error “S1023”\"></a>maybe you will see error “S1023”</h2><p>“S1023” error when you install the DirectX SDK (June 2010)<br><a href=\"https://support.microsoft.com/en-us/kb/2728613\">https://support.microsoft.com/en-us/kb/2728613</a></p>\n<h2 id=\"resolution\"><a href=\"#resolution\" class=\"headerlink\" title=\"resolution\"></a>resolution</h2><p>To resolve this issue, you must uninstall all versions of the Visual C++ 2010 Redistributable before installing the June 2010 DirectX SDK. You may have one or more of the following products installed:</p>\n<ul>\n<li>Microsoft Visual C++ 2010 x86 Redistributable</li>\n<li>Microsoft Visual C++ 2010 x64 Redistributable</li>\n</ul>\n<p>You can use Add or Remove Programs in Control Panel to uninstall the products.<br>Or, you can run the following commands from an administrator command prompt:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MsiExec.exe /passive /X&#123;F0C3E5D1-1ADE-321E-8167-68EF0DE699A5&#125;</span><br><span class=\"line\">MsiExec.exe /passive /X&#123;1D8E6291-B0D5-35EC-8441-6616F567A0F7&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"install-DX-SDK-again\"><a href=\"#install-DX-SDK-again\" class=\"headerlink\" title=\"install DX SDK again\"></a>install DX SDK again</h2><p>After uninstalling the Microsoft Visual C++ 2010 Redistributable products,<br>you may install the June 2010 DirectX SDK.<br><a href=\"http://www.microsoft.com/download/details.aspx?id=6812\">http://www.microsoft.com/download/details.aspx?id=6812</a></p>\n<h2 id=\"install-MVC-2010-x86-64-again\"><a href=\"#install-MVC-2010-x86-64-again\" class=\"headerlink\" title=\"install MVC++2010 x86/64 again\"></a>install MVC++2010 x86/64 again</h2><p>After installing the June 2010 DirectX SDK,<br>you may then reinstall the most current version of the Visual C++ 2010 Redistributable Package.<br><a href=\"http://www.microsoft.com/download/details.aspx?id=26999\">http://www.microsoft.com/download/details.aspx?id=26999</a></p>\n<hr>\n<h1 id=\"Clone-laster-version-from-github\"><a href=\"#Clone-laster-version-from-github\" class=\"headerlink\" title=\"Clone laster version from github\"></a>Clone laster version from github</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/assimp/assimp.git</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Generate-MSVC-prj-x64-by-CMake\"><a href=\"#Generate-MSVC-prj-x64-by-CMake\" class=\"headerlink\" title=\"Generate MSVC prj(x64) by CMake\"></a>Generate MSVC prj(x64) by CMake</h1><p>x64 is just because now we using python-64bit</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd assimp</span><br><span class=\"line\">cmake -G &quot;Visual Studio 14 2015 Win64&quot; CMakeLists.txt</span><br></pre></td></tr></table></figure>\n<ul>\n<li>build “ALL_BUILD” by MSVC</li>\n<li>add ./assimp/bin/Release/  to $PATH</li>\n</ul>\n<hr>\n<h1 id=\"Install-Python-port\"><a href=\"#Install-Python-port\" class=\"headerlink\" title=\"Install Python port\"></a>Install Python port</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd ./assimp/port/PyAssimp</span><br><span class=\"line\">python setup.py install</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Try-to-run-without-error\"><a href=\"#Try-to-run-without-error\" class=\"headerlink\" title=\"Try to run without error\"></a>Try to run without error</h1><p>try to run script as bellow without error</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> pyassimp <span class=\"keyword\">import</span> *</span><br></pre></td></tr></table></figure>\n"},{"title":"ゴールデンウイーク学习计划","date":"2016-05-01T13:20:15.000Z","_content":"\n黄金周的读书计划。\n\n------\n\n# 读书：3D数学基础：图形与游戏开发\n\n- 第12章：几何图元(P225-P261)\n- 第14章：三角网络(P300-P313)\n\n------\n\n# 代码：[NNVG引擎](https://github.com/pslg916/nvvg.git)\n\n- 重点1：TriMesh类的定点索引方法。\n- 重点2：EditTriMesh类关于detach face的实现。\n\n------\n\n# 读书：游戏引擎架构\n\n- 第10章：渲染引擎(P361-P446)\n- 第11章：动画系统(P447-P535)\n\n------\n\n# 工具：Blender(Optional)\n\n- Blender 基礎教程 - 骨架1-11\n- Blender 基礎教程 - 綁定(binding)1-4\n- Blender 基礎教程 - Action骨架控制 (1-2)\n- Blender 基礎教程 - Pole骨架控制\n- Blender 基礎教程 - 骨架整理\n- Blender 基礎教程 - 簡易步行動畫(滑步) 1-3\n\n------\n\n# 时间规划\n\n- 5/2：第12章：几何图元(P225-P261)，第14章：三角网络(P300-P313), 代码：NNVG引擎\n- 5/3：第10章：渲染引擎(P361-P446)，第11章：动画系统(P447-P535)\n- 5/4：\n- 5/5：\n- 5/6：\n- 5/7：\n- 5/8：\n","source":"_posts/20160501_sun_GoldenWeekBooks.md","raw":"---\ntitle: ゴールデンウイーク学习计划\ndate: 2016-05-01 23:20:15\ntags: GPU\ncategories: 读书\n---\n\n黄金周的读书计划。\n\n------\n\n# 读书：3D数学基础：图形与游戏开发\n\n- 第12章：几何图元(P225-P261)\n- 第14章：三角网络(P300-P313)\n\n------\n\n# 代码：[NNVG引擎](https://github.com/pslg916/nvvg.git)\n\n- 重点1：TriMesh类的定点索引方法。\n- 重点2：EditTriMesh类关于detach face的实现。\n\n------\n\n# 读书：游戏引擎架构\n\n- 第10章：渲染引擎(P361-P446)\n- 第11章：动画系统(P447-P535)\n\n------\n\n# 工具：Blender(Optional)\n\n- Blender 基礎教程 - 骨架1-11\n- Blender 基礎教程 - 綁定(binding)1-4\n- Blender 基礎教程 - Action骨架控制 (1-2)\n- Blender 基礎教程 - Pole骨架控制\n- Blender 基礎教程 - 骨架整理\n- Blender 基礎教程 - 簡易步行動畫(滑步) 1-3\n\n------\n\n# 时间规划\n\n- 5/2：第12章：几何图元(P225-P261)，第14章：三角网络(P300-P313), 代码：NNVG引擎\n- 5/3：第10章：渲染引擎(P361-P446)，第11章：动画系统(P447-P535)\n- 5/4：\n- 5/5：\n- 5/6：\n- 5/7：\n- 5/8：\n","slug":"20160501_sun_GoldenWeekBooks","published":1,"updated":"2016-05-02T10:49:50.508Z","_id":"cinps8xjz0000ecgopo3tebbw","comments":1,"layout":"post","photos":[],"link":"","content":"<p>黄金周的读书计划。</p>\n<hr>\n<h1 id=\"读书：3D数学基础：图形与游戏开发\"><a href=\"#读书：3D数学基础：图形与游戏开发\" class=\"headerlink\" title=\"读书：3D数学基础：图形与游戏开发\"></a>读书：3D数学基础：图形与游戏开发</h1><ul>\n<li>第12章：几何图元(P225-P261)</li>\n<li>第14章：三角网络(P300-P313)</li>\n</ul>\n<hr>\n<h1 id=\"代码：NNVG引擎\"><a href=\"#代码：NNVG引擎\" class=\"headerlink\" title=\"代码：NNVG引擎\"></a>代码：<a href=\"https://github.com/pslg916/nvvg.git\" target=\"_blank\" rel=\"external\">NNVG引擎</a></h1><ul>\n<li>重点1：TriMesh类的定点索引方法。</li>\n<li>重点2：EditTriMesh类关于detach face的实现。</li>\n</ul>\n<hr>\n<h1 id=\"读书：游戏引擎架构\"><a href=\"#读书：游戏引擎架构\" class=\"headerlink\" title=\"读书：游戏引擎架构\"></a>读书：游戏引擎架构</h1><ul>\n<li>第10章：渲染引擎(P361-P446)</li>\n<li>第11章：动画系统(P447-P535)</li>\n</ul>\n<hr>\n<h1 id=\"工具：Blender-Optional\"><a href=\"#工具：Blender-Optional\" class=\"headerlink\" title=\"工具：Blender(Optional)\"></a>工具：Blender(Optional)</h1><ul>\n<li>Blender 基礎教程 - 骨架1-11</li>\n<li>Blender 基礎教程 - 綁定(binding)1-4</li>\n<li>Blender 基礎教程 - Action骨架控制 (1-2)</li>\n<li>Blender 基礎教程 - Pole骨架控制</li>\n<li>Blender 基礎教程 - 骨架整理</li>\n<li>Blender 基礎教程 - 簡易步行動畫(滑步) 1-3</li>\n</ul>\n<hr>\n<h1 id=\"时间规划\"><a href=\"#时间规划\" class=\"headerlink\" title=\"时间规划\"></a>时间规划</h1><ul>\n<li>5/2：第12章：几何图元(P225-P261)，第14章：三角网络(P300-P313), 代码：NNVG引擎</li>\n<li>5/3：第10章：渲染引擎(P361-P446)，第11章：动画系统(P447-P535)</li>\n<li>5/4：</li>\n<li>5/5：</li>\n<li>5/6：</li>\n<li>5/7：</li>\n<li>5/8：</li>\n</ul>\n","excerpt":"","more":"<p>黄金周的读书计划。</p>\n<hr>\n<h1 id=\"读书：3D数学基础：图形与游戏开发\"><a href=\"#读书：3D数学基础：图形与游戏开发\" class=\"headerlink\" title=\"读书：3D数学基础：图形与游戏开发\"></a>读书：3D数学基础：图形与游戏开发</h1><ul>\n<li>第12章：几何图元(P225-P261)</li>\n<li>第14章：三角网络(P300-P313)</li>\n</ul>\n<hr>\n<h1 id=\"代码：NNVG引擎\"><a href=\"#代码：NNVG引擎\" class=\"headerlink\" title=\"代码：NNVG引擎\"></a>代码：<a href=\"https://github.com/pslg916/nvvg.git\">NNVG引擎</a></h1><ul>\n<li>重点1：TriMesh类的定点索引方法。</li>\n<li>重点2：EditTriMesh类关于detach face的实现。</li>\n</ul>\n<hr>\n<h1 id=\"读书：游戏引擎架构\"><a href=\"#读书：游戏引擎架构\" class=\"headerlink\" title=\"读书：游戏引擎架构\"></a>读书：游戏引擎架构</h1><ul>\n<li>第10章：渲染引擎(P361-P446)</li>\n<li>第11章：动画系统(P447-P535)</li>\n</ul>\n<hr>\n<h1 id=\"工具：Blender-Optional\"><a href=\"#工具：Blender-Optional\" class=\"headerlink\" title=\"工具：Blender(Optional)\"></a>工具：Blender(Optional)</h1><ul>\n<li>Blender 基礎教程 - 骨架1-11</li>\n<li>Blender 基礎教程 - 綁定(binding)1-4</li>\n<li>Blender 基礎教程 - Action骨架控制 (1-2)</li>\n<li>Blender 基礎教程 - Pole骨架控制</li>\n<li>Blender 基礎教程 - 骨架整理</li>\n<li>Blender 基礎教程 - 簡易步行動畫(滑步) 1-3</li>\n</ul>\n<hr>\n<h1 id=\"时间规划\"><a href=\"#时间规划\" class=\"headerlink\" title=\"时间规划\"></a>时间规划</h1><ul>\n<li>5/2：第12章：几何图元(P225-P261)，第14章：三角网络(P300-P313), 代码：NNVG引擎</li>\n<li>5/3：第10章：渲染引擎(P361-P446)，第11章：动画系统(P447-P535)</li>\n<li>5/4：</li>\n<li>5/5：</li>\n<li>5/6：</li>\n<li>5/7：</li>\n<li>5/8：</li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cinnbohk80000ecgo5bjo1mow","category_id":"cinpvnkhh0001gggo3c2pb3iw","_id":"cinpvnkhz0006gggo6misba3o"},{"post_id":"cing328sz0003bwfgusshhrw4","category_id":"cinpvnkhh0001gggo3c2pb3iw","_id":"cinpvnki30009gggo5mnn8l1e"},{"post_id":"cing328z7000cbwfgoae8s9av","category_id":"cinpvnkhh0001gggo3c2pb3iw","_id":"cinpvnki6000agggoa36qkj5w"},{"post_id":"cing328sr0001bwfgy9zvenki","category_id":"cinpvnkhh0001gggo3c2pb3iw","_id":"cinpvnki8000cgggo79wcemby"},{"post_id":"cinmtwap70000sogo58ki8h6j","category_id":"cinpvnkhh0001gggo3c2pb3iw","_id":"cinpvwpz20008x8godypghz0j"},{"post_id":"cing328t10004bwfgfrfl1dlj","category_id":"cinpvwpyw0002x8gou7276io1","_id":"cinpvwpz4000bx8gobvspi6c8"},{"post_id":"cing328zd000ebwfgtamh122s","category_id":"cinpvwpz10005x8go2cv0llj1","_id":"cinpvwpz4000dx8go0vbwwj51"},{"post_id":"cinnbohkq0002ecgo4ow4niee","category_id":"cinpvwpz30009x8gocmsbz933","_id":"cinpvwpz6000gx8gok3m70wi2"},{"post_id":"cinps8xjz0000ecgopo3tebbw","category_id":"cinpvwpzg000lx8goq00gu4c1","_id":"cinpvwpzh000mx8gocv63pyqk"}],"PostTag":[{"post_id":"cing328sr0001bwfgy9zvenki","tag_id":"cinpvnkhr0002gggo6ylpcr84","_id":"cinpvnki30008gggotdl6gdi3"},{"post_id":"cing328t10004bwfgfrfl1dlj","tag_id":"cing328ta0009bwfgkke3euen","_id":"cinpvwpyw0001x8go43ns7dl4"},{"post_id":"cing328sz0003bwfgusshhrw4","tag_id":"cinpvwpyn0000x8goi9r7oqw9","_id":"cinpvwpyy0004x8gok6nwa4a6"},{"post_id":"cinnbohk80000ecgo5bjo1mow","tag_id":"cinpvwpyw0003x8gor8uoiyj8","_id":"cinpvwpz20007x8go90mk6pyz"},{"post_id":"cing328z7000cbwfgoae8s9av","tag_id":"cinpvwpz10006x8go0zr8kouq","_id":"cinpvwpz4000cx8go4ls4fp4t"},{"post_id":"cing328zd000ebwfgtamh122s","tag_id":"cinpvwpz3000ax8gonw5rpoor","_id":"cinpvwpz6000fx8go23lsxlft"},{"post_id":"cinmtwap70000sogo58ki8h6j","tag_id":"cinpvwpz5000ex8goxa2blkkv","_id":"cinpvwpz6000ix8go2h10hatr"},{"post_id":"cinnbohkq0002ecgo4ow4niee","tag_id":"cinpvwpz6000hx8go6381o0y2","_id":"cinpvwpz8000jx8gosnz7s7tn"},{"post_id":"cinps8xjz0000ecgopo3tebbw","tag_id":"cinpvwpz5000ex8goxa2blkkv","_id":"cinpvwpzg000kx8godjcs68w1"}],"Tag":[{"name":"工具","_id":"cing328sv0002bwfgt07w269a"},{"name":"环境","_id":"cing328t50007bwfgjd4wm9qj"},{"name":"Django","_id":"cing328ta0009bwfgkke3euen"},{"name":"数学","_id":"cing328zn000hbwfghy1bqsal"},{"name":"CG","_id":"cinnbohkt0003ecgozz0b5csa"},{"name":"Vim","_id":"cinpvnkhr0002gggo6ylpcr84"},{"name":"django","_id":"cinpvnkhw0004gggo6069bicp"},{"name":"Win","_id":"cinpvwpyn0000x8goi9r7oqw9"},{"name":"Markdown","_id":"cinpvwpyw0003x8gor8uoiyj8"},{"name":"Hexo","_id":"cinpvwpz10006x8go0zr8kouq"},{"name":"TPS","_id":"cinpvwpz3000ax8gonw5rpoor"},{"name":"GPU","_id":"cinpvwpz5000ex8goxa2blkkv"},{"name":"Assimp","_id":"cinpvwpz6000hx8go6381o0y2"}]}}